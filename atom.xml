<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Fredo&#39;s Blog</title>
  
  
  <link href="http://fu-jw.com/atom.xml" rel="self"/>
  
  <link href="http://fu-jw.com/"/>
  <updated>2023-07-09T11:25:56.293Z</updated>
  <id>http://fu-jw.com/</id>
  
  <author>
    <name>Fredo</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SpringBootå•å…ƒæµ‹è¯•</title>
    <link href="http://fu-jw.com/posts/6d37548c.html"/>
    <id>http://fu-jw.com/posts/6d37548c.html</id>
    <published>2023-07-02T00:00:00.000Z</published>
    <updated>2023-07-09T11:25:56.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ¤–ğŸ¤–-æ‘˜è¦:<br>æœ¬æ–‡ä»‹ç»äº†SpringBootå•å…ƒæµ‹è¯•çš„æ–¹æ³•å’Œä½¿ç”¨ã€‚é€šè¿‡JUnitå’ŒMockMvcæ¡†æ¶ï¼Œå¯ä»¥ç²¾ç¡®æ§åˆ¶æµ‹è¯•ç²’åº¦ï¼Œæé«˜å•å…ƒæµ‹è¯•çš„æ•ˆç‡å’Œè´¨é‡ã€‚æ–‡ç« è¯¦è¿°äº†Springbootå•å…ƒæµ‹è¯•ç›¸å…³æ³¨è§£ï¼Œæ–­è¨€ï¼ŒåµŒå¥—æµ‹è¯•ä»¥åŠå‚æ•°åŒ–æµ‹è¯•çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¸®åŠ©å¼€å‘è€…ç³»ç»Ÿæ€§çš„ç†è§£å’ŒæŒæ¡SpringBootå•å…ƒæµ‹è¯•ç›¸å…³çŸ¥è¯†ã€‚</p></blockquote><h1 id="SpringBootå•å…ƒæµ‹è¯•"><a href="#SpringBootå•å…ƒæµ‹è¯•" class="headerlink" title="SpringBootå•å…ƒæµ‹è¯•"></a>SpringBootå•å…ƒæµ‹è¯•</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>åœ¨å¹³æ—¶çš„å¼€å‘å½“ä¸­ï¼Œä¸€ä¸ªé¡¹ç›®å¾€å¾€åŒ…å«äº†å¤§é‡çš„æ–¹æ³•ï¼Œå¯èƒ½æœ‰æˆåƒä¸Šä¸‡ä¸ªã€‚å¦‚ä½•å»ä¿è¯è¿™äº›æ–¹æ³•äº§ç”Ÿçš„ç»“æœæ˜¯æˆ‘ä»¬æƒ³è¦çš„å‘¢ï¼Ÿ</p><p>ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆï¼šPostman å‘æŠ¥æ–‡ï¼ŒSystem.outæ‰“å°debugæ—¥å¿—ï¼Œæˆ–è€…çœ¼ç›çœ‹è¿”å›æŠ¥æ–‡</p><ol><li>çœ¼ç›çœ‹ç»“æœæ˜¯å¦æ­£ç¡®ï¼Œç…çä¸è¯´ï¼Œä¹Ÿå¤ªä¸æ™ºèƒ½.æˆ‘ä»¬æ˜¯é«˜æ™ºå•†ç¨‹åºå‘˜,èƒ½è®©ä»£ç è§£å†³çš„äº‹æƒ…,ç»ä¸èƒ½é äººå·¥å»è§£å†³. </li><li>postman åªèƒ½å¯¹controllerè¿›è¡Œæµ‹è¯•ã€‚controllerè¦æ­£ç¡®ï¼Œå‰ææ˜¯serviceï¼Œdaoéƒ½æ­£ç¡®ã€‚å‘ç°é—®é¢˜å¤ªæ™šï¼Œè§£å†³æˆæœ¬é«˜ã€‚</li><li>å¯¹äºä¸€äº›äº¤æ˜“ç³»ç»Ÿï¼Œç”±äºäº¤æ˜“ä¸»é”®çš„å­˜åœ¨ï¼Œæ¯æ¬¡éƒ½è¦æ›´æ”¹å‚æ•°åï¼Œå†è¿›è¡Œæµ‹è¯•ï¼Œæ•ˆç‡å¤ªä½ã€‚</li><li>æ— æ³•å¯¹å†…éƒ¨çš„å‡½æ•°åŠŸèƒ½åšæµ‹è¯•</li><li>postmançš„æµ‹è¯•æ¡ˆä¾‹ä¸é¡¹ç›®å·¥ç¨‹ä¸å†ä¸€èµ·ï¼Œè¿™äº›æ¡ˆä¾‹åªèƒ½è‡ªå·±ä¸€ä¸ªäººç”¨ï¼Œæ— æ³•å›¢é˜Ÿå…±äº«</li></ol><p>è¿™æ—¶ï¼Œå°±è½®åˆ°å•å…ƒæµ‹è¯•é—ªäº®å‡ºåœºäº†</p><ul><li>æµ‹è¯•ä»£ç å’Œå·¥ç¨‹ä»£ç åœ¨åŒä¸€å·¥ç¨‹æ–‡ä»¶ä¸­ï¼Œä¾¿äºç»´æŠ¤å’Œä¼ æ‰¿ã€‚ </li><li>ä½¿ç”¨æ–­è¨€è‡ªåŠ¨æ£€æµ‹ç»“æœ </li><li>æµ‹è¯•ç²’åº¦å°ï¼Œå¯ä»¥å°åˆ°æ¯ä¸ªå‡½æ•° </li><li>æµ‹è¯•æ¨¡å—é—´ç›¸äº’ä¾èµ–å°ã€‚å¼€å‘å®Œä¸€ä¸ªæ¨¡å—ï¼Œå°±å¯ä»¥æµ‹è¯•ä¸€ä¸ªæ¨¡å—ã€‚å¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘çŠ¯å¤§é”™äº†ã€‚</li></ul><h2 id="SpringBootå•å…ƒæµ‹è¯•-1"><a href="#SpringBootå•å…ƒæµ‹è¯•-1" class="headerlink" title="SpringBootå•å…ƒæµ‹è¯•"></a>SpringBootå•å…ƒæµ‹è¯•</h2><p>ä¸šç•Œå•å…ƒæµ‹è¯•ä¸€èˆ¬é‡‡ç”¨åŸºäº<strong>JUnit</strong>å’Œ<strong>MockMvc</strong>æ¡†æ¶è¿›è¡Œ</p><ul><li><strong>JUnit</strong>: æ˜¯é€šç”¨æµ‹è¯•æ¡†æ¶,ä¸»è¦è¿›è¡ŒDaoå±‚å’ŒServiceå±‚æµ‹è¯•</li><li><strong>MockMvc</strong>: ä¸»è¦è¿›è¡ŒControllerå±‚æµ‹è¯•</li></ul><h2 id="ç›¸å…³æ³¨è§£"><a href="#ç›¸å…³æ³¨è§£" class="headerlink" title="ç›¸å…³æ³¨è§£"></a>ç›¸å…³æ³¨è§£</h2><p><strong>JUnit5</strong>çš„æ³¨è§£ä¸<strong>JUnit4</strong>çš„æ³¨è§£æœ‰æ‰€å˜åŒ–,è¯¦è§<a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations">å®˜æ–¹æ–‡æ¡£</a></p><ul><li><code>@Test</code>:è¡¨ç¤ºæ–¹æ³•æ˜¯æµ‹è¯•æ–¹æ³•ã€‚ä½†æ˜¯ä¸<strong>JUnit4</strong>çš„<code>@Test</code>ä¸åŒï¼Œä»–çš„èŒè´£éå¸¸å•ä¸€ä¸èƒ½å£°æ˜ä»»ä½•å±æ€§ï¼Œæ‹“å±•çš„æµ‹è¯•å°†ä¼šç”±Jupiteræä¾›é¢å¤–æµ‹è¯•</li><li><code>@ParameterizedTest</code>: è¡¨ç¤ºæ–¹æ³•æ˜¯å‚æ•°åŒ–æµ‹è¯•</li><li><code>@RepeatedTest</code>: è¡¨ç¤ºæ–¹æ³•å¯é‡å¤æ‰§è¡Œ</li><li><code>@DisplayName</code>: ä¸ºæµ‹è¯•ç±»æˆ–è€…æµ‹è¯•æ–¹æ³•è®¾ç½®å±•ç¤ºåç§°</li><li><code>@BeforeEach</code>: è¡¨ç¤ºåœ¨æ¯ä¸ªå•å…ƒæµ‹è¯•ä¹‹å‰æ‰§è¡Œ</li><li><code>@AfterEach</code>: è¡¨ç¤ºåœ¨æ¯ä¸ªå•å…ƒæµ‹è¯•ä¹‹åæ‰§è¡Œ</li><li><code>@BeforeAll</code>: è¡¨ç¤ºåœ¨æ‰€æœ‰å•å…ƒæµ‹è¯•ä¹‹å‰æ‰§è¡Œ</li><li><code>@AfterAll</code>: è¡¨ç¤ºåœ¨æ‰€æœ‰å•å…ƒæµ‹è¯•ä¹‹åæ‰§è¡Œ</li><li><code>@Tag</code>: è¡¨ç¤ºå•å…ƒæµ‹è¯•ç±»åˆ«ï¼Œç±»ä¼¼äº<strong>JUnit4</strong>ä¸­çš„<code>@Categories</code></li><li><code>@Disabled</code>: è¡¨ç¤ºæµ‹è¯•ç±»æˆ–æµ‹è¯•æ–¹æ³•ä¸æ‰§è¡Œï¼Œç±»ä¼¼äº<strong>JUnit4</strong>ä¸­çš„<code>@Ignore</code></li><li><code>@Timeout</code>: è¡¨ç¤ºæµ‹è¯•æ–¹æ³•è¿è¡Œå¦‚æœè¶…è¿‡äº†æŒ‡å®šæ—¶é—´å°†ä¼šè¿”å›é”™è¯¯</li><li><code>@ExtendWith</code>: ä¸ºæµ‹è¯•ç±»æˆ–æµ‹è¯•æ–¹æ³•æä¾›æ‰©å±•ç±»å¼•ç”¨</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StandardTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeforeAll</span> <span class="comment">//è¡¨ç¤ºåœ¨æ‰€æœ‰å•å…ƒæµ‹è¯•ä¹‹å‰æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">initAll</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¼€å§‹å•å…ƒæµ‹è¯•:&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeforeEach</span> <span class="comment">//è¡¨ç¤ºåœ¨æ¯ä¸ªå•å…ƒæµ‹è¯•ä¹‹å‰æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•æ‰§è¡Œå‰...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DisplayName(&quot;æµ‹è¯•åç§°&quot;)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">succeedingTest</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">failingTest</span><span class="params">()</span> &#123;</span><br><span class="line">        fail(<span class="string">&quot;a failing test&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="meta">@Disabled(&quot;for demonstration purposes&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">skippedTest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// not executed</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">abortedTest</span><span class="params">()</span> &#123;</span><br><span class="line">        assumeTrue(<span class="string">&quot;abc&quot;</span>.contains(<span class="string">&quot;Z&quot;</span>));</span><br><span class="line">        fail(<span class="string">&quot;test should have been aborted&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterEach</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">tearDown</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•æ‰§è¡Œç»“æŸ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterAll</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">tearDownAll</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å•å…ƒæµ‹è¯•ç»“æŸ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ–­è¨€"><a href="#æ–­è¨€" class="headerlink" title="æ–­è¨€"></a>æ–­è¨€</h2><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>assertEquals</td><td>åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æˆ–ä¸¤ä¸ªåŸå§‹ç±»å‹æ˜¯å¦ç›¸ç­‰</td></tr><tr><td>assertNotEquals</td><td>åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æˆ–ä¸¤ä¸ªåŸå§‹ç±»å‹æ˜¯å¦ä¸ç›¸ç­‰</td></tr><tr><td>assertSame</td><td>åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡å¼•ç”¨æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</td></tr><tr><td>assertNotSame</td><td>åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡å¼•ç”¨æ˜¯å¦æŒ‡å‘ä¸åŒçš„å¯¹è±¡</td></tr><tr><td>assertTrue</td><td>åˆ¤æ–­ç»™å®šçš„å¸ƒå°”å€¼æ˜¯å¦ä¸º true</td></tr><tr><td>assertFalse</td><td>åˆ¤æ–­ç»™å®šçš„å¸ƒå°”å€¼æ˜¯å¦ä¸º false</td></tr><tr><td>assertNull</td><td>åˆ¤æ–­ç»™å®šçš„å¯¹è±¡å¼•ç”¨æ˜¯å¦ä¸º null</td></tr><tr><td>assertNotNull</td><td>åˆ¤æ–­ç»™å®šçš„å¯¹è±¡å¼•ç”¨æ˜¯å¦ä¸ä¸º null</td></tr><tr><td>assertArrayEquals</td><td>æ•°ç»„æ–­è¨€</td></tr><tr><td>assertAll</td><td>ç»„åˆæ–­è¨€</td></tr><tr><td>assertThrows</td><td>å¼‚å¸¸æ–­è¨€</td></tr><tr><td>assertTimeout</td><td>è¶…æ—¶æ–­è¨€</td></tr><tr><td>fail</td><td>å¿«é€Ÿå¤±è´¥</td></tr></tbody></table><h2 id="åµŒå¥—æµ‹è¯•"><a href="#åµŒå¥—æµ‹è¯•" class="headerlink" title="åµŒå¥—æµ‹è¯•"></a>åµŒå¥—æµ‹è¯•</h2><blockquote><p><strong>JUnit5</strong>å¯ä»¥é€šè¿‡Javaä¸­çš„å†…éƒ¨ç±»å’Œ<code>@Nested</code>æ³¨è§£å®ç°åµŒå¥—æµ‹è¯•, ä»è€Œå¯ä»¥æ›´å¥½çš„æŠŠç›¸å…³çš„æµ‹è¯•æ–¹æ³•ç»„ç»‡åœ¨ä¸€èµ·.<br>åœ¨å†…éƒ¨ç±»ä¸­å¯ä»¥ä½¿ç”¨<code>@BeforeEach</code>å’Œ<code>@AfterEach</code>æ³¨è§£, è€Œä¸”åµŒå¥—çš„å±‚æ¬¡æ²¡æœ‰é™åˆ¶</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@DisplayName(&quot;A stack&quot;)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestingAStackDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    Stack&lt;Object&gt; stack;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="meta">@DisplayName(&quot;is instantiated with new Stack()&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">isInstantiatedWithNew</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nested</span></span><br><span class="line">    <span class="meta">@DisplayName(&quot;when new&quot;)</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">WhenNew</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@BeforeEach</span></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">createNewStack</span><span class="params">()</span> &#123;</span><br><span class="line">            stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Test</span></span><br><span class="line">        <span class="meta">@DisplayName(&quot;is empty&quot;)</span></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">            assertTrue(stack.isEmpty());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Test</span></span><br><span class="line">        <span class="meta">@DisplayName(&quot;throws EmptyStackException when popped&quot;)</span></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">throwsExceptionWhenPopped</span><span class="params">()</span> &#123;</span><br><span class="line">            assertThrows(EmptyStackException.class, stack::pop);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Test</span></span><br><span class="line">        <span class="meta">@DisplayName(&quot;throws EmptyStackException when peeked&quot;)</span></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">throwsExceptionWhenPeeked</span><span class="params">()</span> &#123;</span><br><span class="line">            assertThrows(EmptyStackException.class, stack::peek);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Nested</span></span><br><span class="line">        <span class="meta">@DisplayName(&quot;after pushing an element&quot;)</span></span><br><span class="line">        <span class="keyword">class</span> <span class="title class_">AfterPushing</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">anElement</span> <span class="operator">=</span> <span class="string">&quot;an element&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@BeforeEach</span></span><br><span class="line">            <span class="keyword">void</span> <span class="title function_">pushAnElement</span><span class="params">()</span> &#123;</span><br><span class="line">                stack.push(anElement);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Test</span></span><br><span class="line">            <span class="meta">@DisplayName(&quot;it is no longer empty&quot;)</span></span><br><span class="line">            <span class="keyword">void</span> <span class="title function_">isNotEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">                assertFalse(stack.isEmpty());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Test</span></span><br><span class="line">            <span class="meta">@DisplayName(&quot;returns the element when popped and is empty&quot;)</span></span><br><span class="line">            <span class="keyword">void</span> <span class="title function_">returnElementWhenPopped</span><span class="params">()</span> &#123;</span><br><span class="line">                assertEquals(anElement, stack.pop());</span><br><span class="line">                assertTrue(stack.isEmpty());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Test</span></span><br><span class="line">            <span class="meta">@DisplayName(&quot;returns the element when peeked but remains not empty&quot;)</span></span><br><span class="line">            <span class="keyword">void</span> <span class="title function_">returnElementWhenPeeked</span><span class="params">()</span> &#123;</span><br><span class="line">                assertEquals(anElement, stack.peek());</span><br><span class="line">                assertFalse(stack.isEmpty());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‚æ•°åŒ–æµ‹è¯•"><a href="#å‚æ•°åŒ–æµ‹è¯•" class="headerlink" title="å‚æ•°åŒ–æµ‹è¯•"></a>å‚æ•°åŒ–æµ‹è¯•</h2><p>å‚æ•°åŒ–æµ‹è¯•æ˜¯<strong>JUnit5</strong>å¾ˆé‡è¦çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå®ƒä½¿å¾—ç”¨ä¸åŒçš„å‚æ•°å¤šæ¬¡è¿è¡Œæµ‹è¯•æˆä¸ºäº†å¯èƒ½ï¼Œä¹Ÿä¸ºæˆ‘ä»¬çš„å•å…ƒæµ‹è¯•å¸¦æ¥è®¸å¤šä¾¿åˆ©ã€‚</p><p>åˆ©ç”¨<code>@ValueSource</code>ç­‰æ³¨è§£ï¼ŒæŒ‡å®šå…¥å‚ï¼Œæˆ‘ä»¬å°†å¯ä»¥ä½¿ç”¨ä¸åŒçš„å‚æ•°è¿›è¡Œå¤šæ¬¡å•å…ƒæµ‹è¯•ï¼Œè€Œä¸éœ€è¦æ¯æ–°å¢ä¸€ä¸ªå‚æ•°å°±æ–°å¢ä¸€ä¸ªå•å…ƒæµ‹è¯•ï¼Œçœå»äº†å¾ˆå¤šå†—ä½™ä»£ç ã€‚</p><ul><li><code>@ValueSource</code>: ä¸ºå‚æ•°åŒ–æµ‹è¯•æŒ‡å®šå…¥å‚æ¥æºï¼Œæ”¯æŒå…«å¤§åŸºç¡€ç±»ä»¥åŠStringç±»å‹,Classç±»å‹</li><li><code>@NullSource</code>: è¡¨ç¤ºä¸ºå‚æ•°åŒ–æµ‹è¯•æä¾›ä¸€ä¸ªnullçš„å…¥å‚</li><li><code>@EnumSource</code>: è¡¨ç¤ºä¸ºå‚æ•°åŒ–æµ‹è¯•æä¾›ä¸€ä¸ªæšä¸¾å…¥å‚</li><li><code>@CsvFileSource</code>ï¼šè¡¨ç¤ºè¯»å–æŒ‡å®šCSVæ–‡ä»¶å†…å®¹ä½œä¸ºå‚æ•°åŒ–æµ‹è¯•å…¥å‚</li><li><code>@MethodSource</code>ï¼šè¡¨ç¤ºè¯»å–æŒ‡å®šæ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºå‚æ•°åŒ–æµ‹è¯•å…¥å‚(æ³¨æ„æ–¹æ³•è¿”å›éœ€è¦æ˜¯ä¸€ä¸ªæµ)</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@ValueSource(strings = &#123;&quot;one&quot;, &quot;two&quot;, &quot;three&quot;&#125;)</span></span><br><span class="line"><span class="meta">@DisplayName(&quot;å‚æ•°åŒ–æµ‹è¯•1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">parameterizedTest1</span><span class="params">(String string)</span> &#123;</span><br><span class="line">    System.out.println(string);</span><br><span class="line">    Assertions.assertTrue(StringUtils.isNotBlank(string));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@MethodSource(&quot;method&quot;)</span>    <span class="comment">//æŒ‡å®šæ–¹æ³•å</span></span><br><span class="line"><span class="meta">@DisplayName(&quot;æ–¹æ³•æ¥æºå‚æ•°&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testWithExplicitLocalMethodSource</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    Assertions.assertNotNull(name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> Stream&lt;String&gt; <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Stream.of(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ğŸ¤–ğŸ¤–-æ‘˜è¦:&lt;br&gt;æœ¬æ–‡ä»‹ç»äº†SpringBootå•å…ƒæµ‹è¯•çš„æ–¹æ³•å’Œä½¿ç”¨ã€‚é€šè¿‡JUnitå’ŒMockMvcæ¡†æ¶ï¼Œå¯ä»¥ç²¾ç¡®æ§åˆ¶æµ‹è¯•ç²’åº¦ï¼Œæé«˜å•å…ƒæµ‹è¯•çš„æ•ˆç‡å’Œè´¨é‡ã€‚æ–‡ç« è¯¦è¿°äº†Springbootå•å…ƒæµ‹è¯•ç›¸å…³æ³¨è§£ï¼Œæ–­è¨€ï¼ŒåµŒå¥—æµ‹è¯•ä»¥åŠå‚æ•°åŒ–æµ‹è¯•çš„ä½¿ç”¨æ–¹æ³•ï¼Œ</summary>
      
    
    
    
    <category term="å­¦ä¹ " scheme="http://fu-jw.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="SpringBoot" scheme="http://fu-jw.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ ¸å¿ƒç‰¹æ€§</title>
    <link href="http://fu-jw.com/posts/dcf57196.html"/>
    <id>http://fu-jw.com/posts/dcf57196.html</id>
    <published>2023-07-02T00:00:00.000Z</published>
    <updated>2023-07-09T11:25:56.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ¤–ğŸ¤–-æ‘˜è¦:<br>æœ¬æ–‡ä»‹ç»äº†SpringBootçš„æ ¸å¿ƒç‰¹æ€§ï¼ŒåŒ…æ‹¬SpringApplicationçš„ä½¿ç”¨ï¼Œå¦‚ä½•é€šè¿‡é…ç½®æ–‡ä»¶å’Œä»£ç è¿›è¡Œè‡ªå®šä¹‰è®¾ç½®ï¼Œä»¥åŠå¯åŠ¨å¤±è´¥æ—¶çš„å¤„ç†æ–¹å¼ã€‚æ–‡ä¸­è¿˜è¯¦è¿°äº†å¦‚ä½•å®ç°é…ç½®æ–‡ä»¶çš„éš”ç¦»å’Œå¤–ç½®ï¼Œè§£é‡Šäº†å±æ€§å ä½ç¬¦çš„ç”¨é€”ï¼Œä»¥åŠé…ç½®çš„ä¼˜å…ˆçº§é¡ºåºã€‚æœ€åï¼Œä»‹ç»äº†æ—¥å¿—çš„ä½¿ç”¨å’ŒJUnit5å•å…ƒæµ‹è¯•ã€‚</p></blockquote><h1 id="SpringBootæ ¸å¿ƒç‰¹æ€§"><a href="#SpringBootæ ¸å¿ƒç‰¹æ€§" class="headerlink" title="SpringBootæ ¸å¿ƒç‰¹æ€§"></a>SpringBootæ ¸å¿ƒç‰¹æ€§</h1><p><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html">å®˜æ–¹æ–‡æ¡£:</a></p><blockquote><p>Spring Application: SpringApplication<br>External Configuration: External Configuration<br>Profiles: Profiles<br>Logging: Logging</p></blockquote><h2 id="SpringApplication"><a href="#SpringApplication" class="headerlink" title="SpringApplication"></a>SpringApplication</h2><p><code>SpringApplication</code>ç®€åŒ–äº†Springç¨‹åºçš„å¯åŠ¨è¿‡ç¨‹.<br>å¤§å¤šæ•°æƒ…å†µä¸‹, å¯ä»¥å§”æ‰˜ç»™é™æ€<code>SpringApplication.run</code>æ–¹æ³•, å¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤º:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Main.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æ—¥å¿—:</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">  .   ____          _            __ _ _</span><br><span class="line"> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br><span class="line">( ( )\___ | &#x27;_ | &#x27;_| | &#x27;_ \/ _` | \ \ \ \</span><br><span class="line"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br><span class="line">  &#x27;  |____| .__|_| |_|_| |_\__, | / / / /</span><br><span class="line"> =========|_|==============|___/=/_/_/_/</span><br><span class="line"> :: Spring Boot ::                (v3.1.0)</span><br><span class="line"></span><br><span class="line">2023-07-05T14:07:10.668+08:00  INFO 9584 --- [           main] com.fredo.Main                           : Starting Main using Java 17.0.2 with PID 9584 (D:\Develop\Projects\ideaProject\spring-tutorial\spring-boot\demo05-features\target\classes started by Administrator in D:\Develop\Projects\ideaProject\spring-tutorial)</span><br><span class="line">2023-07-05T14:07:10.673+08:00  INFO 9584 --- [           main] com.fredo.Main                           : No active profile set, falling back to 1 default profile: &quot;default&quot;</span><br><span class="line">2023-07-05T14:07:12.122+08:00  INFO 9584 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)</span><br><span class="line">2023-07-05T14:07:12.123+08:00  INFO 9584 --- [           main] o.a.catalina.core.AprLifecycleListener   : An older version [1.2.34] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.1]</span><br><span class="line">2023-07-05T14:07:12.123+08:00  INFO 9584 --- [           main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.34] using APR version [1.7.0].</span><br><span class="line">2023-07-05T14:07:12.140+08:00  INFO 9584 --- [           main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1o  3 May 2022]</span><br><span class="line">2023-07-05T14:07:12.159+08:00  INFO 9584 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span><br><span class="line">2023-07-05T14:07:12.159+08:00  INFO 9584 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.8]</span><br><span class="line">2023-07-05T14:07:12.356+08:00  INFO 9584 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext</span><br><span class="line">2023-07-05T14:07:12.360+08:00  INFO 9584 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1596 ms</span><br><span class="line">2023-07-05T14:07:13.208+08:00  INFO 9584 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#x27;&#x27;</span><br><span class="line">2023-07-05T14:07:13.219+08:00  INFO 9584 --- [           main] com.fredo.Main                           : Started Main in 3.223 seconds (process running for 4.118)</span><br></pre></td></tr></table></figure><p>æ³¨æ„: åªæœ‰å‰ä¸¤è¡Œå’Œæœ€åä¸€è¡Œæ˜¯SpringBootçš„<strong>å¯åŠ¨æ—¥å¿—</strong><br>å¯åŠ¨æ—¥å¿—å¯ä»¥å…³é—­:</p><ul><li>é…ç½®æ–‡ä»¶</li></ul><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.main.log-startup-info</span>=<span class="string">false</span></span><br></pre></td></tr></table></figure><ul><li>ä»£ç :</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">SpringApplication application=<span class="keyword">new</span> <span class="title class_">SpringApplication</span>(Main.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…³é—­å¯åŠ¨æ—¥å¿—(æ³¨æ„:é…ç½®æ–‡ä»¶çš„ä¼˜å…ˆçº§å¤§äºä»£ç ä¼˜å…ˆçº§!!!)</span></span><br><span class="line">        application.setLogStartupInfo(<span class="literal">false</span>);</span><br><span class="line">        application.run(args);</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨å¤±è´¥"><a href="#å¯åŠ¨å¤±è´¥" class="headerlink" title="å¯åŠ¨å¤±è´¥"></a>å¯åŠ¨å¤±è´¥</h3><p>å¦‚æœåº”ç”¨ç¨‹åºæ— æ³•å¯åŠ¨, å·²æ³¨å†Œçš„<code>FailureAnalyzers</code>å°†æœ‰æœºä¼šæä¾›ä¸“ç”¨çš„é”™è¯¯æ¶ˆæ¯å’Œè§£å†³é—®é¢˜çš„å…·ä½“æ“ä½œ<br>ä»¥ç«¯å£å ç”¨ä¸ºä¾‹:</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">***************************</span><br><span class="line">APPLICATION FAILED TO START</span><br><span class="line">***************************</span><br><span class="line"></span><br><span class="line">Description:</span><br><span class="line"></span><br><span class="line">Embedded servlet container failed to start. Port 8080 was already in use.</span><br><span class="line"></span><br><span class="line">Action:</span><br><span class="line"></span><br><span class="line">Identify and stop the process that is listening on port 8080 or configure this application to listen on another port.</span><br></pre></td></tr></table></figure><p><code>FailureAnalyzers</code>æ˜¯ä¸€ä¸ªç”¨äºåˆ†æåº”ç”¨ç¨‹åºå¤±è´¥åŸå› çš„å·¥å…·.å½“åº”ç”¨ç¨‹åºå‘ç”Ÿå¤±è´¥æ—¶,<code>FailureAnalyzers</code>ä¼šæ”¶é›†å¤±è´¥ä¿¡æ¯,<br>å¹¶åˆ†æå¤±è´¥åŸå› ,ä»¥ä¾¿å¼€å‘äººå‘˜èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£åº”ç”¨ç¨‹åºçš„å¥åº·çŠ¶å†µ.</p><p>å¯è‡ªå®šä¹‰:</p><ul><li>1.è‡ªå®šä¹‰ç±»ç»§æ‰¿<code>AbstractFailureAnalyzer</code>,å¹¶é‡å†™<code>analyze</code>æ–¹æ³•.å¯å‚è€ƒ:<code>BindValidationFailureAnalyzer</code></li><li>2.æ³¨å†Œåœ¨META-INF&#x2F;spring.factories æ–‡ä»¶ä¸­</li></ul><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">org.springframework.boot.diagnostics.FailureAnalyzer=\</span><br><span class="line">com.fredo.custom.MyFailureAnalyzer</span><br></pre></td></tr></table></figure><h3 id="å»¶è¿Ÿåˆå§‹åŒ–"><a href="#å»¶è¿Ÿåˆå§‹åŒ–" class="headerlink" title="å»¶è¿Ÿåˆå§‹åŒ–"></a>å»¶è¿Ÿåˆå§‹åŒ–</h3><p>åœ¨å®¹å™¨å¯åŠ¨æ—¶ä¸åˆå§‹åŒ–Bean,åªæœ‰åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶å†åˆå§‹åŒ–</p><p>é…ç½®æ–¹æ³•:</p><ul><li>é…ç½®æ–‡ä»¶</li></ul><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.main.lazy-initialization</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure><ul><li>ä»£ç :</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼€å¯å»¶è¿Ÿåˆå§‹åŒ–(é»˜è®¤å…³é—­,ä¸å»ºè®®å¼€å¯)</span></span><br><span class="line">application.setLazyInitialization(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨æ³¨è§£<code>@Lazy(false)</code>, å•ç‹¬æŒ‡å®šæŸäº›Beanå»¶è¿Ÿåˆå§‹åŒ–</p><h3 id="è‡ªå®šä¹‰Banner"><a href="#è‡ªå®šä¹‰Banner" class="headerlink" title="è‡ªå®šä¹‰Banner"></a>è‡ªå®šä¹‰Banner</h3><p>Banner å°±æ˜¯ç¨‹åºå¯åŠ¨æ—¶æœ€ä¸Šé¢çš„ä¿¡æ¯</p><p>ç±»è·¯å¾„æ·»åŠ æ–‡ä»¶:<strong>banner.txt</strong>æˆ–è®¾ç½®<code>spring.banner.location</code>å°±å¯ä»¥å®šåˆ¶ Banner<br><a href="https://www.bootschool.net/ascii">æ¨èç½‘å€</a></p><p>å…³é—­</p><ul><li>é…ç½®æ–‡ä»¶</li></ul><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.main.banner-mode</span>=<span class="string">off</span></span><br></pre></td></tr></table></figure><ul><li>ä»£ç :</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å…³é—­Banner,é»˜è®¤å€¼:CONSOLE</span></span><br><span class="line">application.setBannerMode(Banner.Mode.OFF);</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰SpringApplication"><a href="#è‡ªå®šä¹‰SpringApplication" class="headerlink" title="è‡ªå®šä¹‰SpringApplication"></a>è‡ªå®šä¹‰SpringApplication</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[]args)</span>&#123;</span><br><span class="line">  SpringApplication application=<span class="keyword">new</span> <span class="title class_">SpringApplication</span>(Main.class);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…³é—­å¯åŠ¨æ—¥å¿—(æ³¨æ„:é…ç½®æ–‡ä»¶çš„ä¼˜å…ˆçº§å¤§äºä»£ç ä¼˜å…ˆçº§!!!)</span></span><br><span class="line">  application.setLogStartupInfo(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¼€å¯å»¶è¿Ÿåˆå§‹åŒ–(é»˜è®¤å…³é—­,ä¸å»ºè®®å¼€å¯)</span></span><br><span class="line">  application.setLazyInitialization(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…³é—­Banner,é»˜è®¤å€¼:CONSOLE</span></span><br><span class="line"><span class="comment">//        application.setBannerMode(Banner.Mode.OFF);</span></span><br><span class="line"></span><br><span class="line">  application.run(args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡ªå®šä¹‰ä¿¡æ¯åœ¨<code>application.properties</code>ä¸­,<br>å…·ä½“å¯<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config">å‚è€ƒå®˜ç½‘</a></p><h3 id="æµå¼æ„é€ API"><a href="#æµå¼æ„é€ API" class="headerlink" title="æµå¼æ„é€ API"></a>æµå¼æ„é€ API</h3><p>å¯ç”¨äºæ„å»ºçˆ¶å­å±‚æ¬¡ç»“æ„</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[]args)</span>&#123;</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">SpringApplicationBuilder</span>()</span><br><span class="line">  .sources(Main.class) <span class="comment">// çˆ¶</span></span><br><span class="line">  .child(Main.class) <span class="comment">// å­,éå¿…é¡»</span></span><br><span class="line">  .bannerMode(Banner.Mode.OFF)</span><br><span class="line">  .run(args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶éš”ç¦»"><a href="#é…ç½®æ–‡ä»¶éš”ç¦»" class="headerlink" title="é…ç½®æ–‡ä»¶éš”ç¦»"></a>é…ç½®æ–‡ä»¶éš”ç¦»</h2><blockquote><p>ç¯å¢ƒéš”ç¦»: å¿«é€Ÿåˆ‡æ¢å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒ<br>æ­¥éª¤ï¼š</p><ol><li>æ ‡è¯†ç¯å¢ƒï¼šæŒ‡å®šå“ªäº›ç»„ä»¶ã€é…ç½®åœ¨å“ªä¸ªç¯å¢ƒç”Ÿæ•ˆ</li><li>åˆ‡æ¢ç¯å¢ƒï¼šè¿™ä¸ªç¯å¢ƒå¯¹åº”çš„æ‰€æœ‰ç»„ä»¶å’Œé…ç½®å°±åº”è¯¥ç”Ÿæ•ˆ</li></ol></blockquote><h3 id="æŒ‡å®šç¯å¢ƒ"><a href="#æŒ‡å®šç¯å¢ƒ" class="headerlink" title="æŒ‡å®šç¯å¢ƒ"></a>æŒ‡å®šç¯å¢ƒ</h3><p>Spring Profiles æä¾›ä¸€ç§éš”ç¦»é…ç½®çš„æ–¹å¼, ä½¿å…¶ä»…åœ¨ç‰¹å®šç¯å¢ƒç”Ÿæ•ˆ<br>ä»»ä½•ç»„ä»¶éƒ½å¯ç”¨<code>@Profile</code>æ ‡è®°, æ¥æŒ‡å®šä½•æ—¶è¢«åŠ è½½</p><p>ä¾‹å¦‚:</p><ul><li>devç¯å¢ƒ: @Profile({â€œdevâ€})</li><li>devå’Œprodç¯å¢ƒ: @Profile({â€œdevâ€, â€œprodâ€})</li></ul><h3 id="æ¿€æ´»ç¯å¢ƒ"><a href="#æ¿€æ´»ç¯å¢ƒ" class="headerlink" title="æ¿€æ´»ç¯å¢ƒ"></a>æ¿€æ´»ç¯å¢ƒ</h3><p>é…ç½®æ–‡ä»¶æ¿€æ´»</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.profiles.active</span>=<span class="string">prod</span></span><br></pre></td></tr></table></figure><p>å‘½ä»¤è¡Œæ¿€æ´»</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">java -jar xxx.jar --spring.profiles.active=prod</span><br></pre></td></tr></table></figure><p>æ³¨æ„:</p><ul><li>ä¸æ ‡æ³¨<code>@Profile</code>çš„ç»„ä»¶æ— è®ºæ˜¯åœ¨å“ªä¸ªç¯å¢ƒä¸­éƒ½ä¼šæ¿€æ´»</li><li>å­˜åœ¨é»˜è®¤ç¯å¢ƒ<code>@Profile(&#123;&quot;default&quot;&#125;)</code>,éœ€è¦æ¿€æ´»é»˜è®¤ç¯å¢ƒæ‰æœ‰æ•ˆ</li><li>ä¹Ÿå¯ä»¥è®¾ç½®é»˜è®¤æ¿€æ´»çš„ç¯å¢ƒ, <code>spring.profiles.default=dev</code></li><li>æ¨èä½¿ç”¨æ¿€æ´»æ–¹å¼æ¿€æ´»æŒ‡å®šç¯å¢ƒ</li></ul><h3 id="ç¯å¢ƒåŒ…å«"><a href="#ç¯å¢ƒåŒ…å«" class="headerlink" title="ç¯å¢ƒåŒ…å«"></a>ç¯å¢ƒåŒ…å«</h3><p>åœ¨é…ç½®æ–‡ä»¶(å¿…é¡»æ˜¯åœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­)ä¸­è®¾ç½®:</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.profiles.include[0]</span>=<span class="string">dev</span></span><br><span class="line"><span class="attr">spring.profiles.include[1]</span>=<span class="string">test</span></span><br><span class="line"><span class="attr">æˆ–è€…</span>:<span class="string"></span></span><br><span class="line"><span class="attr">spring.profiles.include</span>=<span class="string">dev,test</span></span><br></pre></td></tr></table></figure><h4 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h4><p><strong>ç”Ÿæ•ˆçš„ç¯å¢ƒ &#x3D; æ¿€æ´»çš„ç¯å¢ƒ&#x2F;é»˜è®¤ç¯å¢ƒ + åŒ…å«çš„ç¯å¢ƒ</strong></p><p>é¡¹ç›®ä¸­:</p><ul><li>åŸºç¡€çš„é…ç½®<code>mybatis</code>,<code>log</code>,â€¦ï¼šå†™åˆ°<strong>åŒ…å«ç¯å¢ƒ</strong>ä¸­</li><li>è¦åŠ¨æ€åˆ‡æ¢å˜åŒ–çš„<code>db</code>, <code>redis</code>,â€¦ï¼šå†™åˆ°<strong>æ¿€æ´»çš„ç¯å¢ƒ</strong>ä¸­</li></ul><h4 id="Profile-åˆ†ç»„"><a href="#Profile-åˆ†ç»„" class="headerlink" title="Profile åˆ†ç»„"></a>Profile åˆ†ç»„</h4><p>åˆ›å»ºprodç»„ï¼ŒæŒ‡å®šåŒ…å«dbå’Œmqé…ç½®</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.profiles.group.prod[0]</span>=<span class="string">db</span></span><br><span class="line"><span class="attr">spring.profiles.group.prod[1]</span>=<span class="string">mq</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>--spring.profiles.active=prod</code>, å°±ä¼šæ¿€æ´»prod, å°±ä¼šä½¿ç”¨db, mqé…ç½®æ–‡ä»¶</p><h4 id="Profile-é…ç½®æ–‡ä»¶"><a href="#Profile-é…ç½®æ–‡ä»¶" class="headerlink" title="Profile é…ç½®æ–‡ä»¶"></a>Profile é…ç½®æ–‡ä»¶</h4><ul><li><code>application-&#123;profile&#125;.properties</code>å¯ä»¥ä½œä¸ºæŒ‡å®šç¯å¢ƒçš„é…ç½®æ–‡ä»¶</li><li>æ¿€æ´»è¿™ä¸ªç¯å¢ƒï¼Œé…ç½®å°±ä¼šç”Ÿæ•ˆã€‚æœ€ç»ˆç”Ÿæ•ˆçš„æ‰€æœ‰é…ç½®æ˜¯<ul><li><code>application.properties</code>ï¼šä¸»é…ç½®æ–‡ä»¶ï¼Œä»»æ„æ—¶å€™éƒ½ç”Ÿæ•ˆ</li><li><code>application-&#123;profile&#125;.properties</code>ï¼šæŒ‡å®šç¯å¢ƒé…ç½®æ–‡ä»¶ï¼Œæ¿€æ´»æŒ‡å®šç¯å¢ƒç”Ÿæ•ˆ</li></ul></li></ul><p>profileä¼˜å…ˆçº§ &gt; application</p><h2 id="å¤–ç½®é…ç½®æ–‡ä»¶"><a href="#å¤–ç½®é…ç½®æ–‡ä»¶" class="headerlink" title="å¤–ç½®é…ç½®æ–‡ä»¶"></a>å¤–ç½®é…ç½®æ–‡ä»¶</h2><blockquote><p>åœºæ™¯ï¼šçº¿ä¸Šåº”ç”¨å¦‚ä½•å¿«é€Ÿä¿®æ”¹é…ç½®ï¼Œå¹¶åº”ç”¨æœ€æ–°é…ç½®ï¼Ÿ</p><ul><li>SpringBoot ä½¿ç”¨  <strong>é…ç½®ä¼˜å…ˆçº§</strong> + <strong>å¤–éƒ¨é…ç½®</strong>  ç®€åŒ–é…ç½®æ›´æ–°ã€ç®€åŒ–è¿ç»´ã€‚</li><li>åªéœ€è¦ç»™jaråº”ç”¨æ‰€åœ¨çš„æ–‡ä»¶å¤¹æ”¾ä¸€ä¸ª<code>application.properties</code>æœ€æ–°é…ç½®æ–‡ä»¶ï¼Œé‡å¯é¡¹ç›®å°±èƒ½è‡ªåŠ¨åº”ç”¨æœ€æ–°é…ç½®</li></ul></blockquote><p>SpringBootå…è®¸å°†é…ç½®å¤–éƒ¨åŒ–, ä»¥ä¾¿å¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒä¸­ä½¿ç”¨ç›¸åŒçš„åº”ç”¨ç¨‹åºä»£ç .<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å„ç§<strong>å¤–éƒ¨é…ç½®æº</strong>, åŒ…æ‹¬<strong>Java Propertiesæ–‡ä»¶</strong>ã€<strong>YAMLæ–‡ä»¶</strong>ã€<strong>ç¯å¢ƒå˜é‡</strong>å’Œ<strong>å‘½ä»¤è¡Œå‚æ•°</strong>ã€‚</p><p><code>@Value</code>å¯ä»¥è·å–å€¼, ä¹Ÿå¯ä»¥ç”¨<code>@ConfigurationProperties</code>å°†æ‰€æœ‰å±æ€§<strong>ç»‘å®š</strong>åˆ°java objectä¸­</p><h3 id="é…ç½®ä¼˜å…ˆçº§"><a href="#é…ç½®ä¼˜å…ˆçº§" class="headerlink" title="é…ç½®ä¼˜å…ˆçº§"></a>é…ç½®ä¼˜å…ˆçº§</h3><p>ä»¥ä¸‹æ˜¯SpringBootå±æ€§æºåŠ è½½é¡ºåºã€‚<strong>ç”±ä½åˆ°é«˜ï¼Œé«˜ä¼˜å…ˆçº§é…ç½®è¦†ç›–ä½ä¼˜å…ˆçº§</strong></p><ol><li><strong>é»˜è®¤å±æ€§</strong>ï¼ˆé€šè¿‡<code>SpringApplication.setDefaultProperties</code>æŒ‡å®šçš„ï¼‰</li><li><code>@PropertySource</code>æŒ‡å®šåŠ è½½çš„é…ç½®ï¼ˆéœ€è¦å†™åœ¨<code>@Configuration</code>ç±»ä¸Šæ‰å¯ç”Ÿæ•ˆï¼‰</li><li>é…ç½®æ–‡ä»¶ï¼ˆapplication.properties&#x2F;ymlç­‰ï¼‰</li><li><code>RandomValuePropertySource</code>æ”¯æŒçš„<code>random.*</code>é…ç½®ï¼ˆå¦‚ï¼š<code>@Value(&quot;$&#123;random.int&#125;&quot;)</code>ï¼‰</li><li>OS ç¯å¢ƒå˜é‡</li><li>Java ç³»ç»Ÿå±æ€§ï¼ˆSystem.getProperties()ï¼‰</li><li>JNDI å±æ€§ï¼ˆæ¥è‡ªjava:comp&#x2F;envï¼‰</li><li>ServletContext åˆå§‹åŒ–å‚æ•°</li><li>ServletConfig åˆå§‹åŒ–å‚æ•°</li><li>SPRING_APPLICATION_JSONå±æ€§ï¼ˆå†…ç½®åœ¨ç¯å¢ƒå˜é‡æˆ–ç³»ç»Ÿå±æ€§ä¸­çš„ JSONï¼‰</li><li><strong>å‘½ä»¤è¡Œå‚æ•°</strong></li><li>æµ‹è¯•å±æ€§ã€‚(@SpringBootTestè¿›è¡Œæµ‹è¯•æ—¶æŒ‡å®šçš„å±æ€§)</li><li>æµ‹è¯•ç±»@TestPropertySourceæ³¨è§£</li><li>Devtools è®¾ç½®çš„å…¨å±€å±æ€§ã€‚($HOME&#x2F;.config&#x2F;spring-boot)</li></ol><p>å°ç»“ä¸€ä¸‹:<br>å¸¸è§çš„ä¼˜å…ˆçº§é¡ºåºï¼š<br>å‘½ä»¤è¡Œ&gt; é…ç½®æ–‡ä»¶&gt; springapplicationé…ç½®</p><p><strong>é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§å¦‚ä¸‹</strong>ï¼š(åé¢è¦†ç›–å‰é¢)</p><ol><li>jar åŒ…å†…çš„application.properties&#x2F;yml</li><li>jar åŒ…å†…çš„application-{profile}.properties&#x2F;yml</li><li>jar åŒ…å¤–çš„application.properties&#x2F;yml</li><li>jar åŒ…å¤–çš„application-{profile}.properties&#x2F;yml</li></ol><blockquote><p>å»ºè®®ï¼šç”¨ä¸€ç§æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚å¦‚æœ.propertieså’Œ.ymlåŒæ—¶å­˜åœ¨,åˆ™.propertiesä¼˜å…ˆ</p></blockquote><p>å°ç»“ä¸€ä¸‹:</p><ul><li>åŒ…å¤– &gt; åŒ…å†…</li><li>åŒçº§æƒ…å†µï¼šprofileé…ç½® &gt; applicationé…ç½®</li></ul><p>æ‰€æœ‰å‚æ•°å‡å¯ç”±å‘½ä»¤è¡Œä¼ å…¥ï¼Œä½¿ç”¨<code>--å‚æ•°é¡¹=å‚æ•°å€¼</code>ï¼Œå°†ä¼šè¢«æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œå¹¶ä¼˜å…ˆäºé…ç½®æ–‡ä»¶<br>æ¯”å¦‚<code>java -jar app.jar --name=&quot;Spring&quot;</code>,å¯ä»¥ä½¿ç”¨<code>@Value(&quot;$&#123;name&#125;&quot;)</code>è·å–</p><p>æ¼”ç¤ºåœºæ™¯ï¼š</p><ul><li>åŒ…å†…ï¼š application.properties   server.port&#x3D;8000</li><li>åŒ…å†…ï¼š application-dev.properties    server.port&#x3D;9000</li><li>åŒ…å¤–ï¼š  application.properties   server.port&#x3D;8001</li><li>åŒ…å¤–ï¼š application-dev.properties    server.port&#x3D;9001</li></ul><p>å¯åŠ¨ç«¯å£: å‘½ä»¤è¡Œ &gt; 9001 &gt; 8001 &gt; 9000 &gt; 8000</p><h3 id="å¤–éƒ¨é…ç½®"><a href="#å¤–éƒ¨é…ç½®" class="headerlink" title="å¤–éƒ¨é…ç½®"></a>å¤–éƒ¨é…ç½®</h3><p>SpringBoot åº”ç”¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨å¯»æ‰¾<strong>application.properties</strong>å’Œ<strong>application.yaml</strong>ä½ç½®è¿›è¡ŒåŠ è½½.<br>é¡ºåºå¦‚ä¸‹ï¼šï¼ˆåé¢è¦†ç›–å‰é¢ï¼‰</p><ul><li>ç±»è·¯å¾„: å†…éƒ¨<ul><li>ç±»æ ¹è·¯å¾„</li><li>ç±»ä¸‹<code>/config</code>åŒ…</li></ul></li><li>å½“å‰è·¯å¾„ï¼ˆé¡¹ç›®æ‰€åœ¨çš„ä½ç½®ï¼‰<ul><li>å½“å‰è·¯å¾„</li><li>å½“å‰ä¸‹<code>/config</code>å­ç›®å½•</li><li><code>/config</code>ç›®å½•çš„ç›´æ¥å­ç›®å½•</li></ul></li></ul><p>æœ€ç»ˆæ•ˆæœï¼šä¼˜å…ˆçº§ç”±é«˜åˆ°ä½ï¼Œå‰é¢è¦†ç›–åé¢</p><ul><li>å‘½ä»¤è¡Œ &gt; åŒ…å¤–configç›´æ¥å­ç›®å½• &gt; åŒ…å¤–configç›®å½• &gt; åŒ…å¤–æ ¹ç›®å½• &gt; åŒ…å†…ç›®å½•</li><li>åŒçº§æ¯”è¾ƒï¼š<ul><li>profileé…ç½® &gt; é»˜è®¤é…ç½®</li><li>propertiesé…ç½® &gt; yamlé…ç½®</li></ul></li></ul><img alt="é…ç½®ä¼˜å…ˆçº§" src="https://image.fu-jw.com/img/2023/07/06/64a67fc67db26.png"/><p>è§„å¾‹ï¼šæœ€å¤–å±‚çš„æœ€ä¼˜å…ˆ</p><ul><li>å‘½ä»¤è¡Œ &gt; æ‰€æœ‰</li><li>åŒ…å¤– &gt; åŒ…å†…</li><li>configç›®å½• &gt; æ ¹ç›®å½•</li><li>profile &gt; application</li></ul><p>é…ç½®ä¸åŒå°±éƒ½ç”Ÿæ•ˆï¼ˆäº’è¡¥ï¼‰ï¼Œé…ç½®ç›¸åŒé«˜ä¼˜å…ˆçº§è¦†ç›–ä½ä¼˜å…ˆçº§</p><h3 id="å¯¼å…¥é…ç½®"><a href="#å¯¼å…¥é…ç½®" class="headerlink" title="å¯¼å…¥é…ç½®"></a>å¯¼å…¥é…ç½®</h3><p>ä½¿ç”¨<code>spring.config.import</code>å¯ä»¥å¯¼å…¥é¢å¤–é…ç½®</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.config.import</span>=<span class="string">my.properties</span></span><br><span class="line"><span class="attr">my.property</span>=<span class="string">value</span></span><br></pre></td></tr></table></figure><p>æ— è®ºä»¥ä¸Šå†™æ³•çš„å…ˆåé¡ºåº, <strong>my.properties</strong>çš„å€¼æ€»æ˜¯ä¼˜å…ˆäºç›´æ¥åœ¨æ–‡ä»¶ä¸­ç¼–å†™çš„<strong>my.property</strong></p><h3 id="å±æ€§å ä½ç¬¦"><a href="#å±æ€§å ä½ç¬¦" class="headerlink" title="å±æ€§å ä½ç¬¦"></a>å±æ€§å ä½ç¬¦</h3><p>é…ç½®æ–‡ä»¶ä¸­å¯ä»¥ä½¿ç”¨<code>$&#123;name:default&#125;</code>å½¢å¼å–å‡ºä¹‹å‰é…ç½®è¿‡çš„å€¼</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">app.name</span>=<span class="string">MyApp</span></span><br><span class="line"><span class="attr">app.description</span>=<span class="string">$&#123;app.name&#125; is a Spring Boot application written by $&#123;username:Unknown&#125;</span></span><br></pre></td></tr></table></figure><h2 id="æ—¥å¿—"><a href="#æ—¥å¿—" class="headerlink" title="æ—¥å¿—"></a>æ—¥å¿—</h2><p>è¯¦ç»†å¯å‚è€ƒ<a href="https://blog.fu-jw.com/posts/4275e528.html">SpringBootæ—¥å¿—</a></p><h2 id="å•å…ƒæµ‹è¯•-JUnit5"><a href="#å•å…ƒæµ‹è¯•-JUnit5" class="headerlink" title="å•å…ƒæµ‹è¯•-JUnit5"></a>å•å…ƒæµ‹è¯•-JUnit5</h2><p>è¯¦ç»†å¯å‚è€ƒ<a href="http://localhost:4000/posts/6d37548c.html">SpringBootå•å…ƒæµ‹è¯•</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ğŸ¤–ğŸ¤–-æ‘˜è¦:&lt;br&gt;æœ¬æ–‡ä»‹ç»äº†SpringBootçš„æ ¸å¿ƒç‰¹æ€§ï¼ŒåŒ…æ‹¬SpringApplicationçš„ä½¿ç”¨ï¼Œå¦‚ä½•é€šè¿‡é…ç½®æ–‡ä»¶å’Œä»£ç è¿›è¡Œè‡ªå®šä¹‰è®¾ç½®ï¼Œä»¥åŠå¯åŠ¨å¤±è´¥æ—¶çš„å¤„ç†æ–¹å¼ã€‚æ–‡ä¸­è¿˜è¯¦è¿°äº†å¦‚ä½•å®ç°é…ç½®æ–‡ä»¶çš„éš”ç¦»å’Œå¤–ç½®ï¼Œè§£é‡Šäº†å±æ€§å ä½ç¬¦çš„ç”¨é€”ï¼Œä»¥åŠé…</summary>
      
    
    
    
    <category term="å­¦ä¹ " scheme="http://fu-jw.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="SpringBoot" scheme="http://fu-jw.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot Webå¼€å‘1-è‡ªåŠ¨é…ç½®åŸç†æµ…æ</title>
    <link href="http://fu-jw.com/posts/d5a9e6d8.html"/>
    <id>http://fu-jw.com/posts/d5a9e6d8.html</id>
    <published>2023-07-01T00:00:00.000Z</published>
    <updated>2023-07-09T11:25:56.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ¤–ğŸ¤–-æ‘˜è¦:<br>æœ¬æ–‡ä»‹ç»äº†SpringBoot Webå¼€å‘è‡ªåŠ¨é…ç½®åŸç†ï¼ŒåŒ…æ‹¬webåœºæ™¯å¯åŠ¨å™¨çš„ä½¿ç”¨å’Œè‡ªåŠ¨è£…é…åŠŸèƒ½ï¼Œåœ¨webåœºæ™¯ä¸­æ·»åŠ ç‰¹æ€§å¦‚è§†å›¾è§£æï¼Œé™æ€èµ„æºå¤„ç†ï¼Œæ•°æ®ç±»å‹è½¬æ¢ç­‰ã€‚è¿˜æœ‰è‡ªå®šä¹‰é™æ€èµ„æºçš„ä¸¤ç§æ–¹å¼ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶æˆ–ä»£ç ã€‚</p></blockquote><h1 id="SpringBoot-Webå¼€å‘1-è‡ªåŠ¨é…ç½®åŸç†æµ…æ"><a href="#SpringBoot-Webå¼€å‘1-è‡ªåŠ¨é…ç½®åŸç†æµ…æ" class="headerlink" title="SpringBoot Webå¼€å‘1-è‡ªåŠ¨é…ç½®åŸç†æµ…æ"></a>SpringBoot Webå¼€å‘1-è‡ªåŠ¨é…ç½®åŸç†æµ…æ</h1><blockquote><p>æˆ‘çš„<a href="https://github.com/fu-jw/spring-tutorial">SpringBooté¡¹ç›®</a>ç¬¬å››ä¸ªæ¨¡å—</p></blockquote><p>ç”±å‰é¢<a href="https://blog.fu-jw.com/posts/4ccc97e8.html">SpringBootå¿«é€Ÿå…¥é—¨</a>åˆ†æå¯çŸ¥,SpringBootæå‡ºåœºæ™¯å¯åŠ¨å™¨çš„æ¦‚å¿µ,<br>å°†åœºæ™¯ä¸­éœ€è¦çš„æ‰€æœ‰ä¾èµ–å›Šæ‹¬è¿›æ¥,å¹¶è‡ªåŠ¨è£…é…,ç®€åŒ–é…ç½®.<br>åœºæ™¯ä¸€å¼•å…¥,é…ç½®å³å®Œæˆ</p><p>webå¼€å‘åŒæ ·éœ€è¦<strong>webåœºæ™¯å¯åŠ¨å™¨</strong></p><h2 id="å¼•å…¥webåœºæ™¯å¯åŠ¨å™¨"><a href="#å¼•å…¥webåœºæ™¯å¯åŠ¨å™¨" class="headerlink" title="å¼•å…¥webåœºæ™¯å¯åŠ¨å™¨"></a>å¼•å…¥webåœºæ™¯å¯åŠ¨å™¨</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>spring-boot-starter-web</code>ä¾èµ–<strong>æ ¸å¿ƒåœºæ™¯å¯åŠ¨å™¨:</strong><code>spring-boot-starter</code><br><code>spring-boot-starter</code>ä¾èµ–:<code>spring-boot-autoconfigure</code><br><code>spring-boot-autoconfigure</code>ä¼šåŠ è½½:META-INF&#x2F;spring&#x2F;org.springframework.boot.autoconfigure.AutoConfiguration.imports<br>ä¸­çš„è‡ªåŠ¨é…ç½®ç±»<br>å…¶ä¸­webç›¸å…³æœ‰å¦‚ä¸‹:</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.embedded.EmbeddedWebServerFactoryCustomizerAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.DispatcherServletAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.ServletWebServerFactoryAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.MultipartAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration</span><br><span class="line">------------------------------ä»¥ä¸‹æ˜¯å“åº”å¼ç¼–ç¨‹ç›¸å…³--------------------------------------</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.HttpHandlerAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.ReactiveMultipartAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.ReactiveWebServerFactoryAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.WebSessionIdResolverAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.function.client.ClientHttpConnectorAutoConfiguration</span><br><span class="line">org.springframework.boot.autoconfigure.web.reactive.function.client.WebClientAutoConfiguration</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„è‡ªåŠ¨é…ç½®ç±»ä¼šç»‘å®šçš„é…ç½®æœ‰:</p><ul><li><code>server</code> &#x3D;&#x3D;&gt;æœåŠ¡å™¨ç›¸å…³</li><li><code>spring.mvc</code> &#x3D;&#x3D;&gt;springMVCç›¸å…³</li><li><code>server.servlet.encoding</code> &#x3D;&#x3D;&gt;servletç¼–ç ç›¸å…³</li><li><code>spring.servlet.multipart</code> &#x3D;&#x3D;&gt;servletæ–‡ä»¶å¤„ç†ç›¸å…³</li></ul><p>SpringBoot çš„è‡ªåŠ¨è£…é…åŠŸèƒ½åœ¨<code>webåœºæ™¯</code>ä¸­æ·»åŠ äº†å¦‚ä¸‹ç‰¹æ€§:</p><p><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/web.html#web.servlet.spring-mvc">å®˜ç½‘ä»‹ç»</a>:</p><blockquote><ol><li>Inclusion of ContentNegotiatingViewResolver and BeanNameViewResolver beans.</li><li>Support for serving static resources, including support for WebJars (covered later in this document).</li><li>Automatic registration of Converter, GenericConverter, and Formatter beans.</li><li>Support for HttpMessageConverters (covered later in this document).</li><li>Automatic registration of MessageCodesResolver (covered later in this document).</li><li>Static index.html support.</li><li>Automatic use of a ConfigurableWebBindingInitializer bean (covered later in this document).</li></ol><p>If you want to keep those Spring Boot MVC customizations and make more<br>MVC customizations (interceptors, formatters, view controllers, and other features),<br>you can add your own @Configuration class of type WebMvcConfigurer but without @EnableWebMvc.</p><p>If you want to provide custom instances of RequestMappingHandlerMapping,<br>RequestMappingHandlerAdapter, or ExceptionHandlerExceptionResolver,<br>and still keep the Spring Boot MVC customizations, you can declare a bean of<br>type WebMvcRegistrations and use it to provide custom instances of those components.</p><p>If you want to take complete control of Spring MVC,<br>you can add your own @Configuration annotated with @EnableWebMvc,<br>or alternatively add your own @Configuration-annotated DelegatingWebMvcConfiguration<br>as described in the Javadoc of @EnableWebMvc</p></blockquote><p><code>webåœºæ™¯</code>å¼•å…¥å,å°±æœ‰äº†å¦‚ä¸‹åŠŸèƒ½:</p><ol><li>åŒ…å«<code>ContentNegotiatingViewResolver</code>å’Œ<code>BeanNameViewResolver</code>ç»„ä»¶,æ–¹ä¾¿è§†å›¾è§£æ</li><li>é»˜è®¤çš„é™æ€èµ„æºå¤„ç†æœºåˆ¶: é™æ€èµ„æºæ”¾åœ¨<strong>static</strong>æ–‡ä»¶å¤¹ä¸‹å³å¯ç›´æ¥è®¿é—®</li><li>è‡ªåŠ¨æ³¨å†Œäº†<code>Converter</code>,<code>GenericConverter</code>,<code>Formatter</code>ç»„ä»¶,é€‚é…å¸¸è§<strong>æ•°æ®ç±»å‹è½¬æ¢</strong>å’Œ<strong>æ ¼å¼åŒ–</strong>éœ€æ±‚</li><li>æ”¯æŒ<code>HttpMessageConverters</code>,å¯ä»¥æ–¹ä¾¿è¿”å›jsonç­‰æ•°æ®ç±»å‹</li><li>è‡ªåŠ¨æ³¨å†Œ<code>MessageCodesResolver</code>,æ–¹ä¾¿<strong>å›½é™…åŒ–</strong>åŠé”™è¯¯æ¶ˆæ¯å¤„ç†</li><li>æ”¯æŒé™æ€ index.html</li><li>è‡ªåŠ¨ä½¿ç”¨<code>ConfigurableWebBindingInitializer</code>,å®ç°<strong>æ¶ˆæ¯å¤„ç†</strong>,<strong>æ•°æ®ç»‘å®š</strong>,<strong>ç±»å‹è½¬åŒ–</strong>,<strong>æ•°æ®æ ¡éªŒ</strong>ç­‰åŠŸèƒ½</li></ol><p>æ³¨æ„:</p><ul><li>å¦‚æœæƒ³ä¿æŒ SpringBoot MVC çš„é»˜è®¤é…ç½®,å¹¶ä¸”è‡ªå®šä¹‰æ›´å¤šçš„ MVC é…ç½®,å¦‚:<code>interceptors</code>,<code>formatters</code>,<code>view controllers</code><br>ç­‰.å¯ä»¥ä½¿ç”¨<code>@Configuration</code>æ³¨è§£æ·»åŠ ä¸€ä¸ª<strong>WebMvcConfigurer</strong>ç±»å‹çš„é…ç½®ç±»,ä½†ä¸è¦æ ‡æ³¨<code>@EnableWebMvc</code></li><li>å¦‚æœæƒ³ä¿æŒ SpringBoot MVC<br>çš„é»˜è®¤é…ç½®,ä½†è¦è‡ªå®šä¹‰æ ¸å¿ƒç»„ä»¶å®ä¾‹,æ¯”å¦‚:<code>RequestMappingHandlerMapping</code>,<code>RequestMappingHandlerAdapter</code><br>,æˆ–<code>ExceptionHandlerExceptionResolver</code>,ç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª<code>WebMvcRegistrations</code>ç»„ä»¶å³å¯</li><li>å¦‚æœæƒ³å…¨é¢æ¥ç®¡ Spring MVC,<code>@Configuration</code>æ ‡æ³¨ä¸€ä¸ªé…ç½®ç±»,å¹¶åŠ ä¸Š<code>@EnableWebMvc</code>æ³¨è§£,å®ç°<strong>WebMvcConfigurer</strong>æ¥å£</li></ul><p>æ¥ä¸‹æ¥åˆ†åˆ«å±•å¼€åˆ†æ.</p><h2 id="è‡ªåŠ¨é…ç½®åŸç†æµ…æ"><a href="#è‡ªåŠ¨é…ç½®åŸç†æµ…æ" class="headerlink" title="è‡ªåŠ¨é…ç½®åŸç†æµ…æ"></a>è‡ªåŠ¨é…ç½®åŸç†æµ…æ</h2><p>ç”±å‰é¢çŸ¥é“å¼•å…¥<code>webåœºæ™¯</code>ä¼šåŠ è½½è‡ªåŠ¨é…ç½®ç±»:<code>WebMvcAutoConfiguration</code></p><p>ä¸‹é¢ç®€è¦åˆ†æ<code>WebMvcAutoConfiguration</code>åŸç†</p><h3 id="ç”Ÿæ•ˆæ¡ä»¶"><a href="#ç”Ÿæ•ˆæ¡ä»¶" class="headerlink" title="ç”Ÿæ•ˆæ¡ä»¶"></a>ç”Ÿæ•ˆæ¡ä»¶</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@AutoConfiguration(after = &#123;DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class,</span></span><br><span class="line"><span class="meta">        ValidationAutoConfiguration.class&#125;)</span> <span class="comment">// éœ€è¦åœ¨è¿™ä¸‰ä¸ªè‡ªåŠ¨é…ç½®ä¹‹å</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span> <span class="comment">// //éœ€è¦æ˜¯æ™®é€šçš„SERVLETç±»å‹çš„ webåº”ç”¨å°±ç”Ÿæ•ˆ,REACTIVEç±»å‹çš„å“åº”å¼webæ˜¯å¦ä¸€å¥—</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123;Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class&#125;)</span> <span class="comment">// éœ€è¦åŒ…æ‹¬è¿™ä¸‰ä¸ªç±»</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span> <span class="comment">// éœ€è¦å®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªbean</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span> <span class="comment">// ä¼˜å…ˆçº§</span></span><br><span class="line"><span class="meta">@ImportRuntimeHints(WebResourcesRuntimeHints.class)</span></span><br><span class="line"><span class="comment">// é¡¹ç›®å¯åŠ¨å°±æ³¨å†Œçš„é™æ€èµ„æº:&quot;META-INF/resources/&quot;,&quot;resources/&quot;,&quot;static/&quot;,&quot;public/&quot;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebMvcAutoConfiguration</span> &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”Ÿæ•ˆå, åœ¨å®¹å™¨ä¸­æ”¾å…¥ä¸¤ä¸ªbean:</p><h3 id="HiddenHttpMethodFilter-è¿‡æ»¤é¡µé¢è¡¨å•æäº¤çš„Restè¯·æ±‚"><a href="#HiddenHttpMethodFilter-è¿‡æ»¤é¡µé¢è¡¨å•æäº¤çš„Restè¯·æ±‚" class="headerlink" title="HiddenHttpMethodFilter: è¿‡æ»¤é¡µé¢è¡¨å•æäº¤çš„Restè¯·æ±‚"></a><code>HiddenHttpMethodFilter</code>: è¿‡æ»¤é¡µé¢è¡¨å•æäº¤çš„Restè¯·æ±‚</h3><blockquote><ul><li>Rest è¯·æ±‚æœ‰: <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code>, <code>PATCH</code></li><li>è¯·æ±‚æ•°æ®åŒ…å«ä¸‰éƒ¨åˆ†: <strong>è¯·æ±‚è¡Œ</strong>, <strong>è¯·æ±‚å¤´</strong>, <strong>è¯·æ±‚ä½“</strong></li><li>æµè§ˆå™¨åªèƒ½å‘é€<code>GET</code>è¯·æ±‚å’Œ<code>POST</code>è¯·æ±‚</li><li><code>GET</code>è¯·æ±‚æ²¡æœ‰<strong>è¯·æ±‚ä½“</strong>, å‚æ•°åœ¨<strong>è¯·æ±‚è¡Œ</strong>ä¸­,è·å–å‚æ•°çš„æ–¹æ³•æ˜¯<code>getQueryString()</code></li><li><code>POST</code>è¯·æ±‚çš„å‚æ•°åœ¨<strong>è¯·æ±‚ä½“</strong>ä¸­, è·å–æ–¹æ³•æ˜¯<code>getReader()</code>æˆ–<code>getInputStream()</code></li><li>getMethod() è·å–å…·ä½“å“ªç§è¯·æ±‚æ–¹å¼</li></ul></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯¥æ–¹æ³•å°†æµè§ˆå™¨ä¸æ”¯æŒçš„è¯·æ±‚,è½¬æ¢æˆæ ‡å‡†çš„HTTPæ–¹æ³•:</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * å°†å‘å‡ºè¯·æ±‚çš„æ–¹æ³•å‚æ•°è½¬æ¢ä¸º HTTP æ–¹æ³•ï¼Œå¯é€šè¿‡ HttpServletRequest.getMethod() æ£€ç´¢ã€‚</span></span><br><span class="line"><span class="comment"> * ç”±äºæµè§ˆå™¨ç›®å‰ä»…æ”¯æŒGETå’ŒPOSTï¼Œé€šå¸¸æ˜¯ä½¿ç”¨å¸¦æœ‰é™„åŠ éšè—è¡¨å•å­—æ®µï¼ˆ_methodï¼‰çš„æ™®é€šPOSTæ¥ä¼ é€’â€œçœŸæ­£çš„â€HTTPæ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment"> * ä¾‹å¦‚:&lt;form action=&quot;...&quot; method=&quot;post&quot;&gt;</span></span><br><span class="line"><span class="comment"> *       &lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;put&quot; /&gt;</span></span><br><span class="line"><span class="comment"> *       ......</span></span><br><span class="line"><span class="comment"> *     &lt;/form&gt;</span></span><br><span class="line"><span class="comment"> * æ­¤è¿‡æ»¤å™¨è¯»å–è¯¥å‚æ•°å¹¶ç›¸åº”åœ°æ›´æ”¹ HttpServletRequestWrapper.getMethodï¼ˆï¼‰ è¿”å›å€¼ã€‚</span></span><br><span class="line"><span class="comment"> * åªå…è®¸ä½¿ç”¨â€œPUTâ€ã€â€œDELETEâ€å’Œâ€œPATCHâ€ HTTPæ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚å‚æ•°çš„åç§°é»˜è®¤ä¸º _methodï¼Œä½†å¯ä»¥é€šè¿‡ methodParam å±æ€§è¿›è¡Œè°ƒæ•´ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * æ³¨æ„ï¼šåœ¨å¤§éƒ¨åˆ† POST è¯·æ±‚çš„æƒ…å†µä¸‹ï¼Œæ­¤è¿‡æ»¤å™¨éœ€è¦åœ¨ MultipartFilter å¤„ç†åè¿è¡Œï¼Œå› ä¸ºå®ƒæœ¬æ¥å°±éœ€è¦æ£€æŸ¥ POST æ­£æ–‡å‚æ•°ã€‚</span></span><br><span class="line"><span class="comment"> * æ‰€ä»¥é€šå¸¸ï¼Œåœ¨ä½ çš„web.xmlè¿‡æ»¤å™¨é“¾ä¸­ï¼Œåœ¨éšè—çš„HttpMethodFilterä¹‹å‰æ”¾ç½®ä¸€ä¸ª </span></span><br><span class="line"><span class="comment"> * Spring org.springframework.web.multipart.support.MultipartFilterã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * å³åœ¨æ­¤è¿‡æ»¤ä¹‹å‰ä¼šæœ‰ä¸“é—¨å¤„ç† POST è¯·æ±‚çš„ MultipartFilter.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HiddenHttpMethodFilter</span> <span class="keyword">extends</span> <span class="title class_">OncePerRequestFilter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> List&lt;String&gt; ALLOWED_METHODS =</span><br><span class="line">            List.of(HttpMethod.PUT.name(), HttpMethod.DELETE.name(), HttpMethod.PATCH.name());</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doFilterInternal</span><span class="params">(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">requestToUse</span> <span class="operator">=</span> request;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;POST&quot;</span>.equals(request.getMethod()) &amp;&amp; request.getAttribute(WebUtils.ERROR_EXCEPTION_ATTRIBUTE) == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">paramValue</span> <span class="operator">=</span> request.getParameter(<span class="built_in">this</span>.methodParam);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.hasLength(paramValue)) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> paramValue.toUpperCase(Locale.ENGLISH);</span><br><span class="line">              <span class="keyword">if</span> (ALLOWED_METHODS.contains(method)) &#123;</span><br><span class="line">                requestToUse = <span class="keyword">new</span> <span class="title class_">HttpMethodRequestWrapper</span>(request, method);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      filterChain.doFilter(requestToUse, response);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="FormContentFilter-ç”¨äºåˆ†æè¡¨å•å†…å®¹-ä¸å‰é¢çš„è¿‡æ»¤å™¨é…åˆä½¿ç”¨"><a href="#FormContentFilter-ç”¨äºåˆ†æè¡¨å•å†…å®¹-ä¸å‰é¢çš„è¿‡æ»¤å™¨é…åˆä½¿ç”¨" class="headerlink" title="FormContentFilter:ç”¨äºåˆ†æè¡¨å•å†…å®¹, ä¸å‰é¢çš„è¿‡æ»¤å™¨é…åˆä½¿ç”¨,"></a><code>FormContentFilter</code>:ç”¨äºåˆ†æè¡¨å•å†…å®¹, ä¸å‰é¢çš„è¿‡æ»¤å™¨é…åˆä½¿ç”¨,</h3><p>åŒæ ·åªé’ˆå¯¹<code>PUT</code>,<code>PATCH</code>,<code>DELETE</code>ä¸‰ç§HTTPè¯·æ±‚</p><h3 id="é™æ€å†…éƒ¨ç±»WebMvcAutoConfigurationAdapter"><a href="#é™æ€å†…éƒ¨ç±»WebMvcAutoConfigurationAdapter" class="headerlink" title="é™æ€å†…éƒ¨ç±»WebMvcAutoConfigurationAdapter"></a>é™æ€å†…éƒ¨ç±»<code>WebMvcAutoConfigurationAdapter</code></h3><p>åœ¨<code>WebMvcAutoConfiguration</code>ä¸­æœ‰é™æ€å†…éƒ¨ç±»<code>WebMvcAutoConfigurationAdapter</code>æºç å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Defined as a nested config to ensure WebMvcConfigurer is not read when not on the classpath</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@Import(EnableWebMvcConfiguration.class)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123;WebMvcProperties.class, WebProperties.class&#125;)</span></span><br><span class="line"><span class="meta">@Order(0)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">WebMvcAutoConfigurationAdapter</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span>, ServletContextAware &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ¥å£WebMvcConfigurer"><a href="#æ¥å£WebMvcConfigurer" class="headerlink" title="æ¥å£WebMvcConfigurer"></a>æ¥å£<code>WebMvcConfigurer</code></h4><p><code>WebMvcAutoConfigurationAdapter</code>å®ç°äº†<code>WebMvcConfigurer</code>æ¥å£,å¯ä»¥é‡å†™ä¸€äº›æœ‰å…³Web MVCçš„é…ç½®æ–¹æ³•,æ¯”å¦‚æ·»åŠ æ‹¦æˆªå™¨ã€é…ç½®è§†å›¾è§£æå™¨ã€é…ç½®é™æ€èµ„æºç­‰.<br>é€šè¿‡é‡å†™è¿™äº›æ–¹æ³•,å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦å®šåˆ¶åŒ–Web MVCçš„è¡Œä¸º.å¯å®šåˆ¶åŠŸèƒ½æœ‰:</p><img src="https://image.fu-jw.com/img/2023/07/01/649f85725fe98.webp" alt="WebMvcConfigurer"/><ul><li>addArgumentResolvers:æ·»åŠ å‚æ•°è§£æå™¨</li><li>addCorsMappings:æ·»åŠ è·¨åŸŸæ˜ å°„</li><li>addFormatters:æ·»åŠ æ ¼å¼åŒ–å™¨</li><li>addInterceptors:æ·»åŠ æ‹¦æˆªå™¨</li><li>addResourceHandlers:æ·»åŠ èµ„æºå¤„ç†å™¨,å¤„ç†é™æ€èµ„æºè§„åˆ™</li><li>addReturnValueHandlers:æ·»åŠ è¿”å›å€¼å¤„ç†å™¨</li><li>addViewControllers:æ·»åŠ è§†å›¾æ§åˆ¶å™¨,æŒ‡å®šæŸä¸ªè¯·æ±‚è·¯å¾„è·³è½¬åˆ°æŒ‡å®šé¡µé¢</li><li>configureAsyncSupport:é…ç½®å¼‚æ­¥æ”¯æŒ</li><li>configureContentNegotiation:é…ç½®å†…å®¹åå•†</li><li>configureDefaultServletHandling:é…ç½®é»˜è®¤çš„å¤„ç†,é»˜è®¤æ¥æ”¶: &#x2F;</li><li>configureHandlerExceptionResolvers:é…ç½®å¼‚å¸¸è§£æå™¨</li><li>configureMessageConverters:é…ç½®æ¶ˆæ¯è½¬åŒ–å™¨</li><li>configurePathMatch:é…ç½®è·¯å¾„åŒ¹é…</li><li>configureViewResolvers:é…ç½®è§†å›¾è§£æå™¨</li><li>extendHandlerExceptionResolvers:æ‰©å±•å¤„ç†å¼‚å¸¸è§£æå™¨</li><li>extendMessageConvertersæ‰©å±•æ¶ˆæ¯è½¬æ¢å™¨</li><li>getMessageCodesResolver:è·å–æ¶ˆæ¯ç¼–ç è§£æå™¨</li><li>getValidator:è·å–æ ¡éªŒå™¨</li></ul><h4 id="é™æ€èµ„æºè§„åˆ™æºç æµ…æ"><a href="#é™æ€èµ„æºè§„åˆ™æºç æµ…æ" class="headerlink" title="é™æ€èµ„æºè§„åˆ™æºç æµ…æ"></a>é™æ€èµ„æºè§„åˆ™æºç æµ…æ</h4><p>ç”±ä¸Šé¢åˆ†æ,<code>addResourceHandlers</code>ç”¨æ¥å¤„ç†é™æ€èµ„æº,æºç :</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String SERVLET_LOCATION=<span class="string">&quot;/&quot;</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Add handlers to serve static resources such as images, js, and, css files from specific locations under web application root, the classpath,and others.</span></span><br><span class="line"><span class="comment"> * å³æ ¹æ®é…ç½®æƒ…å†µï¼Œæ·»åŠ ä¸åŒçš„é™æ€èµ„æºå¤„ç†å™¨ï¼Œç”¨äºå¤„ç†é™æ€èµ„æºçš„è®¿é—®è¯·æ±‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span>&#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯å¦éœ€è¦å¯ç”¨é»˜è®¤çš„èµ„æºå¤„ç†ã€‚</span></span><br><span class="line">  <span class="comment">// å¦‚æœä¸éœ€è¦å¯ç”¨ï¼Œé»˜è®¤èµ„æºå¤„ç†è¢«ç¦ç”¨ï¼ŒåŒæ—¶è¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼Œå¹¶ç›´æ¥è¿”å›</span></span><br><span class="line">  <span class="keyword">if</span>(!<span class="built_in">this</span>.resourceProperties.isAddMappings())&#123;</span><br><span class="line">      logger.debug(<span class="string">&quot;Default resource handling disabled&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">    <span class="comment">// éœ€è¦å¯ç”¨é»˜è®¤èµ„æºå¤„ç†,ä¸‹é¢æ·»åŠ ä¸¤ç§é™æ€èµ„æºå¤„ç†è§„åˆ™</span></span><br><span class="line">    <span class="comment">// private String webjarsPathPattern = &quot;/webjars/**&quot;;        </span></span><br><span class="line">    <span class="comment">// è®¿é—®è·¯å¾„:/webjars/**, å°±å»è·¯å¾„:classpath:/META-INF/resources/webjars/ ä¸‹é¢æ‰¾å¯¹åº”èµ„æº</span></span><br><span class="line">    addResourceHandler(registry,<span class="built_in">this</span>.mvcProperties.getWebjarsPathPattern(),</span><br><span class="line">    <span class="string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>);</span><br><span class="line">    <span class="comment">// private String staticPathPattern = &quot;/**&quot;;</span></span><br><span class="line">    <span class="comment">// private String[] staticLocations = </span></span><br><span class="line">    <span class="comment">// &quot;classpath:/META-INF/resources/&quot;,&quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot;</span></span><br><span class="line">    addResourceHandler(registry,<span class="built_in">this</span>.mvcProperties.getStaticPathPattern(),(registration)-&gt;&#123;</span><br><span class="line">    registration.addResourceLocations(<span class="built_in">this</span>.resourceProperties.getStaticLocations());</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">this</span>.servletContext!=<span class="literal">null</span>)&#123;</span><br><span class="line">       ServletContextResource resource=<span class="keyword">new</span> <span class="title class_">ServletContextResource</span>(<span class="built_in">this</span>.servletContext,SERVLET_LOCATION);</span><br><span class="line">       registration.addResourceLocations(resource);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‘èµ„æºå¤„ç†å™¨æ³¨å†Œè¡¨ä¸­æ·»åŠ èµ„æºå¤„ç†å™¨,å¹¶æ ¹æ®é…ç½®æ–‡ä»¶å’Œè‡ªå®šä¹‰å‡½æ•°è®¾ç½®èµ„æºå¤„ç†å™¨çš„å±æ€§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addResourceHandler</span><span class="params">(ResourceHandlerRegistry registry,String pattern,Consumer&lt;ResourceHandlerRegistration&gt; customizer)</span>&#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦å·²ç»å­˜åœ¨äº†æŒ‡å®šçš„pattern</span></span><br><span class="line">    <span class="keyword">if</span>(registry.hasMappingForPattern(pattern))&#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªèµ„æºå¤„ç†å™¨æ³¨å†Œï¼ˆResourceHandlerRegistrationï¼‰å¯¹è±¡</span></span><br><span class="line">    ResourceHandlerRegistration registration=registry.addResourceHandler(pattern);</span><br><span class="line">    <span class="comment">// å°†åˆšæ‰åˆ›å»ºçš„èµ„æºå¤„ç†å™¨æ³¨å†Œå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œç”¨äºè‡ªå®šä¹‰èµ„æºå¤„ç†å™¨çš„å±æ€§</span></span><br><span class="line">    customizer.accept(registration);</span><br><span class="line">    <span class="comment">// æ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„ç¼“å­˜æ—¶é—´è®¾ç½®èµ„æºå¤„ç†å™¨çš„ç¼“å­˜æ—¶é—´ï¼ˆcache periodï¼‰ï¼Œä»¥åŠç¼“å­˜æ§åˆ¶ï¼ˆcache controlï¼‰ç­–ç•¥</span></span><br><span class="line">   registration.setCachePeriod(getSeconds(<span class="built_in">this</span>.resourceProperties.getCache().getPeriod()));</span><br><span class="line">    registration.setCacheControl(<span class="built_in">this</span>.resourceProperties.getCache().getCachecontrol().toHttpCacheControl());</span><br><span class="line">    registration.setUseLastModified(<span class="built_in">this</span>.resourceProperties.getCache().isUseLastModified());</span><br><span class="line">    <span class="comment">// è¿›ä¸€æ­¥è‡ªå®šä¹‰èµ„æºå¤„ç†å™¨æ³¨å†Œå¯¹è±¡çš„å±æ€§</span></span><br><span class="line">    customizeResourceHandlerRegistration(registration);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°ç»“ä¸€ä¸‹:<br>é™æ€èµ„æºè®¿é—®è§„åˆ™å¦‚ä¸‹:</p><ul><li>è§„åˆ™ä¸€ è®¿é—®ï¼š <code>/webjars/**</code>è·¯å¾„å°±å»<code>classpath:/META-INF/resources/webjars/</code>ä¸‹æ‰¾èµ„æº.</li><li>è§„åˆ™äºŒ è®¿é—®ï¼š <code>/**</code>è·¯å¾„å°±å» é™æ€èµ„æºé»˜è®¤çš„å››ä¸ªä½ç½®æ‰¾èµ„æº<ul><li><code>classpath:/META-INF/resources/</code></li><li><code>classpath:/resources/</code></li><li><code>classpath:/static/</code></li><li><code>classpath:/public/</code></li></ul></li><li>è§„åˆ™ä¸‰ é™æ€èµ„æºé»˜è®¤éƒ½æœ‰<strong>ç¼“å­˜è§„åˆ™</strong>çš„è®¾ç½®<ul><li>æ‰€æœ‰ç¼“å­˜çš„è®¾ç½®, ç›´æ¥é€šè¿‡é…ç½®æ–‡ä»¶:<code>spring.web</code></li><li>cachePeriod: ç¼“å­˜å‘¨æœŸ; å¤šä¹…ä¸ç”¨æ‰¾æœåŠ¡å™¨è¦æ–°çš„, é»˜è®¤æ²¡æœ‰ï¼Œä»¥ç§’ä¸ºå•ä½</li><li>cacheControl: <strong>HTTPç¼“å­˜æ§åˆ¶</strong>, <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching">æŸ¥çœ‹æ–‡æ¡£</a></li><li>useLastModifiedï¼šæ˜¯å¦ä½¿ç”¨æœ€åä¸€æ¬¡ä¿®æ”¹, é…åˆHTTP Cacheè§„åˆ™, å¦‚æœæµè§ˆå™¨è®¿é—®äº†ä¸€ä¸ªé™æ€èµ„æº</li></ul></li></ul><blockquote><p>å¦‚æœæµè§ˆå™¨è®¿é—®äº†ä¸€ä¸ªé™æ€èµ„æº index.jsï¼Œå¦‚æœæœåŠ¡è¿™ä¸ªèµ„æºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä¸‹æ¬¡è®¿é—®çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥è®©æµè§ˆå™¨ç”¨è‡ªå·±ç¼“å­˜ä¸­çš„ä¸œè¥¿ï¼Œè€Œä¸ç”¨ç»™æœåŠ¡å™¨å‘è¯·æ±‚</p></blockquote><h4 id="HTTPç¼“å­˜å®éªŒ"><a href="#HTTPç¼“å­˜å®éªŒ" class="headerlink" title="HTTPç¼“å­˜å®éªŒ"></a>HTTPç¼“å­˜å®éªŒ</h4><p>è®¾ç½®å¦‚ä¸‹:</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€spring.webï¼š</span></span><br><span class="line"><span class="comment"># 1.é…ç½®å›½é™…åŒ–çš„åŒºåŸŸä¿¡æ¯(locale)</span></span><br><span class="line"><span class="comment"># 2.é™æ€èµ„æºç­–ç•¥(å¼€å¯ã€å¤„ç†é“¾ã€ç¼“å­˜)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="attr">add-mappings:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯é™æ€èµ„æºæ˜ å°„è§„åˆ™,é»˜è®¤true</span></span><br><span class="line">      <span class="attr">cache:</span></span><br><span class="line">        <span class="attr">period:</span> <span class="number">3600</span> <span class="comment"># å•ä½æ˜¯ ç§’, æ­¤ä¸ºç®€è¦è®¾ç½®, ä¸‹é¢(cache-control)æ˜¯è¯¦ç»†é…ç½®,ä¼šè¦†ç›–period</span></span><br><span class="line">        <span class="attr">cache-control:</span></span><br><span class="line">          <span class="attr">max-age:</span> <span class="number">7200</span> <span class="comment"># æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨æ­¤èµ„æºç¼“å­˜7200ç§’ï¼Œ7200ç§’ä»¥å†…çš„æ‰€æœ‰æ­¤èµ„æºè®¿é—®ä¸ç”¨å‘ç»™æœåŠ¡å™¨è¯·æ±‚ï¼Œ7200ç§’ä»¥åå‘è¯·æ±‚ç»™æœåŠ¡å™¨</span></span><br><span class="line">        <span class="attr">use-last-modified:</span> <span class="literal">true</span> <span class="comment"># é»˜è®¤true, ä½¿ç”¨èµ„æº last-modified æ—¶é—´ï¼Œæ¥å¯¹æ¯”æœåŠ¡å™¨å’Œæµè§ˆå™¨çš„èµ„æºæ˜¯å¦ç›¸åŒæ²¡æœ‰å˜åŒ–ã€‚ç›¸åŒè¿”å› 304</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€æ¬¡è¯·æ±‚:</p><img src="https://image.fu-jw.com/img/2023/07/01/649f850bd24ec.webp" alt="ç¬¬ä¸€æ¬¡è¯·æ±‚"/><p>ç¬¬äºŒæ¬¡è¯·æ±‚:</p><img src="https://image.fu-jw.com/img/2023/07/01/649f85350e56a.webp" alt="ç¬¬äºŒæ¬¡è¯·æ±‚"/><h3 id="è‡ªå®šä¹‰é™æ€èµ„æº"><a href="#è‡ªå®šä¹‰é™æ€èµ„æº" class="headerlink" title="è‡ªå®šä¹‰é™æ€èµ„æº"></a>è‡ªå®šä¹‰é™æ€èµ„æº</h3><p>å¤§ä½“åˆ†ä¸ºä¸¤ç§æ–¹å¼:</p><ul><li>é…ç½®æ–‡ä»¶çš„æ–¹å¼</li><li>ä»£ç çš„æ–¹å¼</li></ul><h4 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@Import(EnableWebMvcConfiguration.class)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123;WebMvcProperties.class, WebProperties.class&#125;)</span></span><br><span class="line"><span class="meta">@Order(0)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">WebMvcAutoConfigurationAdapter</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span>, ServletContextAware &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ä¸¤ä¸ªé…ç½®æ–‡ä»¶ç»‘å®š<code>WebMvcProperties.class</code>å’Œ<code>WebProperties.class</code>,<br>å³ä»¥<code>spring.web</code>å’Œ<code>spring.mvc</code>å¼€å¤´çš„é…ç½®</p><ul><li><code>spring.web</code>:å¯é…ç½®locale(å›½é™…åŒ–)å’Œresources(é™æ€èµ„æºç›¸å…³),å…·ä½“å¯æŸ¥çœ‹<code>WebProperties.class</code></li><li><code>spring.mvc</code>:å¯é…ç½®å†…å®¹å¾ˆå¤š,å…·ä½“å¯æŸ¥çœ‹<code>WebMvcProperties.class</code></li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="attr">add-mappings:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯é™æ€èµ„æºæ˜ å°„è§„åˆ™,é»˜è®¤true</span></span><br><span class="line">      <span class="attr">cache:</span></span><br><span class="line">        <span class="attr">period:</span> <span class="number">3600</span> <span class="comment"># å•ä½æ˜¯ ç§’, æ­¤ä¸ºç®€è¦è®¾ç½®, ä¸‹é¢(cache-control)æ˜¯è¯¦ç»†é…ç½®,ä¼šè¦†ç›–period</span></span><br><span class="line">        <span class="attr">cache-control:</span></span><br><span class="line">          <span class="attr">max-age:</span> <span class="number">7200</span> <span class="comment"># æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨æ­¤èµ„æºç¼“å­˜7200ç§’ï¼Œ7200ç§’ä»¥å†…çš„æ‰€æœ‰æ­¤èµ„æºè®¿é—®ä¸ç”¨å‘ç»™æœåŠ¡å™¨è¯·æ±‚ï¼Œ7200ç§’ä»¥åå‘è¯·æ±‚ç»™æœåŠ¡å™¨</span></span><br><span class="line">        <span class="attr">use-last-modified:</span> <span class="literal">true</span> <span class="comment"># é»˜è®¤true, ä½¿ç”¨èµ„æº last-modified æ—¶é—´ï¼Œæ¥å¯¹æ¯”æœåŠ¡å™¨å’Œæµè§ˆå™¨çš„èµ„æºæ˜¯å¦ç›¸åŒæ²¡æœ‰å˜åŒ–ã€‚ç›¸åŒè¿”å› 304</span></span><br><span class="line">      <span class="attr">static-locations:</span> <span class="string">classpath:/static/,classpath:/test/</span> <span class="comment"># è‡ªå®šä¹‰é™æ€èµ„æºç›®å½•,æŒ‰é¡ºåºè®¿é—®</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">webjars-path-pattern:</span> <span class="string">/webjars/**</span> <span class="comment"># è‡ªå®šä¹‰webjarsè·¯å¾„å‰ç¼€,é»˜è®¤:/webjars/**</span></span><br><span class="line">    <span class="attr">static-path-pattern:</span> <span class="string">/static/**</span> <span class="comment"># é™æ€èµ„æºè®¿é—®è·¯å¾„å‰ç¼€,é»˜è®¤:/**</span></span><br></pre></td></tr></table></figure><h4 id="ä»£ç æ–¹å¼"><a href="#ä»£ç æ–¹å¼" class="headerlink" title="ä»£ç æ–¹å¼"></a>ä»£ç æ–¹å¼</h4><p>å°±æ˜¯åœ¨å®¹å™¨ä¸­æ”¾ç½®ç»„ä»¶:<code>WebMvcConfigurer</code>,æ¥é…ç½®åº•å±‚.</p><p>æ³¨æ„:</p><ul><li>é»˜è®¤é…ç½®ä»æœ‰æ•ˆ</li><li>åŠ ä¸Š<code>@EnableWebMvc</code>ä¼šå°†é»˜è®¤é…ç½®å¤±æ•ˆ</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> &#123;</span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="keyword">public</span> WebMvcConfigurer <span class="title function_">webMvcConfigurer</span><span class="params">()</span> &#123;<span class="comment">// ä¸ä¸‹é¢ä»£ç ä¸€æ ·æ•ˆæœ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WebMvcConfigurer</span>() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/static/**&quot;</span>)</span><br><span class="line">                .addResourceLocations(<span class="string">&quot;/static&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123; <span class="comment">// è¿˜å¯ä»¥ä¸Šé¢å†™æ³•,æ•ˆæœä¸€æ ·</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">    <span class="comment">// ä¿ç•™é»˜è®¤é…ç½®</span></span><br><span class="line">    WebMvcConfigurer.<span class="built_in">super</span>.addResourceHandlers(registry);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰é…ç½®</span></span><br><span class="line">    registry.addResourceHandler(<span class="string">&quot;/static/**&quot;</span>)<span class="comment">// è®¾ç½®é™æ€èµ„æºè®¿é—®å‰ç¼€,åŒé…ç½®æ–‡ä»¶ä¸­çš„spring.mvc.static-path-pattern:</span></span><br><span class="line">            .addResourceLocations(<span class="string">&quot;/static&quot;</span>);<span class="comment">// è®¾ç½®é™æ€èµ„æºè·å–è·¯å¾„,åŒé…ç½®æ–‡ä»¶ä¸­çš„spring.web.resources.static-locations: classpath:/static/</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><details> <summary><strong><span style="color: red; ">ä¸ºä»€ä¹ˆå®¹å™¨ä¸­å«æœ‰WebMvcConfigurerç»„ä»¶,å°±èƒ½é…ç½®åº•å±‚è¡Œä¸º???</span></strong></summary><ol><li><code>WebMvcAutoConfiguration</code>æ˜¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±», å®ƒé‡Œé¢æœ‰ä¸€ä¸ª<code>EnableWebMvcConfiguration</code></li><li><code>EnableWebMvcConfiguration</code>ç»§æ‰¿ä¸<code>DelegatingWebMvcConfiguration</code>, è¿™ä¸¤ä¸ªéƒ½ç”Ÿæ•ˆ</li><li><code>DelegatingWebMvcConfiguration</code>åˆ©ç”¨<strong>DI</strong>æŠŠå®¹å™¨ä¸­æ‰€æœ‰<code>WebMvcConfigurer</code>æ³¨å…¥è¿›æ¥</li><li>å½“è°ƒç”¨<code>DelegatingWebMvcConfiguration</code>çš„æ–¹æ³•é…ç½®åº•å±‚è§„åˆ™, è€Œå®ƒè°ƒç”¨æ‰€æœ‰<code>WebMvcConfigurer</code>çš„é…ç½®åº•å±‚æ–¹æ³•</li></ol></details>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ğŸ¤–ğŸ¤–-æ‘˜è¦:&lt;br&gt;æœ¬æ–‡ä»‹ç»äº†SpringBoot Webå¼€å‘è‡ªåŠ¨é…ç½®åŸç†ï¼ŒåŒ…æ‹¬webåœºæ™¯å¯åŠ¨å™¨çš„ä½¿ç”¨å’Œè‡ªåŠ¨è£…é…åŠŸèƒ½ï¼Œåœ¨webåœºæ™¯ä¸­æ·»åŠ ç‰¹æ€§å¦‚è§†å›¾è§£æï¼Œé™æ€èµ„æºå¤„ç†ï¼Œæ•°æ®ç±»å‹è½¬æ¢ç­‰ã€‚è¿˜æœ‰è‡ªå®šä¹‰é™æ€èµ„æºçš„ä¸¤ç§æ–¹å¼ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶æˆ–ä»£ç ã€‚&lt;/p&gt;
&lt;</summary>
      
    
    
    
    <category term="å­¦ä¹ " scheme="http://fu-jw.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="SpringBoot" scheme="http://fu-jw.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot Webå¼€å‘2-è·¯å¾„åŒ¹é…</title>
    <link href="http://fu-jw.com/posts/10ba68de.html"/>
    <id>http://fu-jw.com/posts/10ba68de.html</id>
    <published>2023-07-01T00:00:00.000Z</published>
    <updated>2023-07-09T11:25:56.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ¤–ğŸ¤–-æ‘˜è¦:<br>æœ¬æ–‡ä»‹ç»SpringBoot Webå¼€å‘ä¸­çš„è·¯å¾„åŒ¹é…æŠ€æœ¯ã€‚ä»‹ç»äº†Spring5.3åçš„è¯·æ±‚è·¯å¾„åŒ¹é…ç­–ç•¥ï¼ŒåŒ…æ‹¬æ—§çš„AntPathMatcherç­–ç•¥å’Œæ–°çš„é»˜è®¤PathPatternParserç­–ç•¥ã€‚æ–‡ç« è§£é‡Šäº†å¦‚ä½•åœ¨ä»£ç ä¸­é€‰æ‹©å’Œé…ç½®è¿™ä¸¤ç§ç­–ç•¥</p></blockquote><h1 id="SpringBoot-Webå¼€å‘2-è·¯å¾„åŒ¹é…"><a href="#SpringBoot-Webå¼€å‘2-è·¯å¾„åŒ¹é…" class="headerlink" title="SpringBoot Webå¼€å‘2-è·¯å¾„åŒ¹é…"></a>SpringBoot Webå¼€å‘2-è·¯å¾„åŒ¹é…</h1><h2 id="è·¯å¾„åŒ¹é…"><a href="#è·¯å¾„åŒ¹é…" class="headerlink" title="è·¯å¾„åŒ¹é…"></a>è·¯å¾„åŒ¹é…</h2><p><strong>Spring5.3</strong>ä¹‹ååŠ å…¥äº†æ›´å¤šçš„<strong>è¯·æ±‚è·¯å¾„åŒ¹é…</strong>çš„å®ç°ç­–ç•¥,</p><p>ä»¥å‰åªæ”¯æŒ<strong>AntPathMatcher</strong>ç­–ç•¥,ç°åœ¨æä¾›äº†<strong>PathPatternParser</strong>ç­–ç•¥,<br>å¹¶ä¸”å¯ä»¥æŒ‡å®šä½¿ç”¨å“ªç§ç­–ç•¥</p><p>é»˜è®¤ä½¿ç”¨<strong>PathPatternParser</strong>ç­–ç•¥</p><h3 id="AntPathMatcherç­–ç•¥"><a href="#AntPathMatcherç­–ç•¥" class="headerlink" title="AntPathMatcherç­–ç•¥"></a>AntPathMatcherç­–ç•¥</h3><p>Ant é£æ ¼çš„è·¯å¾„æ¨¡å¼è¯­æ³•å…·æœ‰ä»¥ä¸‹è§„åˆ™:</p><ul><li><em>ï¼šè¡¨ç¤º<strong>ä»»æ„æ•°é‡</strong>çš„*<em>å­—ç¬¦</em></em>,0~n</li><li>?ï¼šè¡¨ç¤º<strong>ä»»æ„ä¸€ä¸ª</strong>å­—ç¬¦,</li><li>*<em>ï¼šè¡¨ç¤º<strong>ä»»æ„æ•°é‡</strong>çš„*<em>ç›®å½•</em></em></li><li>{}ï¼šè¡¨ç¤ºä¸€ä¸ªå‘½åçš„æ¨¡å¼<strong>å ä½ç¬¦</strong></li><li>[]ï¼šè¡¨ç¤ºå­—ç¬¦é›†åˆ,ä¾‹å¦‚[a-z]è¡¨ç¤ºå°å†™å­—æ¯</li></ul><p>ä¾‹å¦‚:</p><ul><li><strong>*.html</strong> åŒ¹é…ä»»æ„åç§°,ä¸”æ‰©å±•åä¸º.htmlçš„æ–‡ä»¶</li><li><strong>&#x2F;folder1&#x2F;<em>&#x2F;</em>.java</strong> åŒ¹é…åœ¨folder1ç›®å½•ä¸‹çš„ä»»æ„ä¸¤çº§ç›®å½•ä¸‹çš„.javaæ–‡ä»¶</li><li><strong>&#x2F;folder2&#x2F;**&#x2F;*.jsp</strong> åŒ¹é…åœ¨folder2ç›®å½•ä¸‹ä»»æ„ç›®å½•æ·±åº¦çš„.jspæ–‡ä»¶</li><li><strong>&#x2F;{type}&#x2F;{id}.html</strong> åŒ¹é…ä»»æ„æ–‡ä»¶åä¸º{id}.html,åœ¨ä»»æ„å‘½åçš„{type}ç›®å½•ä¸‹çš„æ–‡ä»¶</li></ul><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">æ³¨æ„ï¼šAnt é£æ ¼çš„è·¯å¾„æ¨¡å¼è¯­æ³•ä¸­çš„ç‰¹æ®Šå­—ç¬¦éœ€è¦è½¬ä¹‰,å¦‚:</span><br><span class="line">1. è¦åŒ¹é…æ–‡ä»¶è·¯å¾„ä¸­çš„æ˜Ÿå·,åˆ™éœ€è¦è½¬ä¹‰ä¸º\\*</span><br><span class="line">2. è¦åŒ¹é…æ–‡ä»¶è·¯å¾„ä¸­çš„é—®å·,åˆ™éœ€è¦è½¬ä¹‰ä¸º\\?</span><br></pre></td></tr></table></figure><p>ä»£ç æµ‹è¯•:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AntPathController</span> &#123;</span><br><span class="line">  <span class="meta">@GetMapping(&quot;/a*/b?/&#123;p1:[a-f]+&#125;&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(HttpServletRequest request,</span></span><br><span class="line"><span class="params">                      <span class="meta">@PathVariable(&quot;p1&quot;)</span> String path)</span> &#123;</span><br><span class="line"></span><br><span class="line">    log.info(<span class="string">&quot;è·¯å¾„å˜é‡p1ï¼š &#123;&#125;&quot;</span>, path);</span><br><span class="line">    <span class="comment">//è·å–è¯·æ±‚è·¯å¾„</span></span><br><span class="line">    <span class="keyword">return</span> request.getRequestURI();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¿é—®:<a href="http://localhost:8080/ads/bd/adf">http://localhost:8080/ads/bd/adf</a></p><img src="https://image.fu-jw.com/img/2023/07/01/649f847e483f9.webp" alt="AntPathMatcherç­–ç•¥"/><p>æ§åˆ¶å°æ‰“å°:</p><blockquote><p>è·¯å¾„å˜é‡p1ï¼š adf</p></blockquote><h3 id="PathPatternParserç­–ç•¥"><a href="#PathPatternParserç­–ç•¥" class="headerlink" title="PathPatternParserç­–ç•¥"></a>PathPatternParserç­–ç•¥</h3><blockquote><ul><li>åŸºå‡†æµ‹è¯•ä¸‹,æœ‰<strong>6~8</strong>å€ååé‡æå‡,é™ä½30%~40%ç©ºé—´åˆ†é…ç‡</li><li>å…¼å®¹<strong>AntPathMatcher</strong>è¯­æ³•,å¹¶æ”¯æŒæ›´å¤šç±»å‹çš„è·¯å¾„æ¨¡å¼</li></ul></blockquote><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">æ³¨æ„:&quot;**&quot; å¤šæ®µåŒ¹é…çš„æ”¯æŒä»…å…è®¸åœ¨æ¨¡å¼æœ«å°¾ä½¿ç”¨</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹é»˜è®¤ç­–ç•¥"><a href="#ä¿®æ”¹é»˜è®¤ç­–ç•¥" class="headerlink" title="ä¿®æ”¹é»˜è®¤ç­–ç•¥"></a>ä¿®æ”¹é»˜è®¤ç­–ç•¥</h3><ul><li>é…ç½®æ–‡ä»¶:spring.mvc.pathmatch.matching-strategy&#x3D;ant_path_matcher</li><li>ä»£ç ä¿®æ”¹:</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ­¤æ–¹æ³•å¯ä»¥ä¿®æ”¹è·¯å¾„åŒ¹é…è§„åˆ™</span></span><br><span class="line"><span class="comment"> * ä»spring5.3 å¼€å§‹,é»˜è®¤ PathPatternParser</span></span><br><span class="line"><span class="comment"> * æƒ³è¦ä¿®æ”¹ä¸º AntPathMatcher,åˆ™åªéœ€è®¾ç½®ä¸ºç©ºå³å¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configurePathMatch</span><span class="params">(PathMatchConfigurer configurer)</span>&#123;</span><br><span class="line">    configurer.setPatternParser(<span class="literal">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å°ç»“ä¸€ä¸‹"><a href="#å°ç»“ä¸€ä¸‹" class="headerlink" title="å°ç»“ä¸€ä¸‹"></a>å°ç»“ä¸€ä¸‹</h3><ul><li>ä½¿ç”¨é»˜è®¤çš„è·¯å¾„åŒ¹é…è§„åˆ™(<code>PathPatternParser</code>)å³å¯,æ€§èƒ½é«˜,å…¼å®¹Anté£æ ¼</li><li>å¦‚æœä¸­é—´éœ€è¦åŒæ˜Ÿ(**),åªèƒ½æ¢å›Anté£æ ¼</li></ul><p>SpringBoot åº•å±‚åŒ¹é…ç­–ç•¥:<br>WebMvcAutoConfiguration.java</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configurePathMatch</span><span class="params">(PathMatchConfigurer configurer)</span>&#123;</span><br><span class="line">  <span class="comment">// åªæœ‰ ANT_PATH_MATCHER æ‰æ¡ä»¶æˆç«‹,åˆ›å»º new AntPathMatcher()</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">this</span>.mvcProperties.getPathmatch().getMatchingStrategy()==WebMvcProperties.MatchingStrategy.ANT_PATH_MATCHER)&#123;</span><br><span class="line">    configurer.setPathMatcher(<span class="keyword">new</span> <span class="title class_">AntPathMatcher</span>());</span><br><span class="line">    <span class="built_in">this</span>.dispatcherServletPath.ifAvailable((dispatcherPath)-&gt;&#123;</span><br><span class="line">      String servletUrlMapping=dispatcherPath.getServletUrlMapping();</span><br><span class="line">      <span class="keyword">if</span>(servletUrlMapping.equals(<span class="string">&quot;/&quot;</span>)&amp;&amp;singleDispatcherServlet())&#123;</span><br><span class="line">        UrlPathHelper urlPathHelper=<span class="keyword">new</span> <span class="title class_">UrlPathHelper</span>();</span><br><span class="line">        urlPathHelper.setAlwaysUseFullPath(<span class="literal">true</span>);</span><br><span class="line">        configurer.setUrlPathHelper(urlPathHelper);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µ,WebMvcProperties.java:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é»˜è®¤æƒ…å†µæ˜¯:PATH_PATTERN_PARSER</span></span><br><span class="line"><span class="keyword">private</span> MatchingStrategy matchingStrategy=MatchingStrategy.PATH_PATTERN_PARSER;</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////////////////</span></span><br><span class="line"><span class="comment">// MatchingStrategy æ˜¯æšä¸¾ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">MatchingStrategy</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Use the &#123;<span class="doctag">@code</span> AntPathMatcher&#125; implementation.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  ANT_PATH_MATCHER,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Use the &#123;<span class="doctag">@code</span> PathPatternParser&#125; implementation.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  PATH_PATTERN_PARSER</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ğŸ¤–ğŸ¤–-æ‘˜è¦:&lt;br&gt;æœ¬æ–‡ä»‹ç»SpringBoot Webå¼€å‘ä¸­çš„è·¯å¾„åŒ¹é…æŠ€æœ¯ã€‚ä»‹ç»äº†Spring5.3åçš„è¯·æ±‚è·¯å¾„åŒ¹é…ç­–ç•¥ï¼ŒåŒ…æ‹¬æ—§çš„AntPathMatcherç­–ç•¥å’Œæ–°çš„é»˜è®¤PathPatternParserç­–ç•¥ã€‚æ–‡ç« è§£é‡Šäº†å¦‚ä½•åœ¨ä»£ç ä¸­é€‰æ‹©å’Œé…</summary>
      
    
    
    
    <category term="å­¦ä¹ " scheme="http://fu-jw.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="SpringBoot" scheme="http://fu-jw.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot Webå¼€å‘3-å†…å®¹åå•†</title>
    <link href="http://fu-jw.com/posts/2ba4c64a.html"/>
    <id>http://fu-jw.com/posts/2ba4c64a.html</id>
    <published>2023-07-01T00:00:00.000Z</published>
    <updated>2023-07-09T11:25:56.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ¤–ğŸ¤–-æ‘˜è¦:<br>æœ¬æ–‡ä»‹ç»äº†HTTPå†…å®¹åå•†ï¼ŒåŒ…æ‹¬æœåŠ¡ç«¯é©±åŠ¨å‹å†…å®¹åå•†å’Œä»£ç†é©±åŠ¨å‹å†…å®¹åå•†ï¼Œå¹¶åˆ†æäº†SpringMVCå’ŒSpringBootçš„å†…å®¹åå•†æ–¹å¼ã€‚æ–‡ç« è¿˜é€šè¿‡ç¤ºä¾‹å’Œå›¾ç¤ºè¯´æ˜äº†å¦‚ä½•è¿›è¡ŒåŸºäºè¯·æ±‚å¤´å’ŒåŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†ï¼Œä»¥åŠå¦‚ä½•è¿›è¡Œæµ‹è¯•å’Œé…ç½®ã€‚æœ€åï¼Œæ¢è®¨äº†å†…å®¹åå•†çš„åŸç†ã€‚</p></blockquote><h1 id="SpringBoot-Webå¼€å‘3-å†…å®¹åå•†"><a href="#SpringBoot-Webå¼€å‘3-å†…å®¹åå•†" class="headerlink" title="SpringBoot Webå¼€å‘3-å†…å®¹åå•†"></a>SpringBoot Webå¼€å‘3-å†…å®¹åå•†</h1><h2 id="å†…å®¹åå•†"><a href="#å†…å®¹åå•†" class="headerlink" title="å†…å®¹åå•†"></a>å†…å®¹åå•†</h2><h3 id="HTTPå†…å®¹åå•†"><a href="#HTTPå†…å®¹åå•†" class="headerlink" title="HTTPå†…å®¹åå•†"></a>HTTPå†…å®¹åå•†</h3><p>åœ¨<strong>HTTP</strong>åè®®ä¸­,<strong>å†…å®¹åå•†</strong>æ˜¯ä¸€ç§æœºåˆ¶,ç”¨äºä¸ºåŒä¸€<strong>URI</strong>æä¾›èµ„æºä¸åŒçš„è¡¨ç¤ºå½¢å¼,ä»¥å¸®åŠ©ç”¨æˆ·ä»£ç†æŒ‡å®šæœ€é€‚åˆç”¨æˆ·çš„è¡¨ç¤ºå½¢å¼<br>ä¾‹å¦‚,å“ªç§æ–‡æ¡£è¯­è¨€,å“ªç§å›¾ç‰‡æ ¼å¼æˆ–è€…å“ªç§å†…å®¹ç¼–ç </p><p>å†…å®¹åå•†é€šå¸¸æœ‰ä¸¤ç§æ–¹å¼,æœåŠ¡ç«¯é©±åŠ¨å‹å†…å®¹åå•†å’Œä»£ç†é©±åŠ¨å‹å†…å®¹åå•†</p><h4 id="æœåŠ¡ç«¯é©±åŠ¨å‹å†…å®¹åå•†"><a href="#æœåŠ¡ç«¯é©±åŠ¨å‹å†…å®¹åå•†" class="headerlink" title="æœåŠ¡ç«¯é©±åŠ¨å‹å†…å®¹åå•†"></a>æœåŠ¡ç«¯é©±åŠ¨å‹å†…å®¹åå•†</h4><p>åœ¨æœåŠ¡ç«¯é©±åŠ¨å‹å†…å®¹åå•†æˆ–è€…ä¸»åŠ¨å†…å®¹åå•†ä¸­,æµè§ˆå™¨ï¼ˆæˆ–è€…å…¶ä»–ä»»ä½•ç±»å‹çš„ç”¨æˆ·ä»£ç†ï¼‰ä¼šéšåŒ URL å‘é€ä¸€ç³»åˆ—çš„ HTTP æ ‡å¤´.<br>è¿™äº›æ ‡å¤´æè¿°äº†ç”¨æˆ·å€¾å‘çš„é€‰æ‹©.æœåŠ¡å™¨åˆ™ä»¥æ­¤ä¸ºçº¿ç´¢,é€šè¿‡å†…éƒ¨ç®—æ³•æ¥é€‰æ‹©æœ€ä½³æ–¹æ¡ˆæä¾›ç»™å®¢æˆ·ç«¯.å¦‚æœå®ƒä¸èƒ½æä¾›ä¸€ä¸ªåˆé€‚çš„èµ„æº,<br>å®ƒå¯èƒ½ä½¿ç”¨ 406ï¼ˆNot Acceptableï¼‰ã€415ï¼ˆUnsupported Media Typeï¼‰è¿›è¡Œå“åº”å¹¶ä¸ºå…¶æ”¯æŒçš„åª’ä½“ç±»å‹è®¾ç½®æ ‡å¤´.<br>ä¾‹å¦‚ï¼Œåˆ†åˆ«å¯¹ POST å’Œ PATCH è¯·æ±‚ä½¿ç”¨ Accept-Post (en-US) æˆ– Accept-Patch æ ‡å¤´</p><img src="https://image.fu-jw.com/img/2023/07/01/649f8446e65eb.webp" alt="æœåŠ¡ç«¯é©±åŠ¨å‹å†…å®¹åå•†"/><p>HTTP&#x2F;1.1 è§„èŒƒæŒ‡å®šäº†ä¸€ç³»åˆ—çš„æ ‡å‡†æ ‡å¤´ç”¨äºå¯åŠ¨æœåŠ¡ç«¯é©±åŠ¨å‹å†…å®¹åå•†ï¼ˆAcceptã€Accept-Charsetã€Accept-Encodingã€Accept-Languageï¼‰</p><table><thead><tr><th>è¯·æ±‚å¤´</th><th>è¯·æ±‚å¤´è¯´æ˜</th><th>å“åº”å¤´</th><th>å“åº”å¤´è¯´æ˜</th></tr></thead><tbody><tr><td>Accept</td><td>å‘Šè¯‰æœåŠ¡ç«¯éœ€è¦çš„ç±»å‹</td><td>Content-Type</td><td>å‘Šè¯‰å®¢æˆ·ç«¯å“åº”çš„åª’ä½“ç±»å‹</td></tr><tr><td>Accept-Language</td><td>å‘Šè¯‰æœåŠ¡ç«¯éœ€è¦çš„è¯­è¨€</td><td>Content-Language</td><td>å‘Šè¯‰å®¢æˆ·ç«¯å“åº”çš„è¯­è¨€</td></tr><tr><td>Accept-Charset</td><td>å‘Šè¯‰æœåŠ¡ç«¯éœ€è¦çš„å­—ç¬¦é›†</td><td>Content-Charset</td><td>å‘Šè¯‰å®¢æˆ·ç«¯å“åº”çš„å­—ç¬¦é›†</td></tr><tr><td>Accept-Encoding</td><td>å‘Šè¯‰æœåŠ¡ç«¯éœ€è¦çš„å‹ç¼©æ–¹å¼</td><td>Content-Encoding</td><td>å‘Šè¯‰å®¢æˆ·ç«¯å“åº”çš„å‹ç¼©æ–¹å¼</td></tr></tbody></table><h4 id="ä»£ç†é©±åŠ¨å‹å†…å®¹åå•†"><a href="#ä»£ç†é©±åŠ¨å‹å†…å®¹åå•†" class="headerlink" title="ä»£ç†é©±åŠ¨å‹å†…å®¹åå•†"></a>ä»£ç†é©±åŠ¨å‹å†…å®¹åå•†</h4><p>ä» HTTP åè®®åˆ¶å®šä¹‹åˆï¼Œè¯¥åè®®å°±å‡†è®¸å¦å¤–ä¸€ç§åå•†æœºåˆ¶ï¼šä»£ç†é©±åŠ¨å‹å†…å®¹åå•†ï¼Œæˆ–ç§°ä¸ºå“åº”å¼åå•†ã€‚<br>åœ¨è¿™ç§åå•†æœºåˆ¶ä¸­ï¼Œå½“é¢ä¸´ä¸æ˜ç¡®çš„è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªé¡µé¢ï¼Œå…¶ä¸­åŒ…å«äº†å¯ä¾›é€‰æ‹©çš„èµ„æºçš„é“¾æ¥ã€‚<br>èµ„æºå‘ˆç°ç»™ç”¨æˆ·ï¼Œç”±ç”¨æˆ·åšå‡ºé€‰æ‹©.ä½†æ˜¯HTTP æ ‡å‡†æ²¡æœ‰æ˜ç¡®æŒ‡å®šæä¾›å¯é€‰èµ„æºé“¾æ¥çš„é¡µé¢çš„æ ¼å¼ï¼Œè¿™é˜»ç¢äº†è¯¥è¿‡ç¨‹çš„æ— ç—›è‡ªåŠ¨åŒ–ã€‚<br>é™¤äº†é€€å›è‡³æœåŠ¡ç«¯é©±åŠ¨å‹å†…å®¹åå•†å¤–ï¼Œè¿™ç§è‡ªåŠ¨åŒ–æ–¹æ³•å‡ ä¹æ— ä¸€ä¾‹å¤–éƒ½æ˜¯é€šè¿‡è„šæœ¬æŠ€æœ¯æ¥å®Œæˆçš„ï¼Œ<br>å°¤å…¶æ˜¯ JavaScript é‡å®šå‘æŠ€æœ¯ï¼šåœ¨æ£€æµ‹äº†åå•†çš„æ¡ä»¶ä¹‹åï¼Œè„šæœ¬ä¼šè§¦å‘é‡å®šå‘åŠ¨ä½œã€‚<br>å¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œä¸ºäº†è·å¾—å®é™…çš„èµ„æºï¼Œéœ€è¦é¢å¤–å‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œå‡æ…¢äº†å°†èµ„æºå‘ˆç°ç»™ç”¨æˆ·çš„é€Ÿåº¦</p><h3 id="SpringMVCçš„å†…å®¹åå•†"><a href="#SpringMVCçš„å†…å®¹åå•†" class="headerlink" title="SpringMVCçš„å†…å®¹åå•†"></a>SpringMVCçš„å†…å®¹åå•†</h3><p>SpringMVCå®ç°äº†HTTPå†…å®¹åå•†çš„åŒæ—¶,åˆè¿›è¡Œäº†æ‰©å±•.<br>æ”¯æŒ4ç§å†…å®¹åå•†æ–¹å¼ï¼šHTTPé¦–éƒ¨Acceptï¼Œæ‰©å±•åï¼Œè¯·æ±‚å‚æ•°ï¼Œæˆ–è€…å›ºå®šç±»å‹</p><h3 id="SpringBootçš„å†…å®¹åå•†"><a href="#SpringBootçš„å†…å®¹åå•†" class="headerlink" title="SpringBootçš„å†…å®¹åå•†"></a>SpringBootçš„å†…å®¹åå•†</h3><p>ç”±äºSpringBootçš„<code>webåœºæ™¯å¯åŠ¨å™¨</code>æ•´åˆäº†SpringMVC,å› æ­¤SpringBootå¼•å…¥<code>webåœºæ™¯å¯åŠ¨å™¨</code>åå³å¯æ‹¥æœ‰å†…å®¹åå•†åŠŸèƒ½</p><p>SpringBootæœ‰ä¸¤ç§æ–¹å¼:åŸºäºè¯·æ±‚å¤´å’ŒåŸºäºè¯·æ±‚å‚æ•°çš„å®ç°</p><ul><li>åŸºäºè¯·æ±‚å¤´å†…å®¹åå•†:(é»˜è®¤å¼€å¯)<ul><li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼Œæºå¸¦HTTPæ ‡å‡†çš„<strong>Acceptè¯·æ±‚å¤´</strong></li><li><strong>Accept</strong>: <code>application/json</code>ã€<code>text/xml</code>ã€<code>text/yaml</code></li><li>æœåŠ¡ç«¯æ ¹æ®å®¢æˆ·ç«¯è¯·æ±‚å¤´æœŸæœ›çš„æ•°æ®ç±»å‹è¿›è¡ŒåŠ¨æ€è¿”å›</li></ul></li><li>åŸºäºè¯·æ±‚å‚æ•°å†…å®¹åå•†:(éœ€è¦å¼€å¯)<ul><li>å‘é€è¯·æ±‚: GET &#x2F;person?format&#x3D;json</li><li>åŒ¹é…åˆ° @GetMapping(â€œ&#x2F;personâ€)</li><li>æ ¹æ®å‚æ•°åå•†,ä¼˜å…ˆè¿”å›<strong>json</strong>ç±»å‹æ•°æ®,(éœ€è¦å¼€å¯å‚æ•°åŒ¹é…è®¾ç½®)</li><li>å‘é€è¯·æ±‚ GET &#x2F;person?format&#x3D;xml,ä¼˜å…ˆè¿”å›<strong>xml</strong>ç±»å‹æ•°æ®</li></ul></li></ul><img src="https://image.fu-jw.com/img/2023/07/01/649f841eacfa9.webp"/><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>é»˜è®¤æƒ…å†µ,è¿”å›JSON</p><details> <summary><strong><span style="color: red; ">æ˜¯å› ä¸º???</span></strong></summary><strong>webåœºæ™¯</strong>ä¾èµ–<strong>spring-boot-starter-json</strong><br/><strong>spring-boot-starter-json</strong>ä¾èµ–<strong>jackson-databind</strong><br/><strong>jackson-databind</strong>å¯ä»¥å°†å¯¹è±¡è½¬ä¸ºJSON</details><p>æ•ˆæœ:<br><img src="https://image.fu-jw.com/img/2023/07/01/649f83f97a750.webp"/><br><img src="https://image.fu-jw.com/img/2023/07/01/649f83db815e5.webp"/></p><p>ä¿®æ”¹ä¸ºXMLæ ¼å¼:</p><ol><li>å¼•ä¾èµ–</li></ol><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>æ ‡æ³¨è§£</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@JacksonXmlRootElement</span>  <span class="comment">// å¯ä»¥å†™å‡ºä¸ºxmlæ–‡æ¡£</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">long</span> id;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•ˆæœ:</p><img src="https://image.fu-jw.com/img/2023/07/01/649f83a2b0c4e.webp"/><p>å‚æ•°æ¼”ç¤º:</p><p>éœ€è¦å¼€å¯<strong>åŸºäºè¯·æ±‚å‚æ•°</strong>çš„å†…å®¹åå•†</p><p>ä»£ç ç‰ˆ:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å†…å®¹åå•†çš„ç›¸å…³é…ç½®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureContentNegotiation</span><span class="params">(ContentNegotiationConfigurer configurer)</span>&#123;</span><br><span class="line">    <span class="comment">// å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŠŸèƒ½</span></span><br><span class="line">    configurer.favorParameter(<span class="literal">true</span>);<span class="comment">// é»˜è®¤:false</span></span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰å†…å®¹åå•†æ—¶ä½¿ç”¨çš„å‚æ•°å</span></span><br><span class="line">    configurer.parameterName(<span class="string">&quot;type&quot;</span>);<span class="comment">// é»˜è®¤:format</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶ç‰ˆ:</p><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŠŸèƒ½ã€‚ é»˜è®¤å‚æ•°åï¼šformatã€‚ é»˜è®¤æ­¤åŠŸèƒ½ä¸å¼€å¯</span></span><br><span class="line"><span class="attr">spring.mvc.contentnegotiation.favor-parameter</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># æŒ‡å®šå†…å®¹åå•†æ—¶ä½¿ç”¨çš„å‚æ•°åã€‚é»˜è®¤æ˜¯ format</span></span><br><span class="line"><span class="attr">spring.mvc.contentnegotiation.parameter-name</span>=<span class="string">type</span></span><br></pre></td></tr></table></figure><img src="https://image.fu-jw.com/img/2023/07/01/649f8378aac51.webp"/><img src="https://image.fu-jw.com/img/2023/07/01/649f835b383d5.webp"/><img src="https://image.fu-jw.com/img/2023/07/01/649f8333bc364.webp"/><img src="https://image.fu-jw.com/img/2023/07/01/649f83010fe7d.webp"/><h3 id="å†…å®¹åå•†åŸç†æµ…æ"><a href="#å†…å®¹åå•†åŸç†æµ…æ" class="headerlink" title="å†…å®¹åå•†åŸç†æµ…æ"></a>å†…å®¹åå•†åŸç†æµ…æ</h3><blockquote><p>å…¶å®å°±æ˜¯</p><ul><li>HttpMessageConverter æ€ä¹ˆå·¥ä½œï¼Ÿåˆé€‚å·¥ä½œï¼Ÿ</li><li>å®šåˆ¶ HttpMessageConverter æ¥å®ç°å¤šç«¯å†…å®¹åå•†</li><li>ç¼–å†™WebMvcConfigureræä¾›çš„configureMessageConvertersåº•å±‚ï¼Œä¿®æ”¹åº•å±‚çš„MessageConverter</li></ul></blockquote><h4 id="ResponseBodyç”±HttpMessageConverterå¤„ç†"><a href="#ResponseBodyç”±HttpMessageConverterå¤„ç†" class="headerlink" title="@ResponseBodyç”±HttpMessageConverterå¤„ç†"></a><code>@ResponseBody</code>ç”±<strong>HttpMessageConverter</strong>å¤„ç†</h4><blockquote><p>æ ‡æ³¨äº†<code>@ResponseBody</code>çš„è¿”å›å€¼ å°†ä¼šç”±æ”¯æŒå®ƒçš„<strong>HttpMessageConverter</strong>å†™ç»™æµè§ˆå™¨</p></blockquote><ul><li><p>å¦‚æœ<strong>controller</strong>æ–¹æ³•çš„è¿”å›å€¼æ ‡æ³¨äº†<code>@ResponseBody</code>æ³¨è§£</p><ul><li>è¯·æ±‚è¿›æ¥å…ˆæ¥åˆ°<strong>DispatcherServlet</strong>çš„<code>doDispatch()</code>è¿›è¡Œå¤„ç†</li><li>æ‰¾åˆ°ä¸€ä¸ª<strong>HandlerAdapter</strong>é€‚é…å™¨ã€‚åˆ©ç”¨é€‚é…å™¨æ‰§è¡Œç›®æ ‡æ–¹æ³•</li><li><code>RequestMappingHandlerAdapter</code>æ¥æ‰§è¡Œï¼Œè°ƒç”¨<code>invokeHandlerMethod()</code>æ¥æ‰§è¡Œç›®æ ‡æ–¹æ³•</li><li>ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œå‡†å¤‡å¥½ä¸¤ä¸ªä¸œè¥¿<ul><li>HandlerMethodArgumentResolverï¼šå‚æ•°è§£æå™¨ï¼Œç¡®å®šç›®æ ‡æ–¹æ³•æ¯ä¸ªå‚æ•°å€¼</li><li>HandlerMethodReturnValueHandlerï¼šè¿”å›å€¼å¤„ç†å™¨ï¼Œç¡®å®šç›®æ ‡æ–¹æ³•çš„è¿”å›å€¼æ”¹æ€ä¹ˆå¤„ç†</li></ul></li><li><code>RequestMappingHandlerAdapter</code>é‡Œé¢çš„<code>invokeAndHandle()</code>çœŸæ­£æ‰§è¡Œç›®æ ‡æ–¹æ³•</li><li>ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆï¼Œä¼šè¿”å›<strong>è¿”å›å€¼å¯¹è±¡</strong></li><li>æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„è¿”å›å€¼å¤„ç†å™¨<code>HandlerMethodReturnValueHandler</code></li><li>æœ€ç»ˆæ‰¾åˆ°<code>RequestResponseBodyMethodProcessor</code>èƒ½å¤„ç† æ ‡æ³¨äº†<code>@ResponseBody</code>æ³¨è§£çš„æ–¹æ³•</li><li><code>RequestResponseBodyMethodProcessor</code>è°ƒç”¨<code>writeWithMessageConverters</code>,åˆ©ç”¨<code>MessageConverter</code>æŠŠè¿”å›å€¼å†™å‡ºå»</li></ul></li><li><p><code>HttpMessageConverter</code>ä¼šå…ˆè¿›è¡Œå†…å®¹åå•†</p><ul><li>éå†æ‰€æœ‰çš„<code>MessageConverter</code>çœ‹è°æ”¯æŒè¿™ç§å†…å®¹ç±»å‹çš„æ•°æ®</li><li>é»˜è®¤<code>MessageConverter</code>æœ‰ä»¥ä¸‹:</li><li><img src="https://image.fu-jw.com/img/2023/07/01/649f825276881.webp"/></li><li>æœ€ç»ˆå› ä¸ºè¦<code>json</code>æ‰€ä»¥<code>MappingJackson2HttpMessageConverter</code>æ”¯æŒå†™å‡ºjson</li><li>jacksonç”¨<code>ObjectMapper</code>æŠŠå¯¹è±¡å†™å‡ºå»</li></ul></li></ul><h4 id="WebMvcAutoConfigurationæä¾›å‡ ç§é»˜è®¤HttpMessageConverters"><a href="#WebMvcAutoConfigurationæä¾›å‡ ç§é»˜è®¤HttpMessageConverters" class="headerlink" title="WebMvcAutoConfigurationæä¾›å‡ ç§é»˜è®¤HttpMessageConverters"></a>WebMvcAutoConfigurationæä¾›å‡ ç§é»˜è®¤HttpMessageConverters</h4><p><code>EnableWebMvcConfiguration</code>é€šè¿‡<code>addDefaultHttpMessageConverters</code>æ·»åŠ äº†é»˜è®¤çš„<code>MessageConverter</code>;<br>å¦‚ä¸‹:</p><ul><li><code>ByteArrayHttpMessageConverter</code>ï¼š æ”¯æŒå­—èŠ‚æ•°æ®è¯»å†™</li><li><code>StringHttpMessageConverter</code>: æ”¯æŒå­—ç¬¦ä¸²è¯»å†™</li><li><code>ResourceHttpMessageConverter</code>: æ”¯æŒèµ„æºè¯»å†™</li><li><code>ResourceRegionHttpMessageConverter</code>: æ”¯æŒåˆ†åŒºèµ„æºå†™å‡º</li><li><code>AllEncompassingFormHttpMessageConverter</code>: æ”¯æŒè¡¨å•xml&#x2F;jsonè¯»å†™</li><li><code>MappingJackson2HttpMessageConverter</code>: æ”¯æŒè¯·æ±‚å“åº”ä½“Jsonè¯»å†™</li></ul><blockquote><p>ç³»ç»Ÿæä¾›é»˜è®¤çš„MessageConverter åŠŸèƒ½æœ‰é™ï¼Œä»…ç”¨äºjsonæˆ–è€…æ™®é€šè¿”å›æ•°æ®ã€‚<br>é¢å¤–å¢åŠ æ–°çš„å†…å®¹åå•†åŠŸèƒ½ï¼Œå¿…é¡»å¢åŠ æ–°çš„HttpMessageConverter</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ğŸ¤–ğŸ¤–-æ‘˜è¦:&lt;br&gt;æœ¬æ–‡ä»‹ç»äº†HTTPå†…å®¹åå•†ï¼ŒåŒ…æ‹¬æœåŠ¡ç«¯é©±åŠ¨å‹å†…å®¹åå•†å’Œä»£ç†é©±åŠ¨å‹å†…å®¹åå•†ï¼Œå¹¶åˆ†æäº†SpringMVCå’ŒSpringBootçš„å†…å®¹åå•†æ–¹å¼ã€‚æ–‡ç« è¿˜é€šè¿‡ç¤ºä¾‹å’Œå›¾ç¤ºè¯´æ˜äº†å¦‚ä½•è¿›è¡ŒåŸºäºè¯·æ±‚å¤´å’ŒåŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†ï¼Œä»¥åŠå¦‚ä½•è¿›è¡Œæµ‹è¯•</summary>
      
    
    
    
    <category term="å­¦ä¹ " scheme="http://fu-jw.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="SpringBoot" scheme="http://fu-jw.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot Webå¼€å‘4-æ¨¡æ¿å¼•æ“</title>
    <link href="http://fu-jw.com/posts/3965340.html"/>
    <id>http://fu-jw.com/posts/3965340.html</id>
    <published>2023-07-01T00:00:00.000Z</published>
    <updated>2023-07-09T11:25:56.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ¤–ğŸ¤–-æ‘˜è¦:<br>æœ¬æ–‡ä»‹ç»äº†SpringBoot Webå¼€å‘ä¸­çš„æ¨¡æ¿å¼•æ“ï¼ŒåŒ…æ‹¬SpringMVCæ‰€æ”¯æŒçš„å¤šç§æ¨¡æ¿æŠ€æœ¯ï¼Œå¦‚Thymelafã€FreeMarkerå’ŒJSPç­‰ï¼Œä»¥åŠSpringBootè‡ªåŠ¨é…ç½®æ”¯æŒçš„æ¨¡æ¿å¼•æ“ã€‚åŒæ—¶è¿˜è¯¦ç»†é˜è¿°äº†å¦‚ä½•æ•´åˆThymeleafã€‚</p></blockquote><h1 id="SpringBoot-Webå¼€å‘4-æ¨¡æ¿å¼•æ“"><a href="#SpringBoot-Webå¼€å‘4-æ¨¡æ¿å¼•æ“" class="headerlink" title="SpringBoot Webå¼€å‘4-æ¨¡æ¿å¼•æ“"></a>SpringBoot Webå¼€å‘4-æ¨¡æ¿å¼•æ“</h1><h2 id="æ¨¡æ¿å¼•æ“"><a href="#æ¨¡æ¿å¼•æ“" class="headerlink" title="æ¨¡æ¿å¼•æ“"></a>æ¨¡æ¿å¼•æ“</h2><blockquote><p>é™¤äº†RESTWebæœåŠ¡ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨SpringMVCæ¥æä¾›åŠ¨æ€HTMLå†…å®¹ã€‚<br>SpringMVCæ”¯æŒå¤šç§æ¨¡æ¿æŠ€æœ¯ï¼ŒåŒ…æ‹¬Thymelafã€FreeMarkerå’ŒJSPã€‚<br>æ­¤å¤–ï¼Œè®¸å¤šå…¶ä»–æ¨¡æ¿å¼•æ“ä¹ŸåŒ…å«äº†å®ƒä»¬è‡ªå·±çš„SpringMVCé›†æˆã€‚</p></blockquote><p>SpringBootè‡ªåŠ¨é…ç½®æ”¯æŒçš„æ¨¡æ¿å¼•æ“æœ‰:</p><ul><li><a href="https://freemarker.apache.org/docs/">FreeMarker</a></li><li><a href="https://docs.groovy-lang.org/docs/next/html/documentation/template-engines.html#_the_markuptemplateengine">Groovy</a></li><li><a href="https://www.thymeleaf.org/">Thymeleaf</a></li><li><a href="https://mustache.github.io/">Mustache</a></li></ul><h3 id="æ•´åˆThymeleaf"><a href="#æ•´åˆThymeleaf" class="headerlink" title="æ•´åˆThymeleaf"></a>æ•´åˆThymeleaf</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç”±è‡ªåŠ¨é…ç½®åŸç†çŸ¥:</p><ol><li>å¼€å¯äº†<code>org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration</code>è‡ªåŠ¨é…ç½®</li><li>å±æ€§ç»‘å®šåœ¨<strong>ThymeleafProperties</strong>ä¸­ï¼Œå¯¹åº”é…ç½®æ–‡ä»¶<code>spring.thymeleaf</code>å†…å®¹</li><li>é»˜è®¤æƒ…å†µ,æ¨¡æ¿é¡µé¢åœ¨<code>classpath:/templates</code>æ–‡ä»¶å¤¹ä¸‹</li><li>é»˜è®¤æƒ…å†µ,æ¨¡æ¿é¡µé¢å‰ç¼€<code>classpath:/templates/</code></li><li>é»˜è®¤æƒ…å†µ,æ¨¡æ¿é¡µé¢åç¼€<code>.html</code></li><li>è¾¾åˆ°æ•ˆæœ: <code>classpath:/templates/</code> + é¡µé¢å + <code>.html</code></li></ol><blockquote><p>ç›®å‰å¤§å¤šæ•°æ˜¯å‰ååˆ†ç¦»å¼€å‘,ç”±ä¸“ä¸šçš„å‰ç«¯æ¡†æ¶å®Œæˆ,æ¨¡æ¿å¼•æ“éƒ¨åˆ†ç”¨å¤„ä¸å¤§.</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ğŸ¤–ğŸ¤–-æ‘˜è¦:&lt;br&gt;æœ¬æ–‡ä»‹ç»äº†SpringBoot Webå¼€å‘ä¸­çš„æ¨¡æ¿å¼•æ“ï¼ŒåŒ…æ‹¬SpringMVCæ‰€æ”¯æŒçš„å¤šç§æ¨¡æ¿æŠ€æœ¯ï¼Œå¦‚Thymelafã€FreeMarkerå’ŒJSPç­‰ï¼Œä»¥åŠSpringBootè‡ªåŠ¨é…ç½®æ”¯æŒçš„æ¨¡æ¿å¼•æ“ã€‚åŒæ—¶è¿˜è¯¦ç»†é˜è¿°äº†å¦‚ä½•æ•´åˆ</summary>
      
    
    
    
    <category term="å­¦ä¹ " scheme="http://fu-jw.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="SpringBoot" scheme="http://fu-jw.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot Webå¼€å‘5-é”™è¯¯å¤„ç†</title>
    <link href="http://fu-jw.com/posts/41ac7873.html"/>
    <id>http://fu-jw.com/posts/41ac7873.html</id>
    <published>2023-07-01T00:00:00.000Z</published>
    <updated>2023-07-09T11:25:56.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ¤–ğŸ¤–-æ‘˜è¦:<br>æœ¬æ–‡ä»‹ç»äº†SpringBoot Webä¸­çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼ŒåŒ…æ‹¬é»˜è®¤å¤„ç†æœºåˆ¶å’ŒSpringMVCçš„å¤„ç†æ–¹å¼ã€‚å¹¶è¯¦ç»†åˆ†æäº†SpringBooté”™è¯¯åŸç†ä»¥åŠå®ƒçš„é…ç½®ç±»<code>ErrorMvcAutoConfiguration</code>ï¼Œæœ€åç»™å‡ºäº†æœ€ä½³å®è·µå»ºè®®ã€‚</p></blockquote><h1 id="SpringBoot-Webå¼€å‘5-é”™è¯¯å¤„ç†"><a href="#SpringBoot-Webå¼€å‘5-é”™è¯¯å¤„ç†" class="headerlink" title="SpringBoot Webå¼€å‘5-é”™è¯¯å¤„ç†"></a>SpringBoot Webå¼€å‘5-é”™è¯¯å¤„ç†</h1><h2 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h2><h3 id="é»˜è®¤æœºåˆ¶"><a href="#é»˜è®¤æœºåˆ¶" class="headerlink" title="é»˜è®¤æœºåˆ¶"></a>é»˜è®¤æœºåˆ¶</h3><p>SpringBootåœ¨<strong>webåœºæ™¯</strong>ä¸‹,å½“åº”ç”¨ç¨‹åºå‘ç”Ÿé”™è¯¯æˆ–å¼‚å¸¸æ—¶,SpringBootä¼šè‡ªåŠ¨åº”ç”¨<code>ErrorMvcAutoConfiguration</code>è¿›è¡Œé…ç½®.</p><img src="https://image.fu-jw.com/img/2023/07/01/649f81ec7ae0a.webp"/><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Load before the main WebMvcAutoConfiguration so that the error View is available</span></span><br><span class="line"><span class="comment">// åœ¨WebMvcAutoConfigurationè‡ªåŠ¨è£…é…ä¹‹å‰</span></span><br><span class="line"><span class="meta">@AutoConfiguration(before = WebMvcAutoConfiguration.class)</span></span><br><span class="line"><span class="comment">// æ¡ä»¶:æ™®é€šçš„servlet webç±»å‹</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span></span><br><span class="line"><span class="comment">// æ¡ä»¶:æœ‰Servletå’ŒDispatcherServletç±»</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123;Servlet.class, DispatcherServlet.class&#125;)</span></span><br><span class="line"><span class="comment">// ç»‘å®šé…ç½®æ–‡ä»¶:server.*å’Œspring.mvc.*</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123;ServerProperties.class, WebMvcProperties.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ErrorMvcAutoConfiguration</span> &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸¤å¤§å¤„ç†æœºåˆ¶:<br>æœºåˆ¶ä¸€: <strong>SpringBoot</strong>ä¼šè‡ªé€‚åº”å¤„ç†é”™è¯¯,å“åº”é¡µé¢æˆ–<strong>JSON</strong>æ•°æ®(å†…å®¹åå•†)</p><img alt="åŒä¸€è¯·æ±‚-æµè§ˆå™¨è¿”å›ç™½é¡µ" src="https://image.fu-jw.com/img/2023/07/01/649ff3f00a98a.webp"/><img alt="åŒä¸€è¯·æ±‚-å®¢æˆ·ç«¯è¿”å›JSON" src="https://image.fu-jw.com/img/2023/07/01/649ff431580c1.webp"/><img alt="åŒä¸€è¯·æ±‚-å®¢æˆ·ç«¯ä¹Ÿå¯è®¾ç½®è¿”å›XML" src="https://image.fu-jw.com/img/2023/07/01/649ff45dc52e3.webp"/><p>æœºåˆ¶äºŒ: <strong>SpringMVC</strong>çš„é”™è¯¯å¤„ç†æœºåˆ¶ä¾ç„¶ä¿ç•™,MVCå¤„ç†ä¸äº†,æ‰ä¼šäº¤ç»™bootè¿›è¡Œå¤„ç†</p><img alt="SpringBooté”™è¯¯å¤„ç†æœºåˆ¶" src="https://image.fu-jw.com/img/2023/07/03/64a22e201bcbb.webp"/><h3 id="SpringMVCå¤„ç†é”™è¯¯"><a href="#SpringMVCå¤„ç†é”™è¯¯" class="headerlink" title="SpringMVCå¤„ç†é”™è¯¯"></a>SpringMVCå¤„ç†é”™è¯¯</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ErrorController</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æµ‹è¯•MVCçš„é”™è¯¯å¤„ç†æœºåˆ¶</span></span><br><span class="line"><span class="comment">   * é»˜è®¤æƒ…å†µä¸‹--ä¸å¤„ç†é”™è¯¯:</span></span><br><span class="line"><span class="comment">   * æµè§ˆå™¨è¿”å›ç™½é¡µ,å› ä¸ºè¯·æ±‚å¤´ä¸­: Accept:text/html</span></span><br><span class="line"><span class="comment">   * ç§»åŠ¨ç«¯postmanè¿”å›JSON.å› ä¸ºè¯·æ±‚å¤´ä¸­: (Accept:* æ‰€æœ‰ç±»å‹,ä¼˜å…ˆJSON)</span></span><br><span class="line"><span class="comment">   * è‡ªå·±å¤„ç†é”™è¯¯: handleException()</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@GetMapping(&quot;testError&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">testError</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é”™è¯¯å‡ºç°</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">12</span> / <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;testError&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * è‡ªå®šä¹‰å¤„ç†æ‰€æœ‰é”™è¯¯</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ExceptionHandler</span> å¯ä»¥æ ‡è¯†ä¸€ä¸ªæ–¹æ³•, é»˜è®¤åªèƒ½å¤„ç†è¿™ä¸ªç±»å‘ç”Ÿçš„æŒ‡å®šé”™è¯¯</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ControllerAdvice</span> AOPæ€æƒ³, å¯ä»¥ç»Ÿä¸€å¤„ç†æ‰€æœ‰æ–¹æ³•, å¦‚ GlobalExceptionHandler.java</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@ResponseBody</span></span><br><span class="line">  <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">handleException</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;é”™è¯¯å·²å‘ç”Ÿ,åŸå› :&quot;</span> + e.getMessage();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img alt="mvcå¤„ç†é”™è¯¯" src="https://image.fu-jw.com/img/2023/07/03/64a232aac8fa8.png"/><p>ç»Ÿä¸€é”™è¯¯å¤„ç†:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span> <span class="comment">// ç»Ÿä¸€å¤„ç†æ‰€æœ‰Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * è‡ªå®šä¹‰å¤„ç†æ‰€æœ‰é”™è¯¯</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ExceptionHandler</span> å¯ä»¥æ ‡è¯†ä¸€ä¸ªæ–¹æ³•, é»˜è®¤åªèƒ½å¤„ç†è¿™ä¸ªç±»å‘ç”Ÿçš„æŒ‡å®šé”™è¯¯</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@ControllerAdvice</span> AOPæ€æƒ³, å¯ä»¥ç»Ÿä¸€å¤„ç†æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@ResponseBody</span></span><br><span class="line">  <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">handleException</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ç»Ÿä¸€å¤„ç†,é”™è¯¯å·²å‘ç”Ÿ,åŸå› :&quot;</span> + e.getMessage();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img alt="mvcç»Ÿä¸€å¤„ç†é”™è¯¯" src="https://image.fu-jw.com/img/2023/07/03/64a232c9bbac2.png"/><h3 id="SpringBooté”™è¯¯åŸç†æµ…æ"><a href="#SpringBooté”™è¯¯åŸç†æµ…æ" class="headerlink" title="SpringBooté”™è¯¯åŸç†æµ…æ"></a>SpringBooté”™è¯¯åŸç†æµ…æ</h3><p>è‡ªåŠ¨é…ç½®ç±»<code>ErrorMvcAutoConfiguration</code>, ä¸»è¦åŒ…å«ä»¥ä¸‹åŠŸèƒ½:</p><h4 id="æ³¨å†Œç»„ä»¶-BasicErrorController"><a href="#æ³¨å†Œç»„ä»¶-BasicErrorController" class="headerlink" title="æ³¨å†Œç»„ä»¶: BasicErrorController"></a>æ³¨å†Œç»„ä»¶: BasicErrorController</h4><p>è¿™æ˜¯ä¸€ä¸ªé»˜è®¤çš„é”™è¯¯å¤„ç†æ§åˆ¶å™¨,ç”¨äºå¤„ç†ä¸€èˆ¬çš„é”™è¯¯è¯·æ±‚.</p><p>å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®:<code>server.error.path=/error</code>(é»˜è®¤å€¼)<br>å½“å‘ç”Ÿé”™è¯¯ä»¥å,å°†SpringMVCä¸èƒ½å¤„ç†çš„é”™è¯¯è¯·æ±‚è½¬å‘ç»™<code>/error</code>è¿›è¡Œå¤„ç†</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="comment">// å¯ä»¥å¤„ç†é…ç½®æ–‡ä»¶ä¸­:server.error.path çš„æ˜ å°„</span></span><br><span class="line"><span class="comment">// æˆ–è€…å¤„ç†é…ç½®æ–‡ä»¶ä¸­:error.path çš„æ˜ å°„</span></span><br><span class="line"><span class="comment">// ä»¥ä¸Šéƒ½æ²¡é…ç½®,å°±ä¼šå°†è¯·æ±‚æ˜ å°„åˆ°: /error</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;$&#123;server.error.path:$&#123;error.path:/error&#125;&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BasicErrorController</span> <span class="keyword">extends</span> <span class="title class_">AbstractErrorController</span> &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒä¼šæ ¹æ®è¯·æ±‚çš„<code>Accept</code>å¤´éƒ¨ä¿¡æ¯è¿”å›å¯¹åº”çš„é”™è¯¯å“åº”,æ¯”å¦‚<strong>JSON</strong>,<strong>XML</strong>æˆ–<strong>HTML</strong>æ ¼å¼.<br><strong>å†…å®¹åå•†æœºåˆ¶</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &quot;text/html&quot;</span></span><br><span class="line"><span class="comment">// è¿”å›htmlé¡µé¢</span></span><br><span class="line"><span class="meta">@RequestMapping(produces = MediaType.TEXT_HTML_VALUE)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">errorHtml</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span>&#123;</span><br><span class="line">    <span class="comment">// è·å–è¯·æ±‚çš„çŠ¶æ€ç </span></span><br><span class="line">    HttpStatus status=getStatus(request);</span><br><span class="line">    Map&lt;String, Object&gt; model=Collections</span><br><span class="line">    .unmodifiableMap(getErrorAttributes(request,getErrorAttributeOptions(request,MediaType.TEXT_HTML)));</span><br><span class="line">    response.setStatus(status.value());</span><br><span class="line">    <span class="comment">// å¾—åˆ°è§£æçš„é”™è¯¯è§†å›¾</span></span><br><span class="line">    ModelAndView modelAndView=resolveErrorView(request,response,status,model);</span><br><span class="line">    <span class="comment">// è¿”å›ä¸Šé¢è§£æçš„è§†å›¾,æˆ–è€…æ–°å»ºä¸€ä¸ªerrorè§†å›¾(SpringBooté»˜è®¤æœ‰ä¸€ä¸ªerroré¡µé¢,çŠ¶æ€ç 999)</span></span><br><span class="line">    <span class="keyword">return</span>(modelAndView!=<span class="literal">null</span>)?modelAndView:<span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="string">&quot;error&quot;</span>,model);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å› ResponseEntity,å³JSONæ•°æ®</span></span><br><span class="line"><span class="meta">@RequestMapping</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;Map&lt;String, Object&gt;&gt;error(HttpServletRequest request)&#123;</span><br><span class="line">    HttpStatus status=getStatus(request);</span><br><span class="line">    <span class="keyword">if</span>(status==HttpStatus.NO_CONTENT)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(status);</span><br><span class="line">    &#125;</span><br><span class="line">    Map&lt;String, Object&gt; body=getErrorAttributes(request,getErrorAttributeOptions(request,MediaType.ALL));</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(body,status);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é”™è¯¯è§†å›¾è§£æ:</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1ã€è§£æé”™è¯¯çš„è‡ªå®šä¹‰è§†å›¾åœ°å€</span></span><br><span class="line">ModelAndView modelAndView=resolveErrorView(request,response,status,model);</span><br><span class="line"><span class="comment">//2ã€å¦‚æœè§£æä¸åˆ°é”™è¯¯é¡µé¢çš„åœ°å€ï¼Œé»˜è®¤çš„é”™è¯¯é¡µå°±æ˜¯ error</span></span><br><span class="line"><span class="keyword">return</span>(modelAndView!=<span class="literal">null</span>)?modelAndView:<span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="string">&quot;error&quot;</span>,model);</span><br></pre></td></tr></table></figure><p><strong>1.è§£æé”™è¯¯è§†å›¾:</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> ModelAndView <span class="title function_">resolveErrorView</span><span class="params">(HttpServletRequest request,HttpServletResponse response,HttpStatus status,Map&lt;String, Object&gt; model)</span>&#123;</span><br><span class="line">  <span class="comment">// éå†é”™è¯¯è§†å›¾è§£æå™¨:errorViewResolvers</span></span><br><span class="line">  <span class="keyword">for</span>(ErrorViewResolver resolver:<span class="built_in">this</span>.errorViewResolvers)&#123;</span><br><span class="line">    ModelAndView modelAndView=resolver.resolveErrorView(request,status,model);</span><br><span class="line">    <span class="keyword">if</span>(modelAndView!=<span class="literal">null</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è‡ªåŠ¨é…ç½®ç±»,ä¼šå°†<strong>é»˜è®¤çš„é”™è¯¯è§†å›¾è§£æå™¨</strong>æ”¾åœ¨å®¹å™¨ä¸­</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="comment">// ç»‘å®šé…ç½®æ–‡ä»¶ä¸­ web.* å’Œ web.mvc.*</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123;WebProperties.class, WebMvcProperties.class&#125;)</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">DefaultErrorViewResolverConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> ApplicationContext applicationContext;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> Resources resources;</span><br><span class="line"></span><br><span class="line">  DefaultErrorViewResolverConfiguration(ApplicationContext applicationContext, WebProperties webProperties) &#123;</span><br><span class="line">    <span class="built_in">this</span>.applicationContext = applicationContext;</span><br><span class="line">    <span class="built_in">this</span>.resources = webProperties.getResources();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="meta">@ConditionalOnBean(DispatcherServlet.class)</span></span><br><span class="line">  <span class="meta">@ConditionalOnMissingBean(ErrorViewResolver.class)</span></span><br><span class="line">  DefaultErrorViewResolver <span class="title function_">conventionErrorViewResolver</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// åœ¨å®¹å™¨ä¸­æ”¾å…¥é»˜è®¤é”™è¯¯è§†å›¾è§£æå™¨</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DefaultErrorViewResolver</span>(<span class="built_in">this</span>.applicationContext, <span class="built_in">this</span>.resources);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é»˜è®¤çš„é”™è¯¯è§†å›¾è§£æè¿‡ç¨‹:</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">resolveErrorView</span><span class="params">(HttpServletRequest request,HttpStatus status,Map&lt;String, Object&gt; model)</span>&#123;</span><br><span class="line">  <span class="comment">// 1. è·å–çŠ¶æ€ç </span></span><br><span class="line">  <span class="comment">// 2. æ ¹æ®çŠ¶æ€ç è§£æé”™è¯¯è§†å›¾(å¦‚: 404 500 ç­‰)    </span></span><br><span class="line">  ModelAndView modelAndView=resolve(String.valueOf(status.value()),model);</span><br><span class="line">  <span class="comment">// 3. çŠ¶æ€ç æ²¡æœ‰ç²¾ç¡®åŒ¹é…,åˆ™æ¨¡ç³ŠåŒ¹é…(å¦‚:4xx 5xx, æ³¨æ„åªæœ‰è¿™ä¿©)</span></span><br><span class="line">  <span class="keyword">if</span>(modelAndView==<span class="literal">null</span>&amp;&amp;SERIES_VIEWS.containsKey(status.series()))&#123;</span><br><span class="line">    modelAndView=resolve(SERIES_VIEWS.get(status.series()),model);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å…·ä½“çš„è§£æè¿‡ç¨‹</span></span><br><span class="line"><span class="keyword">private</span> ModelAndView <span class="title function_">resolve</span><span class="params">(String viewName,Map&lt;String, Object&gt; model)</span>&#123;</span><br><span class="line">  <span class="comment">// é”™è¯¯è§†å›¾å: error/404 æˆ– error/4xx    </span></span><br><span class="line">  String errorViewName=<span class="string">&quot;error/&quot;</span>+viewName;</span><br><span class="line">  TemplateAvailabilityProvider provider=<span class="built_in">this</span>.templateAvailabilityProviders.getProvider(errorViewName,<span class="built_in">this</span>.applicationContext);</span><br><span class="line">  <span class="keyword">if</span>(provider!=<span class="literal">null</span>)&#123;</span><br><span class="line">    <span class="comment">// æœ‰å°±è¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>(errorViewName,model);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ²¡æœ‰, ç»§ç»­</span></span><br><span class="line">  <span class="keyword">return</span> resolveResource(errorViewName,model);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§ç»­è§£æé”™è¯¯è§†å›¾, åœ¨é™æ€èµ„æºç›®å½•ä¸‹æŸ¥æ‰¾</span></span><br><span class="line"><span class="keyword">private</span> ModelAndView <span class="title function_">resolveResource</span><span class="params">(String viewName,Map&lt;String, Object&gt; model)</span>&#123;</span><br><span class="line">  <span class="comment">// éå†å››ä¸ªé™æ€èµ„æºç›®å½•:classpath:/META-INF/resources/&quot;,&quot;classpath:/resources/&quot;,</span></span><br><span class="line">  <span class="comment">// &quot;classpath:/static/&quot;, &quot;classpath:/public/    </span></span><br><span class="line">  <span class="keyword">for</span>(String location:<span class="built_in">this</span>.resources.getStaticLocations())&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">      Resource resource=<span class="built_in">this</span>.applicationContext.getResource(location);</span><br><span class="line">      resource=resource.createRelative(viewName+<span class="string">&quot;.html&quot;</span>);</span><br><span class="line">      <span class="keyword">if</span>(resource.exists())&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="keyword">new</span> <span class="title class_">HtmlResourceView</span>(resource),model);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span>(Exception ex)&#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2.è§£æä¸åˆ°é”™è¯¯è§†å›¾:</strong><br>ç²¾ç¡®çŠ¶æ€ç ä»¥åŠæ¨¡ç³ŠçŠ¶æ€ç éƒ½æ²¡æœ‰åŒ¹é…æ—¶,åˆ™æ˜ å°„åˆ°errorè§†å›¾</p><p>åœ¨templateç›®å½•ä¸‹åˆ›å»º<code>error.html</code>å°±ä¼šè¿”å›(æ³¨æ„:å°†ä¸Šé¢ç»Ÿä¸€é”™è¯¯å¤„ç†æ³¨é‡Š)</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">æ¨¡æ¿: error é¡µ</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ:</p><img alt="erroré¡µ" src="https://image.fu-jw.com/img/2023/07/03/64a259a289e8c.png"/><p><strong>å¦‚æœerrorè§†å›¾é¡µæ²¡æœ‰:</strong></p><p>è‡ªåŠ¨é…ç½®ç±»<code>ErrorMvcAutoConfiguration</code>,åœ¨å®¹å™¨ä¸­æ”¾å…¥äº†<code>error</code>ç»„ä»¶,æä¾›äº†é»˜è®¤ç™½é¡µåŠŸèƒ½:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(prefix = &quot;server.error.whitelabel&quot;, name = &quot;enabled&quot;, matchIfMissing = true)</span></span><br><span class="line"><span class="meta">@Conditional(ErrorTemplateMissingCondition.class)</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">WhitelabelErrorViewConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">StaticView</span> <span class="variable">defaultErrorView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StaticView</span>();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Bean(name = &quot;error&quot;)</span></span><br><span class="line">  <span class="meta">@ConditionalOnMissingBean(name = &quot;error&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> View <span class="title function_">defaultErrorView</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.defaultErrorView;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// If the user adds @EnableWebMvc then the bean name view resolver from</span></span><br><span class="line">  <span class="comment">// WebMvcAutoConfiguration disappears, so add it back in to avoid disappointment.</span></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line">  <span class="keyword">public</span> BeanNameViewResolver <span class="title function_">beanNameViewResolver</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">BeanNameViewResolver</span> <span class="variable">resolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BeanNameViewResolver</span>();</span><br><span class="line">    resolver.setOrder(Ordered.LOWEST_PRECEDENCE - <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">return</span> resolver;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºç™½é¡µ:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">StaticView</span> <span class="keyword">implements</span> <span class="title class_">View</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">MediaType</span> <span class="variable">TEXT_HTML_UTF8</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MediaType</span>(<span class="string">&quot;text&quot;</span>, <span class="string">&quot;html&quot;</span>, StandardCharsets.UTF_8);</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Log</span> <span class="variable">logger</span> <span class="operator">=</span> LogFactory.getLog(StaticView.class);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">render</span><span class="params">(Map&lt;String, ?&gt; model, HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">          <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="keyword">if</span> (response.isCommitted()) &#123;</span><br><span class="line">      <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> getMessage(model);</span><br><span class="line">      logger.error(message);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    response.setContentType(TEXT_HTML_UTF8.toString());</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="type">Object</span> <span class="variable">timestamp</span> <span class="operator">=</span> model.get(<span class="string">&quot;timestamp&quot;</span>);</span><br><span class="line">    <span class="type">Object</span> <span class="variable">message</span> <span class="operator">=</span> model.get(<span class="string">&quot;message&quot;</span>);</span><br><span class="line">    <span class="type">Object</span> <span class="variable">trace</span> <span class="operator">=</span> model.get(<span class="string">&quot;trace&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (response.getContentType() == <span class="literal">null</span>) &#123;</span><br><span class="line">      response.setContentType(getContentType());</span><br><span class="line">    &#125;</span><br><span class="line">    builder.append(<span class="string">&quot;&lt;html&gt;&lt;body&gt;&lt;h1&gt;Whitelabel Error Page&lt;/h1&gt;&quot;</span>)</span><br><span class="line">            .append(<span class="string">&quot;&lt;p&gt;This application has no explicit mapping for /error, so you are seeing this as a fallback.&lt;/p&gt;&quot;</span>)</span><br><span class="line">            .append(<span class="string">&quot;&lt;div id=&#x27;created&#x27;&gt;&quot;</span>)</span><br><span class="line">            .append(timestamp)</span><br><span class="line">            .append(<span class="string">&quot;&lt;/div&gt;&quot;</span>)</span><br><span class="line">            .append(<span class="string">&quot;&lt;div&gt;There was an unexpected error (type=&quot;</span>)</span><br><span class="line">            .append(htmlEscape(model.get(<span class="string">&quot;error&quot;</span>)))</span><br><span class="line">            .append(<span class="string">&quot;, status=&quot;</span>)</span><br><span class="line">            .append(htmlEscape(model.get(<span class="string">&quot;status&quot;</span>)))</span><br><span class="line">            .append(<span class="string">&quot;).&lt;/div&gt;&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (message != <span class="literal">null</span>) &#123;</span><br><span class="line">      builder.append(<span class="string">&quot;&lt;div&gt;&quot;</span>).append(htmlEscape(message)).append(<span class="string">&quot;&lt;/div&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (trace != <span class="literal">null</span>) &#123;</span><br><span class="line">      builder.append(<span class="string">&quot;&lt;div style=&#x27;white-space:pre-wrap;&#x27;&gt;&quot;</span>).append(htmlEscape(trace)).append(<span class="string">&quot;&lt;/div&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    builder.append(<span class="string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);</span><br><span class="line">    response.getWriter().append(builder.toString());</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="å°ç»“ä¸€ä¸‹"><a href="#å°ç»“ä¸€ä¸‹" class="headerlink" title="å°ç»“ä¸€ä¸‹"></a>å°ç»“ä¸€ä¸‹</h3><p>å…ˆå°è¯•è§£æé”™è¯¯é¡µ, è§£æå¤±è´¥åˆ™åœ¨é™æ€èµ„æºç›®å½•ä¸‹æŸ¥æ‰¾</p><ol><li><strong>è§£æ</strong>ä¸€ä¸ªé”™è¯¯é¡µ</li></ol><ul><li>å¦‚æœå‘ç”Ÿäº†500ã€404ã€503ã€403 è¿™äº›é”™è¯¯<ul><li>å¦‚æœæœ‰æ¨¡æ¿å¼•æ“ï¼Œé»˜è®¤åœ¨<code>classpath:/templates/error/ç²¾ç¡®ç .html</code></li><li>å¦‚æœæ²¡æœ‰æ¨¡æ¿å¼•æ“ï¼Œåœ¨é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾<code>ç²¾ç¡®ç .html</code></li></ul></li><li>å¦‚æœåŒ¹é…ä¸åˆ°<code>ç²¾ç¡®ç .html</code>è¿™äº›ç²¾ç¡®çš„é”™è¯¯é¡µï¼Œå°±å»æ‰¾<code>5xx.html</code>, <code>4xx.html</code><strong>æ¨¡ç³ŠåŒ¹é…</strong><ul><li>å¦‚æœæœ‰æ¨¡æ¿å¼•æ“ï¼Œé»˜è®¤åœ¨<code>classpath:/templates/error/5xx.html</code></li><li>å¦‚æœæ²¡æœ‰æ¨¡æ¿å¼•æ“ï¼Œåœ¨é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾<code>5xx.html</code></li></ul></li></ul><ol start="2"><li>å¦‚æœæ¨¡æ¿å¼•æ“è·¯å¾„<code>templates</code>ä¸‹æœ‰<code>error.html</code>é¡µé¢, å°±ç›´æ¥æ¸²æŸ“</li></ol><h3 id="è‡ªå®šä¹‰é”™è¯¯å“åº”"><a href="#è‡ªå®šä¹‰é”™è¯¯å“åº”" class="headerlink" title="è‡ªå®šä¹‰é”™è¯¯å“åº”"></a>è‡ªå®šä¹‰é”™è¯¯å“åº”</h3><ul><li>è‡ªå®šä¹‰jsonå“åº”<ul><li>ä½¿ç”¨@ControllerAdvice + @ExceptionHandler è¿›è¡Œç»Ÿä¸€å¼‚å¸¸å¤„ç†</li></ul></li><li>è‡ªå®šä¹‰é¡µé¢å“åº”<ul><li>æ ¹æ®bootçš„é”™è¯¯é¡µé¢è§„åˆ™ï¼Œè‡ªå®šä¹‰é¡µé¢æ¨¡æ¿</li></ul></li></ul><h3 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h3><ul><li>å‰ååˆ†ç¦»<ul><li>åå°å‘ç”Ÿçš„æ‰€æœ‰é”™è¯¯, <code>@ControllerAdvice</code> + <code>@ExceptionHandler</code>è¿›è¡Œç»Ÿä¸€å¼‚å¸¸å¤„ç†</li></ul></li><li>æœåŠ¡ç«¯é¡µé¢æ¸²æŸ“<ul><li>ä¸å¯é¢„çŸ¥çš„é”™è¯¯,HTTPç è¡¨ç¤ºçš„æœåŠ¡å™¨ç«¯æˆ–å®¢æˆ·ç«¯é”™è¯¯<ul><li>ç»™<code>classpath:/templates/error/</code>ä¸‹é¢ï¼Œæ”¾å¸¸ç”¨ç²¾ç¡®çš„é”™è¯¯ç é¡µé¢ã€‚<code>500.html</code>ï¼Œ<code>404.html</code></li><li>ç»™<code>classpath:/templates/error/</code>ä¸‹é¢ï¼Œæ”¾é€šç”¨æ¨¡ç³ŠåŒ¹é…çš„é”™è¯¯ç é¡µé¢ã€‚ <code>5xx.html</code>ï¼Œ<code>4xx.html</code></li></ul></li><li>å‘ç”Ÿä¸šåŠ¡é”™è¯¯<ul><li><strong>æ ¸å¿ƒä¸šåŠ¡</strong>, æ¯ä¸€ç§é”™è¯¯, éƒ½åº”è¯¥ä»£ç æ§åˆ¶, è·³è½¬åˆ°è‡ªå·±<strong>å®šåˆ¶çš„é”™è¯¯é¡µ</strong></li><li><strong>é€šç”¨ä¸šåŠ¡</strong>, <code>classpath:/templates/error.html</code>é¡µé¢, æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</li></ul></li></ul></li></ul><p>æ— è®ºæ˜¯è¿”å›é¡µé¢æˆ–è€…JSONæ•°æ®, å¯ç”¨çš„<strong>Model</strong>æ•°æ®éƒ½ä¸€æ ·, å¦‚ä¸‹:<br><img alt="model" src="https://image.fu-jw.com/img/2023/07/03/64a2742fd9f6c.png"/></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ğŸ¤–ğŸ¤–-æ‘˜è¦:&lt;br&gt;æœ¬æ–‡ä»‹ç»äº†SpringBoot Webä¸­çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼ŒåŒ…æ‹¬é»˜è®¤å¤„ç†æœºåˆ¶å’ŒSpringMVCçš„å¤„ç†æ–¹å¼ã€‚å¹¶è¯¦ç»†åˆ†æäº†SpringBooté”™è¯¯åŸç†ä»¥åŠå®ƒçš„é…ç½®ç±»&lt;code&gt;ErrorMvcAutoConfiguration&lt;/</summary>
      
    
    
    
    <category term="å­¦ä¹ " scheme="http://fu-jw.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="SpringBoot" scheme="http://fu-jw.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot Webå¼€å‘6-åµŒå…¥å¼å®¹å™¨</title>
    <link href="http://fu-jw.com/posts/128d12a9.html"/>
    <id>http://fu-jw.com/posts/128d12a9.html</id>
    <published>2023-07-01T00:00:00.000Z</published>
    <updated>2023-07-09T11:25:56.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ¤–ğŸ¤–-æ‘˜è¦:<br>æœ¬æ–‡ä»‹ç»äº†SpringBoot Webå¼€å‘ä¸­çš„åµŒå…¥å¼å®¹å™¨ã€‚è®²è§£äº†Servletå®¹å™¨åŠå…¶ä¸‰å¤§ç»„ä»¶ï¼Œä»‹ç»äº†åµŒå…¥å¼æœåŠ¡å™¨Tomcatã€Jettyã€Undertowçš„è‡ªåŠ¨é…ç½®åŸç†åŠTomcatå®¹å™¨åˆ›å»ºçš„å…·ä½“æ–¹æ³•ã€‚æœ€åï¼Œæ–‡ç« ä¹Ÿç¤ºèŒƒäº†å¦‚ä½•åœ¨é¡¹ç›®ä¸­åˆ‡æ¢æœåŠ¡å™¨ã€‚</p></blockquote><h1 id="SpringBoot-Webå¼€å‘6-åµŒå…¥å¼å®¹å™¨"><a href="#SpringBoot-Webå¼€å‘6-åµŒå…¥å¼å®¹å™¨" class="headerlink" title="SpringBoot Webå¼€å‘6-åµŒå…¥å¼å®¹å™¨"></a>SpringBoot Webå¼€å‘6-åµŒå…¥å¼å®¹å™¨</h1><h2 id="åµŒå…¥å¼å®¹å™¨"><a href="#åµŒå…¥å¼å®¹å™¨" class="headerlink" title="åµŒå…¥å¼å®¹å™¨"></a>åµŒå…¥å¼å®¹å™¨</h2><p>Servletå®¹å™¨ï¼šç®¡ç†ã€è¿è¡ŒServletç»„ä»¶çš„ç¯å¢ƒï¼Œä¸€èˆ¬æŒ‡æœåŠ¡å™¨</p><p>Servletä¸‰å¤§ç»„ä»¶:</p><ul><li>Servlet, å¤„ç†è¯·æ±‚</li><li>Filter, è¿‡æ»¤è¯·æ±‚</li><li>Listener, ç›‘å¬è¯·æ±‚</li></ul><h3 id="è‡ªåŠ¨é…ç½®åŸç†æµ…æ"><a href="#è‡ªåŠ¨é…ç½®åŸç†æµ…æ" class="headerlink" title="è‡ªåŠ¨é…ç½®åŸç†æµ…æ"></a>è‡ªåŠ¨é…ç½®åŸç†æµ…æ</h3><p>å…ˆä»è‡ªåŠ¨é…ç½®ç±»å¼€å§‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@AutoConfiguration(after = SslAutoConfiguration.class)</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)</span></span><br><span class="line"><span class="comment">// ç”Ÿæ•ˆæ¡ä»¶:å®ç°ServletRequestæ¥å£çš„Servletè¯·æ±‚</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(ServletRequest.class)</span></span><br><span class="line"><span class="comment">// ç”Ÿæ•ˆæ¡ä»¶:æ˜¯SERVLETç±»å‹çš„ç¨‹åº</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span></span><br><span class="line"><span class="comment">// ç»‘å®šé…ç½®æ–‡ä»¶, server.*</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(ServerProperties.class)</span></span><br><span class="line"><span class="comment">// æ‰¹é‡å¯¼å…¥ä¸€äº›åµŒå…¥å¼æœåŠ¡å™¨ç±»</span></span><br><span class="line"><span class="meta">@Import(&#123;ServletWebServerFactoryAutoConfiguration.BeanPostProcessorsRegistrar.class,</span></span><br><span class="line"><span class="meta">        ServletWebServerFactoryConfiguration.EmbeddedTomcat.class,</span></span><br><span class="line"><span class="meta">        ServletWebServerFactoryConfiguration.EmbeddedJetty.class,</span></span><br><span class="line"><span class="meta">        ServletWebServerFactoryConfiguration.EmbeddedUndertow.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletWebServerFactoryAutoConfiguration</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åµŒå…¥å¼çš„ä¸‰å¤§æœåŠ¡å™¨:<code>Tomcat</code>ã€<code>Jetty</code>ã€<code>Undertow</code></p><ul><li>å¯¼å…¥<code>Tomcat</code>ã€<code>Jetty</code>ã€<code>Undertow</code>éƒ½æœ‰æ¡ä»¶æ³¨è§£(ç³»ç»Ÿä¸­æœ‰å¯¹åº”çš„ç±»æ‰è¡Œ,å¯¼åŒ…å³å¯)</li><li>é»˜è®¤<code>Tomcat</code>é…ç½®ç”Ÿæ•ˆ.<strong>webåœºæ™¯</strong>é»˜è®¤å¯¼å…¥<code>spring-boot-starter-tomcat</code></li><li><code>Tomcat</code>é…ç½®ç”Ÿæ•ˆå,ä¼šåœ¨å®¹å™¨ä¸­æ”¾å…¥<code>TomcatServletWebServerFactory</code>ç»„ä»¶,ç”¨äºåˆ›å»ºå®¹å™¨çš„å·¥å‚ç±»</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ServletWebServerFactoryConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line">  <span class="meta">@ConditionalOnClass(&#123;Servlet.class, Tomcat.class, UpgradeProtocol.class&#125;)</span></span><br><span class="line">  <span class="meta">@ConditionalOnMissingBean(value = ServletWebServerFactory.class, search = SearchStrategy.CURRENT)</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">EmbeddedTomcat</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    TomcatServletWebServerFactory <span class="title function_">tomcatServletWebServerFactory</span><span class="params">(</span></span><br><span class="line"><span class="params">            ObjectProvider&lt;TomcatConnectorCustomizer&gt; connectorCustomizers,</span></span><br><span class="line"><span class="params">            ObjectProvider&lt;TomcatContextCustomizer&gt; contextCustomizers,</span></span><br><span class="line"><span class="params">            ObjectProvider&lt;TomcatProtocolHandlerCustomizer&lt;?&gt;&gt; protocolHandlerCustomizers)</span> &#123;</span><br><span class="line">      <span class="type">TomcatServletWebServerFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TomcatServletWebServerFactory</span>();</span><br><span class="line">      factory.getTomcatConnectorCustomizers().addAll(connectorCustomizers.orderedStream().toList());</span><br><span class="line">      factory.getTomcatContextCustomizers().addAll(contextCustomizers.orderedStream().toList());</span><br><span class="line">      factory.getTomcatProtocolHandlerCustomizers().addAll(protocolHandlerCustomizers.orderedStream().toList());</span><br><span class="line">      <span class="keyword">return</span> factory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å…¶ä»–å®¹å™¨...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>TomcatServletWebServerFactory</code>å·¥å‚ç±»ä¸­,å…·ä½“çš„åˆ›å»ºæ–¹æ³•:</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="comment">// è·å–webæœåŠ¡å™¨</span></span><br><span class="line"><span class="keyword">public</span> WebServer <span class="title function_">getWebServer</span><span class="params">(ServletContextInitializer...initializers)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">this</span>.disableMBeanRegistry)&#123;</span><br><span class="line">  Registry.disableRegistry();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åˆ›å»ºTomcatå®¹å™¨</span></span><br><span class="line">Tomcat tomcat=<span class="keyword">new</span> <span class="title class_">Tomcat</span>();</span><br><span class="line">File baseDir=(<span class="built_in">this</span>.baseDirectory!=<span class="literal">null</span>)?<span class="built_in">this</span>.baseDirectory:createTempDir(<span class="string">&quot;tomcat&quot;</span>);</span><br><span class="line">tomcat.setBaseDir(baseDir.getAbsolutePath());</span><br><span class="line"><span class="keyword">for</span>(LifecycleListener listener:<span class="built_in">this</span>.serverLifecycleListeners)&#123;</span><br><span class="line">  tomcat.getServer().addLifecycleListener(listener);</span><br><span class="line">&#125;</span><br><span class="line">Connector connector=<span class="keyword">new</span> <span class="title class_">Connector</span>(<span class="built_in">this</span>.protocol);</span><br><span class="line">connector.setThrowOnFailure(<span class="literal">true</span>);</span><br><span class="line">tomcat.getService().addConnector(connector);</span><br><span class="line">customizeConnector(connector);</span><br><span class="line">tomcat.setConnector(connector);</span><br><span class="line">tomcat.getHost().setAutoDeploy(<span class="literal">false</span>);</span><br><span class="line">configureEngine(tomcat.getEngine());</span><br><span class="line"><span class="keyword">for</span>(Connector additionalConnector:<span class="built_in">this</span>.additionalTomcatConnectors)&#123;</span><br><span class="line">  tomcat.getService().addConnector(additionalConnector);</span><br><span class="line">&#125;</span><br><span class="line">prepareContext(tomcat.getHost(),initializers);</span><br><span class="line"><span class="keyword">return</span> getTomcatWebServer(tomcat);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Tomcatå®¹å™¨åˆ›å»ºæ—¶æœº"><a href="#Tomcatå®¹å™¨åˆ›å»ºæ—¶æœº" class="headerlink" title="Tomcatå®¹å™¨åˆ›å»ºæ—¶æœº"></a>Tomcatå®¹å™¨åˆ›å»ºæ—¶æœº</h3><p>SpringApplication.java</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> ConfigurableApplicationContext <span class="title function_">run</span><span class="params">(String...args)</span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  refreshContext(context); <span class="comment">// åˆ·æ–°ä¸Šä¸‹æ–‡</span></span><br><span class="line">  afterRefresh(context,applicationArguments);</span><br><span class="line">  <span class="comment">// ...    </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">// åˆ·æ–°ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">refreshContext</span><span class="params">(ConfigurableApplicationContext context)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">this</span>.registerShutdownHook)&#123;</span><br><span class="line">    shutdownHook.registerApplicationContext(context);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// åˆ·æ–°</span></span><br><span class="line">  refresh(context);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//////////////////////////////////////////////</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">refresh</span><span class="params">(ConfigurableApplicationContext applicationContext)</span>&#123;</span><br><span class="line">  applicationContext.refresh();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨<strong>webåœºæ™¯</strong>ä¸‹,<br>ServletWebServerApplicationContext.java</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">refresh</span><span class="params">()</span><span class="keyword">throws</span> BeansException,IllegalStateException&#123;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="comment">// åˆ·æ–°</span></span><br><span class="line">    <span class="built_in">super</span>.refresh();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">catch</span>(RuntimeException ex)&#123;</span><br><span class="line">    WebServer webServer=<span class="built_in">this</span>.webServer;</span><br><span class="line">    <span class="keyword">if</span>(webServer!=<span class="literal">null</span>)&#123;</span><br><span class="line">      webServer.stop();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">throw</span> ex;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>AbstractApplicationContext.java</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="comment">// åˆ›å»ºå®¹å™¨åäºŒæ­¥</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">refresh</span><span class="params">()</span><span class="keyword">throws</span> BeansException,IllegalStateException&#123;</span><br><span class="line">  <span class="keyword">synchronized</span> (<span class="built_in">this</span>.startupShutdownMonitor)&#123;</span><br><span class="line">    StartupStep contextRefresh=<span class="built_in">this</span>.applicationStartup.start(<span class="string">&quot;spring.context.refresh&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.å‡†å¤‡ä¸Šä¸‹æ–‡å†…å®¹</span></span><br><span class="line">    <span class="comment">// Prepare this context for refreshing.</span></span><br><span class="line">    prepareRefresh();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.è·å–åˆ·æ–°çš„beanå·¥å‚</span></span><br><span class="line">    <span class="comment">// Tell the subclass to refresh the internal bean factory.</span></span><br><span class="line">    ConfigurableListableBeanFactory beanFactory=obtainFreshBeanFactory();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.å‡†å¤‡ä¸Šä¸‹æ–‡ç”¨åˆ°çš„beanå·¥å‚,å¦‚:ç±»åŠ è½½å™¨,åç½®å¤„ç†å™¨</span></span><br><span class="line">    <span class="comment">// Prepare the bean factory for use in this context.</span></span><br><span class="line">    prepareBeanFactory(beanFactory);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="comment">// 4.é€šè¿‡ç¼–ç¨‹æ–¹å¼ä¿®æ”¹BeanFactoryçš„é…ç½®ï¼Œæ¯”å¦‚æ·»åŠ è‡ªå®šä¹‰çš„BeanDefinitionï¼Œä¿®æ”¹å±æ€§å€¼ï¼Œæ³¨å†ŒBeanPostProcessorç­‰ç­‰ã€‚</span></span><br><span class="line">    <span class="comment">// é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¼€å‘äººå‘˜å¯ä»¥å¯¹Springå®¹å™¨è¿›è¡Œæ›´çµæ´»å’Œå®šåˆ¶åŒ–çš„é…ç½®</span></span><br><span class="line">    <span class="comment">// Allows post-processing of the bean factory in context subclasses.</span></span><br><span class="line">    postProcessBeanFactory(beanFactory);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5.æ‰§è¡Œæ‰€æœ‰å·²æ³¨å†Œçš„BeanFactoryPostProcessorçš„postProcessBeanFactoryæ–¹æ³•</span></span><br><span class="line">    StartupStep beanPostProcess=<span class="built_in">this</span>.applicationStartup.start(<span class="string">&quot;spring.context.beans.post-process&quot;</span>);</span><br><span class="line">    <span class="comment">// Invoke factory processors registered as beans in the context.</span></span><br><span class="line">    invokeBeanFactoryPostProcessors(beanFactory);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 6.æ³¨å†Œæ‰€æœ‰çš„BeanPostProcessorå®ä¾‹.</span></span><br><span class="line">    <span class="comment">// å…è®¸å¼€å‘äººå‘˜åœ¨beanå®ä¾‹åŒ–å’Œä¾èµ–æ³¨å…¥çš„è¿‡ç¨‹ä¸­å¯¹beanè¿›è¡Œå¢å¼ºæˆ–å®šåˆ¶</span></span><br><span class="line">    <span class="comment">// Register bean processors that intercept bean creation.</span></span><br><span class="line">    registerBeanPostProcessors(beanFactory);</span><br><span class="line">    beanPostProcess.end();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 7.åˆå§‹åŒ–ä¸Šä¸‹æ–‡çš„æ¶ˆæ¯èµ„æº</span></span><br><span class="line">    <span class="comment">// æ¶ˆæ¯èµ„æºç”¨äºå›½é™…åŒ–å’Œæœ¬åœ°åŒ–çš„ç›®çš„ï¼Œå®ƒå¯ä»¥æ ¹æ®ä¸åŒçš„è¯­è¨€å’ŒåŒºåŸŸè®¾ç½®ï¼Œæä¾›ç›¸åº”çš„æ–‡æœ¬æ¶ˆæ¯</span></span><br><span class="line">    <span class="comment">// Initialize message source for this context.</span></span><br><span class="line">    initMessageSource();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 8.åˆå§‹åŒ–åº”ç”¨ç¨‹åºäº‹ä»¶çš„å¤šæ’­å™¨,ä½¿å¾—åº”ç”¨ç¨‹åºèƒ½å¤Ÿå¯¹äº‹ä»¶è¿›è¡Œå‘å¸ƒå’Œç›‘å¬</span></span><br><span class="line">    <span class="comment">// äº‹ä»¶æœºåˆ¶æ˜¯ä¸€ç§é€šä¿¡æœºåˆ¶ï¼Œç”¨äºåœ¨ä¸åŒçš„ç»„ä»¶ä¹‹é—´ä¼ é€’æ¶ˆæ¯å’Œè§¦å‘ç›¸åº”çš„å¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="comment">// Initialize event multicaster for this context.</span></span><br><span class="line">    initApplicationEventMulticaster();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 9.å®¹å™¨åˆ·æ–°è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªå›è°ƒæ–¹æ³•ï¼Œç”¨äºæä¾›ä¸€ä¸ªæ‰©å±•ç‚¹ï¼Œè®©å¼€å‘äººå‘˜å¯ä»¥åœ¨å®¹å™¨åˆ·æ–°å®Œæˆåæ‰§è¡Œä¸€äº›è‡ªå®šä¹‰çš„é€»è¾‘</span></span><br><span class="line">    <span class="comment">// å¯ä»¥åœ¨onRefreshæ–¹æ³•ä¸­æ‰§è¡Œä¸€äº›é¢å¤–çš„åˆå§‹åŒ–æ“ä½œã€å¯åŠ¨å®šæ—¶ä»»åŠ¡ã€æ³¨å†Œé¢å¤–çš„beanç­‰</span></span><br><span class="line">    <span class="comment">// Initialize other special beans in specific context subclasses.</span></span><br><span class="line">    onRefresh();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 10.å‘åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨</span></span><br><span class="line">    <span class="comment">// Check for listener beans and register them.</span></span><br><span class="line">    registerListeners();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 11.åœ¨Beanå·¥å‚åˆå§‹åŒ–çš„æœ€åé˜¶æ®µï¼Œå®Œæˆæ‰€æœ‰æ³¨å†Œçš„Beançš„åˆå§‹åŒ–è¿‡ç¨‹</span></span><br><span class="line">    <span class="comment">// Beanå·¥å‚ä¸­æ‰€æœ‰å·²æ³¨å†Œçš„Beançš„åç§° --&gt;</span></span><br><span class="line">    <span class="comment">// éå†æ‰€æœ‰çš„Beanåç§°è·å–å¯¹åº”çš„Beanå®šä¹‰ --&gt;</span></span><br><span class="line">    <span class="comment">// æ ¹æ®Beanå®šä¹‰çš„ä¿¡æ¯ï¼Œè¿›è¡Œå®ä¾‹åŒ–ã€ä¾èµ–æ³¨å…¥ã€åˆå§‹åŒ–ç­‰æ“ä½œ --&gt;</span></span><br><span class="line">    <span class="comment">// è‹¥Beanå®šä¹‰ä¸­æœ‰åˆå§‹åŒ–æ–¹æ³•ï¼ˆä¾‹å¦‚é€šè¿‡@PostConstructæ³¨è§£æ ‡è®°çš„æ–¹æ³•ï¼‰ï¼Œåˆ™è°ƒç”¨è¯¥æ–¹æ³•è¿›è¡Œé¢å¤–çš„åˆå§‹åŒ–é€»è¾‘</span></span><br><span class="line">    <span class="comment">// è‹¥Beanå®šä¹‰ä¸­æœ‰é”€æ¯æ–¹æ³•ï¼ˆä¾‹å¦‚é€šè¿‡@PreDestroyæ³¨è§£æ ‡è®°çš„æ–¹æ³•ï¼‰ï¼Œåˆ™åœ¨å®¹å™¨å…³é—­æ—¶è°ƒç”¨è¯¥æ–¹æ³•è¿›è¡Œèµ„æºé‡Šæ”¾ç­‰æ“ä½œ</span></span><br><span class="line">    <span class="comment">// Instantiate all remaining (non-lazy-init) singletons.</span></span><br><span class="line">    finishBeanFactoryInitialization(beanFactory);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 12.å®¹å™¨åˆ·æ–°çš„æœ€åé˜¶æ®µï¼Œæ‰§è¡Œä¸€äº›é¢å¤–çš„é€»è¾‘ä»¥å®Œæˆåˆ·æ–°è¿‡ç¨‹</span></span><br><span class="line">    <span class="comment">// æ¸…ç†åˆå§‹åŒ–è¿‡ç¨‹ä¸­ä¸€ç³»åˆ—æ“ä½œä½¿ç”¨åˆ°çš„èµ„æºç¼“å­˜</span></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–LifecycleProcessor</span></span><br><span class="line">    <span class="comment">// å¯åŠ¨æ‰€æœ‰å®ç°äº†Lifecycleæ¥å£çš„bean</span></span><br><span class="line">    <span class="comment">// å‘å¸ƒContextRefreshedEventäº‹ä»¶</span></span><br><span class="line">    <span class="comment">// Last step: publish corresponding event.</span></span><br><span class="line">    finishRefresh();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">catch</span>(BeansException ex)&#123;</span><br><span class="line">    <span class="keyword">if</span>(logger.isWarnEnabled())&#123;</span><br><span class="line">      logger.warn(<span class="string">&quot;Exception encountered during context initialization - &quot;</span>+</span><br><span class="line">      <span class="string">&quot;cancelling refresh attempt: &quot;</span>+ex);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Destroy already created singletons to avoid dangling resources.</span></span><br><span class="line">destroyBeans();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Reset &#x27;active&#x27; flag.</span></span><br><span class="line">cancelRefresh(ex);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Propagate exception to caller.</span></span><br><span class="line"><span class="keyword">throw</span> ex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">finally</span>&#123;</span><br><span class="line">    <span class="comment">// Reset common introspection caches in Spring&#x27;s core, since we</span></span><br><span class="line">    <span class="comment">// might not ever need metadata for singleton beans anymore...</span></span><br><span class="line">    resetCommonCaches();</span><br><span class="line">    contextRefresh.end();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ‡æ¢æœåŠ¡å™¨"><a href="#åˆ‡æ¢æœåŠ¡å™¨" class="headerlink" title="åˆ‡æ¢æœåŠ¡å™¨"></a>åˆ‡æ¢æœåŠ¡å™¨</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Exclude the Tomcat dependency --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Use Jetty instead --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ğŸ¤–ğŸ¤–-æ‘˜è¦:&lt;br&gt;æœ¬æ–‡ä»‹ç»äº†SpringBoot Webå¼€å‘ä¸­çš„åµŒå…¥å¼å®¹å™¨ã€‚è®²è§£äº†Servletå®¹å™¨åŠå…¶ä¸‰å¤§ç»„ä»¶ï¼Œä»‹ç»äº†åµŒå…¥å¼æœåŠ¡å™¨Tomcatã€Jettyã€Undertowçš„è‡ªåŠ¨é…ç½®åŸç†åŠTomcatå®¹å™¨åˆ›å»ºçš„å…·ä½“æ–¹æ³•ã€‚æœ€åï¼Œæ–‡ç« ä¹Ÿç¤ºèŒƒäº†å¦‚</summary>
      
    
    
    
    <category term="å­¦ä¹ " scheme="http://fu-jw.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="SpringBoot" scheme="http://fu-jw.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>AList+äº‘ç›˜+LskyPro æ­å»ºå¤§å®¹é‡å›¾åºŠ</title>
    <link href="http://fu-jw.com/posts/4140de30.html"/>
    <id>http://fu-jw.com/posts/4140de30.html</id>
    <published>2023-06-30T00:00:00.000Z</published>
    <updated>2023-07-09T11:25:56.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ¤–ğŸ¤–-æ‘˜è¦:<br>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•åˆ©ç”¨AListï¼Œäº‘ç›˜å’ŒLskyProæ­å»ºå¤§å®¹é‡å›¾åºŠï¼Œé¿å…äº†é«˜é¢å›¾åºŠç®¡ç†è´¹ï¼Œå¢åŠ äº†è®¿é—®é€Ÿåº¦ï¼Œå›¾ç‰‡è‡ªæˆ‘ç®¡ç†ã€‚æåŠäº†æ­å»ºè¿‡ç¨‹ï¼ŒåŒ…æ‹¬ç¯å¢ƒå‡†å¤‡ï¼ŒAListå’ŒWebDAVæœåŠ¡çš„æ­å»ºï¼Œä»¥åŠLskyçš„å®‰è£…å’Œé…ç½®ã€‚</p></blockquote><h1 id="AList-äº‘ç›˜-LskyPro-æ­å»ºå¤§å®¹é‡å›¾åºŠ"><a href="#AList-äº‘ç›˜-LskyPro-æ­å»ºå¤§å®¹é‡å›¾åºŠ" class="headerlink" title="AList+äº‘ç›˜+LskyPro æ­å»ºå¤§å®¹é‡å›¾åºŠ"></a>AList+äº‘ç›˜+LskyPro æ­å»ºå¤§å®¹é‡å›¾åºŠ</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p><a href="https://www.lsky.pro/">å…°ç©ºå®˜ç½‘:</a></p><blockquote><p>å…°ç©ºå›¾åºŠå¯ä»¥å¸®æ‚¨ä¿ç®¡å¤§é‡æ— å¤„å®‰æ”¾çš„å›¾ç‰‡ï¼Œæ•°æ®å¯ä»¥è‡ªç”±é€‰æ‹©å‚¨å­˜é©±åŠ¨ï¼Œæ”¯æŒä¸»æµç¬¬ä¸‰æ–¹å‚¨å­˜ã€‚<br>ä½œä¸ºä¸€ä¸ªåŠ©æ‰‹ï¼Œå®ƒä¸ä»…å¯ä»¥å°†æ‚¨æŠŠå›¾ç‰‡ä»¥æŒ‡å®šè§„åˆ™å­˜æ”¾åœ¨æŒ‡å®šä½ç½®ï¼Œè¿˜æœ‰æ›´å¤šå¼ºå¤§çš„åŠŸèƒ½æ¥å¸®åŠ©æ‚¨å¤„ç†è¿™äº›å›¾ç‰‡ã€‚</p></blockquote><p><a href="https://alist.nn.ci/zh/">AList:</a></p><blockquote><p>ä¸€ä¸ªæ”¯æŒå¤šç§å­˜å‚¨ï¼Œæ”¯æŒç½‘é¡µæµè§ˆå’Œ WebDAV çš„æ–‡ä»¶åˆ—è¡¨ç¨‹åº<br>æ”¯æŒå¤šä¸ªå­˜å‚¨æä¾›å•†ï¼ŒåŒ…æ‹¬æœ¬åœ°å­˜å‚¨ã€é˜¿é‡Œäº‘ç›˜ã€OneDriveã€Google Drive ç­‰ï¼Œä¸”æ˜“äºæ‹“å±•<br>æ”¯æŒæ‰€æœ‰ WebDAV å­˜å‚¨ï¼Œè¿™æ˜¯ä¸€ç§ç”¨äºè®¿é—®æ–‡ä»¶çš„æ ‡å‡†</p></blockquote><p>äº‘ç›˜:<br>æœ¬æ–‡ä»¥<a href="https://cloud.189.cn/web/login.html">å¤©ç¿¼äº‘ç›˜</a>ä¸ºä¾‹, å…è´¹ 30 GB çš„ç©ºé—´, æ”¯æŒ WebDAV</p><p><a href="https://image.fu-jw.com/">è‡ªå»ºå›¾åºŠ</a><br><img src="https://image.fu-jw.com/img/2023/06/30/649ec9d66f54d.webp" alt="Snipaste_2023-06-30_19-51-10.png"></p><h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><ul><li>æ— éœ€ç¼´é«˜é¢å›¾åºŠç®¡ç†è´¹</li><li>è®¿é—®é€Ÿåº¦å–å†³äºè‡ªå»ºæœåŠ¡å™¨çš„é…ç½®</li><li>å›¾ç‰‡è‡ªæ²», è‡ªå·±ç®¡ç†å›¾ç‰‡, ä¸ç”¨æ‹…å¿ƒå›¾åºŠè·‘è·¯æˆ–è¢«å¢™</li></ul><h2 id="æ­å»º"><a href="#æ­å»º" class="headerlink" title="æ­å»º"></a>æ­å»º</h2><blockquote><p>å‰æ:<br>éœ€è¦å…¬ç½‘æœåŠ¡å™¨å’Œå·²å¤‡æ¡ˆåŸŸå<br>æœåŠ¡å™¨å®‰è£…å®å¡”, Docker, Nginx</p></blockquote><h3 id="1-AList"><a href="#1-AList" class="headerlink" title="1. AList"></a>1. AList</h3><p>ä½¿ç”¨ Docker å®‰è£…</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker run -d --restart=always -v /etc/alist:/opt/alist/data -p 5244:5244 -e PUID=0 -e PGID=0 -e UMASK=022 --name=<span class="string">&quot;alist&quot;</span> xhofe/alist:latest</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„: ç«¯å£å·æ˜¯: 5244, å¦‚æœä½¿ç”¨äº‘æœåŠ¡å™¨å¦‚é˜¿é‡Œäº‘, è…¾è®¯äº‘ç­‰, è®°å¾—å¼€æ”¾æ­¤ç«¯å£.</p></blockquote><h3 id="2-WebDAV-æœåŠ¡"><a href="#2-WebDAV-æœåŠ¡" class="headerlink" title="2. WebDAV æœåŠ¡"></a>2. WebDAV æœåŠ¡</h3><ul><li>æ³¨å†Œç™»å½•<a href="https://cloud.189.cn/web/login.html">å¤©ç¿¼äº‘ç›˜</a></li><li>åœ¨ä¸ªäººç½‘ç›˜ä¸­åˆ›å»ºÂ <code>Pics</code>Â æ–‡ä»¶å¤¹</li><li>åœ¨ AList ä¸­å°†è¯¥æ–‡ä»¶å¤¹æŒ‚è½½åˆ°è·¯å¾„Â <code>/image</code> (åœ¨ AList æ˜¾ç¤ºçš„è·¯å¾„)</li></ul><img src=" https://image.fu-jw.com/img/2023/06/30/649ed7ee1dce7.webp"/><p>å‚è€ƒé…ç½®:<br><img src=" https://image.fu-jw.com/img/2023/06/30/649ed98c2c787.webp"/><br><img src=" https://image.fu-jw.com/img/2023/06/30/649edb3e4e9a2.webp"/></p><p><a href="https://alist.nn.ci/zh/guide/drivers/189.html">å‚è€ƒæ–‡æ¡£</a></p><h3 id="3-Lsky"><a href="#3-Lsky" class="headerlink" title="3. Lsky"></a>3. Lsky</h3><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºå®¹å™¨å¹¶å¯åŠ¨ï¼ˆå®¿ä¸»æœº4003ç«¯å£å¯è‡ªè¡Œæ›´æ”¹ï¼‰  </span></span><br><span class="line">sudo docker run -d --name lskypro --restart unless-stopped -p 4003:80 -v /data/lskypro:/var/www/html coldpig/lskypro-docker:latest </span><br></pre></td></tr></table></figure><h4 id="Nginx-é…ç½®"><a href="#Nginx-é…ç½®" class="headerlink" title="Nginx é…ç½®"></a>Nginx é…ç½®</h4><p>æ³¨æ„: å¦‚æœåœ¨ Nginx é…ç½®ä¸­å¼€å¯äº† HTTPS ï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä¿®æ”¹å›¾åºŠé¡¹ç›®æºç ï¼Œå¦åˆ™å‰ç«¯é¡µé¢å¸ƒå±€å°†è¢«æ‰“ä¹±</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo docker <span class="built_in">exec</span> -it lskypro sed -i <span class="string">&#x27;32 a \\\Illuminate\\Support\\Facades\\URL::forceScheme(&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;https&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;);&#x27;</span> /var/www/html/app/Providers/AppServiceProvider.php</span><br></pre></td></tr></table></figure><p>å‡è®¾å›¾åºŠæœåŠ¡çš„åŸŸåä¸ºÂ <code>image.domain.com</code>ï¼ŒAList éƒ¨ç½²åœ¨æœ¬åœ°ç«¯å£Â <code>5244</code>ï¼Œåœ¨Â <code>nginx.conf</code>Â ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®é¡¹ï¼š</p><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">server</span><br><span class="line">&#123;</span><br><span class="line">    listen 80;</span><br><span class="line">listen 443 ssl http2;</span><br><span class="line">    server_name image.domain.com;</span><br><span class="line">    index index.php index.html index.htm default.php default.htm default.html;</span><br><span class="line">    root /www/wwwroot/image.domain.com;</span><br><span class="line"></span><br><span class="line">    #SSL-START SSLç›¸å…³é…ç½®ï¼Œè¯·å‹¿åˆ é™¤æˆ–ä¿®æ”¹ä¸‹ä¸€è¡Œå¸¦æ³¨é‡Šçš„404è§„åˆ™</span><br><span class="line">    #error_page 404/404.html;</span><br><span class="line">    ssl_certificate    /www/server/panel/vhost/cert/image.domain.com/fullchain.pem;</span><br><span class="line">    ssl_certificate_key    /www/server/panel/vhost/cert/image.domain.com/privkey.pem;</span><br><span class="line">    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class="line">    ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line">    ssl_session_cache shared:SSL:10m;</span><br><span class="line">    ssl_session_timeout 10m;</span><br><span class="line">    add_header Strict-Transport-Security &quot;max-age=31536000&quot;;</span><br><span class="line">    error_page 497  https://$host$request_uri;</span><br><span class="line"></span><br><span class="line">    #SSL-END</span><br><span class="line"></span><br><span class="line">    #ERROR-PAGE-START  é”™è¯¯é¡µé…ç½®ï¼Œå¯ä»¥æ³¨é‡Šã€åˆ é™¤æˆ–ä¿®æ”¹</span><br><span class="line">    #error_page 404 /404.html;</span><br><span class="line">    #error_page 502 /502.html;</span><br><span class="line">    #ERROR-PAGE-END</span><br><span class="line"></span><br><span class="line">    #PHP-INFO-START  PHPå¼•ç”¨é…ç½®ï¼Œå¯ä»¥æ³¨é‡Šæˆ–ä¿®æ”¹</span><br><span class="line">    include enable-php-00.conf;</span><br><span class="line">    #PHP-INFO-END</span><br><span class="line"></span><br><span class="line">    #REWRITE-START URLé‡å†™è§„åˆ™å¼•ç”¨,ä¿®æ”¹åå°†å¯¼è‡´é¢æ¿è®¾ç½®çš„ä¼ªé™æ€è§„åˆ™å¤±æ•ˆ</span><br><span class="line">    include /www/server/panel/vhost/rewrite/image.domain.com.conf;</span><br><span class="line">    #REWRITE-END</span><br><span class="line"></span><br><span class="line">    #ç¦æ­¢è®¿é—®çš„æ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">    # è½¬å‘å›¾åºŠæœåŠ¡è¯·æ±‚</span><br><span class="line">    location / &#123;</span><br><span class="line">      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">        proxy_set_header Host $http_host;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header Range $http_range;</span><br><span class="line">      proxy_set_header If-Range $http_if_range;</span><br><span class="line">        proxy_redirect off;</span><br><span class="line">        client_max_body_size 20000m;</span><br><span class="line">      # è½¬å‘ç«¯å£ 4003 ä¸ä¸Šé¢è®¾å®šçš„å®¿ä¸»æœºç«¯å£ä¿æŒä¸€è‡´</span><br><span class="line">        proxy_pass http://IP:4003;</span><br><span class="line">        proxy_read_timeout 600s;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    # è½¬å‘ AList å›¾ç‰‡ç›´é“¾è®¿é—®è¯·æ±‚</span><br><span class="line">    location /img &#123;</span><br><span class="line">        proxy_pass http://IP:5244/d/image;</span><br><span class="line">        proxy_read_timeout 600s;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #ç¦æ­¢åœ¨è¯ä¹¦éªŒè¯ç›®å½•æ”¾å…¥æ•æ„Ÿæ–‡ä»¶</span><br><span class="line">    if ( $uri ~ &quot;^/\.well-known/.*\.(php|jsp|py|js|css|lua|ts|go|zip|tar\.gz|rar|7z|sql|bak)$&quot; ) &#123;</span><br><span class="line">        return 403;</span><br><span class="line">    &#125;</span><br><span class="line">    access_log  /www/wwwlogs/image.domain.com.log;</span><br><span class="line">    error_log  /www/wwwlogs/image.domain.com.error.log;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Lsky-æ•°æ®åº“é…ç½®"><a href="#Lsky-æ•°æ®åº“é…ç½®" class="headerlink" title="Lsky æ•°æ®åº“é…ç½®"></a>Lsky æ•°æ®åº“é…ç½®</h4><p>ä»¥ä¸Šæ­¥éª¤å®Œæˆåï¼Œæµè§ˆå™¨è®¿é—®å›¾åºŠæœåŠ¡åŸŸåå¯è¿›å…¥å¦‚ä¸‹å›¾æ‰€ç¤ºçš„é…ç½®é¡µé¢ã€‚é…ç½®é¡µé¢å°†å¼•å¯¼æˆ‘ä»¬è®¾ç½®æ•°æ®åº“æœåŠ¡ï¼Œä¸ºäº†å‡è½»å·¥ä½œé‡ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨æœ¬åœ° SQLite æ•°æ®åº“ï¼Œæ•°æ®åº“è·¯å¾„ç•™ç©ºå³å¯ï¼ˆå°†è‡ªåŠ¨åœ¨æœåŠ¡æ ¹ç›®å½•çš„Â <code>database</code>Â ç›®å½•ä¸‹åˆ›å»ºÂ <code>database.sqlite</code>Â æ–‡ä»¶ï¼‰ï¼ŒåŒæ—¶éœ€è¦è®¾å®šç®¡ç†å‘˜é‚®ç®±å’Œç™»å½•å¯†ç ã€‚<br><img src=" https://image.fu-jw.com/img/2023/06/30/649edebe28bcb.webp"/><br><img src=" https://image.fu-jw.com/img/2023/06/30/649edece60c02.webp"/></p><h4 id="è®¾ç½®å­˜å‚¨ç­–ç•¥"><a href="#è®¾ç½®å­˜å‚¨ç­–ç•¥" class="headerlink" title="è®¾ç½®å­˜å‚¨ç­–ç•¥"></a>è®¾ç½®å­˜å‚¨ç­–ç•¥</h4><img src=" https://image.fu-jw.com/img/2023/06/30/649edffb7426c.webp"/><p>å‚è€ƒé…ç½®:<br><img src=" https://image.fu-jw.com/img/2023/06/30/649ee183cdadf.webp"/></p><p>é»˜è®¤å­˜å‚¨ç­–ç•¥ä¸ºæœ¬åœ°å­˜å‚¨ï¼Œä¸ºäº†ä¸å ç”¨æœåŠ¡å™¨ç©ºé—´ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨ AList æä¾›çš„ WebDAV æœåŠ¡åˆ›å»ºä¸€ä¸ªæ–°çš„å­˜å‚¨ç­–ç•¥ï¼Œé…ç½®é¡¹å¦‚è¡¨æ‰€ç¤ºï¼Œå…¶ä¸­è®¿é—®åŸŸåå³ä¸ºå›¾ç‰‡ç›´é“¾å¯¹åº”çš„åŸŸåå’Œè·¯å¾„ã€‚</p><p>æ³¨æ„: è®¾ç½® WebDAV ä¸ºé»˜è®¤å­˜å‚¨ç­–ç•¥</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ğŸ¤–ğŸ¤–-æ‘˜è¦:&lt;br&gt;æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•åˆ©ç”¨AListï¼Œäº‘ç›˜å’ŒLskyProæ­å»ºå¤§å®¹é‡å›¾åºŠï¼Œé¿å…äº†é«˜é¢å›¾åºŠç®¡ç†è´¹ï¼Œå¢åŠ äº†è®¿é—®é€Ÿåº¦ï¼Œå›¾ç‰‡è‡ªæˆ‘ç®¡ç†ã€‚æåŠäº†æ­å»ºè¿‡ç¨‹ï¼ŒåŒ…æ‹¬ç¯å¢ƒå‡†å¤‡ï¼ŒAListå’ŒWebDAVæœåŠ¡çš„æ­å»ºï¼Œä»¥åŠLskyçš„å®‰è£…å’Œé…ç½®ã€‚&lt;/p&gt;
&lt;/</summary>
      
    
    
    
    <category term="æ•™ç¨‹" scheme="http://fu-jw.com/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="å›¾åºŠ" scheme="http://fu-jw.com/tags/%E5%9B%BE%E5%BA%8A/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ—¥å¿—</title>
    <link href="http://fu-jw.com/posts/4275e528.html"/>
    <id>http://fu-jw.com/posts/4275e528.html</id>
    <published>2023-06-13T00:00:00.000Z</published>
    <updated>2023-07-09T11:25:56.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ¤–ğŸ¤–-æ‘˜è¦:<br>æœ¬æ–‡ä»‹ç»äº†SpringBooté¡¹ç›®ä¸­æ—¥å¿—çš„ä½¿ç”¨æ–¹æ³•å’Œæ“ä½œæ­¥éª¤ã€‚åŒ…æ‹¬é»˜è®¤æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ï¼Œå¦‚ä½•ä¿®æ”¹é»˜è®¤æ ¼å¼ï¼Œæ—¥å¿—çº§åˆ«çš„è®¾å®šï¼Œåˆ†ç»„è®¾å®šï¼Œæ–‡ä»¶è¾“å‡ºåŠå½’æ¡£ä¸åˆ‡å‰²ã€‚æ–‡ç« ä¹Ÿæåˆ°æ—¥å¿—ç³»ç»Ÿçš„è‡ªå®šä¹‰é…ç½®ä»¥åŠå¦‚ä½•åˆ‡æ¢æ—¥å¿—ç»„åˆï¼Œå¹¶ä¸”æä¾›äº†æ—¥å¿—ä½¿ç”¨çš„æœ€ä½³å®è·µã€‚</p></blockquote><h1 id="SpringBootæ—¥å¿—"><a href="#SpringBootæ—¥å¿—" class="headerlink" title="SpringBootæ—¥å¿—"></a>SpringBootæ—¥å¿—</h1><blockquote><p>æˆ‘çš„<a href="https://github.com/fu-jw/spring-tutorial">SpringBooté¡¹ç›®</a>ç¬¬ä¸‰ä¸ªæ¨¡å—</p></blockquote><p>åœ¨å‰é¢<a href="https://blog.fu-jw.com/posts/4ccc97e8.html">SpringBootå¿«é€Ÿå…¥é—¨</a>ä¸­æˆ‘ä»¬çŸ¥é“,</p><p>æ¯ä¸ªSpringBooté¡¹ç›®éƒ½ä¼šä¾èµ–<strong>æ ¸å¿ƒå¯åŠ¨å™¨</strong>:<code>spring-boot-starter</code>, æ ¸å¿ƒå¯åŠ¨å™¨ä¼šä¾èµ–:<code>spring-boot-starter-logging</code>å®ç°æ—¥å¿—åŠŸèƒ½</p><p><code>spring-boot-starter-logging</code>ä¾èµ–<code>Logback</code>çš„æ—¥å¿—å®ç°å’Œ<code>SLF4J</code>æ¡¥æ¥å™¨,å°†å…¶ä»–æ—¥å¿—å®ç°æ¡¥æ¥åˆ°<code>SLF4J</code></p><p>å³<code>SLF4J</code>+<code>Logback</code>çš„æ—¥å¿—ç»„åˆ.</p><!-- ![SpringBootæ—¥å¿—ä¾èµ–](https://s2.loli.net/2023/06/15/Rtsyneul2bhIKNr.webp) --><img src="https://image.fu-jw.com/img/2023/07/01/649f7b539f42d.webp"/><details> <summary><strong><span style="color: red; ">ä¸ºä»€ä¹ˆæ—¥å¿—ä¸ç”¨SpringBootçš„è‡ªåŠ¨é…ç½®???</span></strong></summary><strong>æ—¥å¿—æ˜¯ç³»ç»Ÿå¯åŠ¨å°±è¦ä½¿ç”¨</strong>,<strong>xxxAutoConfiguration</strong>æ˜¯ç³»ç»Ÿå¯åŠ¨å¥½äº†ä»¥åæ”¾å¥½çš„ç»„ä»¶,åæ¥ç”¨çš„.<br>æ—¥å¿—æ˜¯åˆ©ç”¨<strong>ç›‘å¬å™¨æœºåˆ¶</strong>é…ç½®å¥½çš„,<strong>ApplicationListener</strong></details><h2 id="é»˜è®¤æ—¥å¿—"><a href="#é»˜è®¤æ—¥å¿—" class="headerlink" title="é»˜è®¤æ—¥å¿—"></a>é»˜è®¤æ—¥å¿—</h2><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">2023-06-12T20:57:23.829+08:00  INFO 5232 --- [           main] com.fredo.Main                           : Starting Main using Java 17.0.2 with PID 5232</span><br><span class="line">2023-06-12T20:57:23.837+08:00  INFO 5232 --- [           main] com.fredo.Main                           : No active profile set, falling back to 1 default profile: &quot;default&quot;</span><br><span class="line">2023-06-12T20:57:25.094+08:00  INFO 5232 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)</span><br></pre></td></tr></table></figure><p>é»˜è®¤è¾“å‡ºæ ¼å¼ï¼š</p><ul><li>æ—¶é—´å’Œæ—¥æœŸï¼šæ¯«ç§’çº§ç²¾åº¦</li><li>æ—¥å¿—çº§åˆ«ï¼šERROR, WARN, INFO, DEBUG, or TRACE.</li><li>è¿›ç¨‹ ID</li><li>â€”ï¼š æ¶ˆæ¯åˆ†å‰²ç¬¦</li><li>çº¿ç¨‹åï¼š ä½¿ç”¨[]åŒ…å«</li><li>Logger åï¼š é€šå¸¸æ˜¯äº§ç”Ÿæ—¥å¿—çš„ç±»å</li><li>æ¶ˆæ¯ï¼š æ—¥å¿—è®°å½•çš„å†…å®¹</li></ul><!-- ![SpringBootæ—¥å¿—é»˜è®¤å€¼](https://s2.loli.net/2023/06/16/EiSUmc3tWpYnea8.webp) --><img src="https://image.fu-jw.com/img/2023/07/01/649f7bc000895.webp"/><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;logging.pattern.console&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;java.lang.String&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Appender pattern for output to the console. Supported only with the default Logback setup.&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sourceType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;org.springframework.boot.context.logging.LoggingApplicationListener&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;defaultValue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;%clr(%d&#123;$&#123;LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd&#x27;T&#x27;HH:mm:ss.SSSXXX&#125;&#125;)&#123;faint&#125; %clr($&#123;LOG_LEVEL_PATTERN:-%5p&#125;) %clr($&#123;PID:- &#125;)&#123;magenta&#125; %clr(---)&#123;faint&#125; %clr([%15.15t])&#123;faint&#125; %clr(%-40.40logger&#123;39&#125;)&#123;cyan&#125; %clr(:)&#123;faint&#125; %m%n$&#123;LOG_EXCEPTION_CONVERSION_WORD:-%wEx&#125;&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹æ ¼å¼"><a href="#ä¿®æ”¹æ ¼å¼" class="headerlink" title="ä¿®æ”¹æ ¼å¼"></a>ä¿®æ”¹æ ¼å¼</h2><p>åœ¨SpringBootçš„é…ç½®æ–‡ä»¶<strong>application.properties</strong>ä¸­ç›´æ¥ä¿®æ”¹å³å¯:</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">logging.pattern.console=%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; ==== %msg%n</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹:</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">2023-06-12 21:19:29.634 [main] INFO  com.fredo.Main ==== Starting Main using Java 17.0.2 with PID 11216</span><br><span class="line">2023-06-12 21:19:29.639 [main] INFO  com.fredo.Main ==== No active profile set, falling back to 1 default profile: &quot;default&quot;</span><br><span class="line">2023-06-12 21:19:30.922 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer ==== Tomcat initialized with port(s): 8080 (http)</span><br></pre></td></tr></table></figure><p><strong>ç®€å•æ–¹ä¾¿</strong></p><p>ä¹Ÿå¯ä»¥å•ç‹¬æ–‡ä»¶é…ç½®<code>logback</code>, <strong>ä¼˜å…ˆçº§é«˜äºSpringBootçš„é…ç½®</strong><br>é»˜è®¤åœ¨<strong>classpath</strong>ä¸­ä¾æ¬¡å¯»æ‰¾<strong>logback-spring.xml, logback-spring.groovy, logback.groovy, logback.xml</strong>æ–‡ä»¶</p><p>è¿˜å¯ä»¥åœ¨SpringBooté…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæ–‡ä»¶ä½ç½®</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">logging.config=classpath:logback-bak.xml</span><br></pre></td></tr></table></figure><h2 id="æ—¥å¿—ä½¿ç”¨"><a href="#æ—¥å¿—ä½¿ç”¨" class="headerlink" title="æ—¥å¿—ä½¿ç”¨"></a>æ—¥å¿—ä½¿ç”¨</h2><p>åœ¨æ¯ä¸ªç±»ä¸­æ·»åŠ ä»£ç :<br><code>Logger log = LoggerFactory.getLogger(getClass());</code></p><p>æˆ–è€…æ·»åŠ <code>lombok</code>ä¾èµ–, åœ¨ç±»ä¸Šç›´æ¥ä½¿ç”¨<code>@Slf4j</code>æ³¨è§£å³å¯ä»£æ›¿ä¸Šé¢ä»£ç </p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨æƒ³è¦æ‰“å°æ—¥å¿—çš„ä½ç½®ä½¿ç”¨å³å¯<br><code>log.info(&quot;...&quot;);</code></p><h2 id="æ—¥å¿—çº§åˆ«"><a href="#æ—¥å¿—çº§åˆ«" class="headerlink" title="æ—¥å¿—çº§åˆ«"></a>æ—¥å¿—çº§åˆ«</h2><p>ç”±ä½åˆ°é«˜ï¼š</p><ul><li>ALL: å¼€å¯æ—¥å¿—æ‰“å°</li><li>TRACE: å¯è·Ÿè¸ªæ‰“å°æ¡†æ¶åº•å±‚ä¿¡æ¯</li><li>DEBUG: è°ƒè¯•ä¿¡æ¯</li><li>INFO: æ™®é€šä¿¡æ¯</li><li>WARN: ç³»ç»Ÿçš„å‘Šè­¦ä¿¡æ¯</li><li>ERROR: ç³»ç»Ÿçš„é”™è¯¯ä¿¡æ¯,å¼‚å¸¸ä¿¡æ¯</li><li>FATAL: å¯èƒ½å¯¼è‡´ç³»ç»Ÿå´©æºƒçš„ä¸¥é‡ä¿¡æ¯</li><li>OFF: å…³é—­æ—¥å¿—æ‰“å°</li></ul><p>æ³¨æ„ï¼š</p><ul><li><code>Logback</code>æ²¡æœ‰<code>FATAL</code>çº§åˆ«, å¯¹åº”çš„æ˜¯<code>ERROR</code></li><li><strong>é«˜çº§åˆ«åŒ…å«ä½çº§åˆ«çš„æ‰€æœ‰ä¿¡æ¯</strong></li><li>SpringBootæ—¥å¿—é»˜è®¤çº§åˆ«æ˜¯<code>INFO</code></li></ul><blockquote><p>é»˜è®¤æ‰€æœ‰æ—¥å¿—æ²¡æœ‰ç²¾ç¡®æŒ‡å®šçº§åˆ«å°±ä½¿ç”¨<strong>root</strong>çš„é»˜è®¤çº§åˆ«:<br>logging.level.root&#x3D;info</br><br>ç²¾ç¡®è°ƒæ•´æŸä¸ªåŒ…ä¸‹çš„æ—¥å¿—çº§åˆ«<br>logging.level.com.fredo.logging.controller&#x3D;debug<br>logging.level.com.fredo.logging.service&#x3D;debug</p></blockquote><h2 id="æ—¥å¿—åˆ†ç»„"><a href="#æ—¥å¿—åˆ†ç»„" class="headerlink" title="æ—¥å¿—åˆ†ç»„"></a>æ—¥å¿—åˆ†ç»„</h2><p>åœ¨ç»™ä¸åŒåŒ…ä¸‹çš„ç±»å®šä¹‰æ—¥å¿—çº§åˆ«æ—¶,è¿˜å¯ä»¥è‡ªå®šä¹‰åˆ†ç»„,ä»¥ç»„ä¸ºå•ä½åˆ’åˆ†æ—¥å¿—çº§åˆ«</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">logging.group.ç»„å=åŒ…å</span><br><span class="line">logging.level.ç»„å=æ—¥å¿—çº§åˆ«</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚:</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">logging.group.tomcat=org.apache.catalina,org.apache.coyote,org.apache.tomcat</span><br><span class="line">logging.level.tomcat=trace</span><br></pre></td></tr></table></figure><p>SpringBoot é¢„å®šä¹‰ä¸¤ä¸ªç»„</p><table><thead><tr><th>Name</th><th>Loggers</th></tr></thead><tbody><tr><td>web</td><td>org.springframework.core.codec,</br> org.springframework.http,</br> org.springframework.web,</br> org.springframework.boot.actuate.endpoint.web,</br> org.springframework.boot.web.servlet.ServletContextInitializerBeans</td></tr><tr><td>sql</td><td>org.springframework.jdbc.core,</br> org.hibernate.SQL,</br> org.jooq.tools.LoggerListener</td></tr></tbody></table><h2 id="æ–‡ä»¶è¾“å‡º"><a href="#æ–‡ä»¶è¾“å‡º" class="headerlink" title="æ–‡ä»¶è¾“å‡º"></a>æ–‡ä»¶è¾“å‡º</h2><p>SpringBooté»˜è®¤åªæŠŠæ—¥å¿—å†™åœ¨æ§åˆ¶å°,å¦‚æœæƒ³é¢å¤–è®°å½•åˆ°æ–‡ä»¶,<br>å¯ä»¥åœ¨<code>application.properties</code>ä¸­æ·»åŠ <code>logging.file.name</code> or <code>logging.file.path</code>é…ç½®é¡¹</p><table><thead><tr><th>logging.file.name</th><th>logging.file.path</th><th>ç¤ºä¾‹</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td>-</td><td>-</td><td></td><td>ä»…æ§åˆ¶å°è¾“å‡º</td></tr><tr><td>æŒ‡å®š</td><td>-</td><td>my.log</td><td>å†™å…¥æŒ‡å®šæ–‡ä»¶ã€‚å¯ä»¥åŠ è·¯å¾„</td></tr><tr><td>-</td><td>æŒ‡å®š</td><td>&#x2F;var&#x2F;log</td><td>å†™å…¥æŒ‡å®šç›®å½•ï¼Œæ–‡ä»¶åä¸º<code>spring.log</code></td></tr><tr><td>æŒ‡å®š</td><td>æŒ‡å®š</td><td></td><td>ä»¥<code>logging.file.name</code>ä¸ºå‡†(pathæ— æ•ˆ)</td></tr></tbody></table><h3 id="å½’æ¡£ä¸åˆ‡å‰²"><a href="#å½’æ¡£ä¸åˆ‡å‰²" class="headerlink" title="å½’æ¡£ä¸åˆ‡å‰²"></a>å½’æ¡£ä¸åˆ‡å‰²</h3><blockquote><p>å½’æ¡£ï¼šæ¯å¤©çš„æ—¥å¿—å•ç‹¬å­˜åˆ°ä¸€ä¸ªæ–‡æ¡£ä¸­<br>åˆ‡å‰²ï¼šæ¯ä¸ªæ–‡ä»¶10MB,è¶…è¿‡å¤§å°åˆ‡å‰²æˆå¦å¤–ä¸€ä¸ªæ–‡ä»¶</p></blockquote><p>æ¯å¤©çš„æ—¥å¿—åº”è¯¥ç‹¬ç«‹åˆ†å‰²å‡ºæ¥å­˜æ¡£.å¦‚æœä½¿ç”¨<code>Logback</code>(SpringBooté»˜è®¤æ—¥å¿—å®ç°),<br>å¯ä»¥é€šè¿‡<code>application.properties/yaml</code>æ–‡ä»¶æŒ‡å®šæ—¥å¿—æ»šåŠ¨è§„åˆ™</p><p>å¦‚æœæ˜¯å…¶ä»–æ—¥å¿—ç³»ç»Ÿ,éœ€è¦è‡ªè¡Œé…ç½®(æ·»åŠ <code>log4j2.xml</code>æˆ–<code>log4j2-spring.xml</code>)</p><p>æ»šåŠ¨è§„åˆ™è®¾ç½®å¦‚ä¸‹:</p><table><thead><tr><th>é…ç½®é¡¹</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>logging.logback.rollingpolicy.file-name-pattern</strong></td><td>æ—¥å¿—å­˜æ¡£çš„æ–‡ä»¶åæ ¼å¼ï¼ˆé»˜è®¤å€¼ï¼š<strong>${LOG_FILE}.%d{yyyy-MM-dd}.%i.gz</strong> ï¼‰</td></tr><tr><td><strong>logging.logback.rollingpolicy.clean-history-on-start</strong></td><td>åº”ç”¨å¯åŠ¨æ—¶æ˜¯å¦æ¸…é™¤ä»¥å‰å­˜æ¡£ï¼ˆé»˜è®¤å€¼ï¼š<strong>false</strong>ï¼‰</td></tr><tr><td><strong>logging.logback.rollingpolicy.max-file-size</strong></td><td>å­˜æ¡£å‰ï¼Œæ¯ä¸ªæ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å¤§å°ï¼ˆé»˜è®¤å€¼ï¼š<strong>10MB</strong></td></tr><tr><td><strong>logging.logback.rollingpolicy.total-size-cap</strong></td><td>æ—¥å¿—æ–‡ä»¶è¢«åˆ é™¤ä¹‹å‰ï¼Œå¯ä»¥å®¹çº³çš„æœ€å¤§å¤§å°ï¼ˆé»˜è®¤å€¼ï¼š0Bï¼‰ã€‚è®¾ç½®<strong>1GB</strong>åˆ™ç£ç›˜å­˜å‚¨è¶…è¿‡<strong>1GB</strong>æ—¥å¿—åå°±ä¼šåˆ é™¤æ—§æ—¥å¿—æ–‡ä»¶</td></tr><tr><td><strong>logging.logback.rollingpolicy.max-history</strong></td><td>æ—¥å¿—æ–‡ä»¶ä¿å­˜çš„æœ€å¤§å¤©æ•°(é»˜è®¤å€¼ï¼š<strong>7</strong>)</td></tr></tbody></table><h2 id="è‡ªå®šä¹‰é…ç½®"><a href="#è‡ªå®šä¹‰é…ç½®" class="headerlink" title="è‡ªå®šä¹‰é…ç½®"></a>è‡ªå®šä¹‰é…ç½®</h2><p>é€šå¸¸é…ç½®<code>application.properties</code>å°±å¤Ÿäº†.å½“ç„¶ä¹Ÿå¯ä»¥è‡ªå®šä¹‰. æ¯”å¦‚:</p><table><thead><tr><th>æ—¥å¿—ç³»ç»Ÿ</th><th>è‡ªå®šä¹‰æ–‡ä»¶</th></tr></thead><tbody><tr><td>Logback</td><td>logback-spring.xml, logback-spring.groovy, logback.xml, or logback.groovy</td></tr><tr><td>Log4j2</td><td>log4j2-spring.xml or log4j2.xml</td></tr><tr><td>JUL</td><td>logging.properties</td></tr></tbody></table><p>å»ºè®®åœ¨æ—¥å¿—é…ç½®ä¸­ä½¿ç”¨<code>-spring</code>å˜é‡(æ¯”å¦‚<code>logback-spring.xml</code>è€Œä¸æ˜¯<code>logback.xml</code>).<br>å¦‚æœä½¿ç”¨æ ‡å‡†é…ç½®æ–‡ä»¶, <code>spring</code>æ— æ³•å®Œå…¨æ§åˆ¶æ—¥å¿—åˆå§‹åŒ–</p><h2 id="åˆ‡æ¢æ—¥å¿—ç»„åˆ"><a href="#åˆ‡æ¢æ—¥å¿—ç»„åˆ" class="headerlink" title="åˆ‡æ¢æ—¥å¿—ç»„åˆ"></a>åˆ‡æ¢æ—¥å¿—ç»„åˆ</h2><p>éœ€è¦æ’é™¤SpringBootè‡ªå¸¦çš„æ—¥å¿—</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-log4j2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>log4j2</code>æ”¯æŒ<code>yaml</code>å’Œ<code>json</code>æ ¼å¼çš„é…ç½®æ–‡ä»¶</p><table><thead><tr><th>æ ¼å¼</th><th>ä¾èµ–</th><th>æ–‡ä»¶å</th></tr></thead><tbody><tr><td>YAML</td><td>com.fasterxml.jackson.core:jackson-databind + com.fasterxml.jackson.dataformat:jackson-dataformat-yaml</td><td>log4j2.yaml + log4j2.yml</td></tr><tr><td>JSON</td><td>com.fasterxml.jackson.core:jackson-databind</td><td>log4j2.json + log4j2.jsn</td></tr></tbody></table><h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h2><ol><li>å¯¼å…¥ä»»ä½•ç¬¬ä¸‰æ–¹æ¡†æ¶,å…ˆæ’é™¤å®ƒçš„æ—¥å¿—åŒ…,å› ä¸ºSpringBootåº•å±‚æ§åˆ¶å¥½äº†æ—¥å¿—</li><li>ä¿®æ”¹<code>application.properties</code>é…ç½®æ–‡ä»¶,å°±å¯ä»¥è°ƒæ•´æ—¥å¿—çš„æ‰€æœ‰è¡Œä¸º.å¦‚æœä¸å¤Ÿ,å¯ä»¥ç¼–å†™æ—¥å¿—æ¡†æ¶è‡ªå·±çš„é…ç½®æ–‡ä»¶æ”¾åœ¨ç±»è·¯å¾„ä¸‹å°±è¡Œ,æ¯”å¦‚<code>logback-spring.xml</code>,<code>log4j2-spring.xml</code></li><li>å¦‚éœ€<strong>å¯¹æ¥ä¸“ä¸šæ—¥å¿—ç³»ç»Ÿ</strong>,ä¹Ÿåªéœ€è¦æŠŠ<code>logback</code>è®°å½•çš„æ—¥å¿—é…ç½®æ–‡ä»¶å¯¼å…¥<code>kafka</code>ä¹‹ç±»çš„ä¸­é—´ä»¶å³å¯,è¿™å’ŒSpringBootæ²¡å…³ç³»,éƒ½æ˜¯æ—¥å¿—æ¡†æ¶è‡ªå·±çš„é…ç½®,ä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯</li><li>ä¸šåŠ¡ä¸­ä½¿ç”¨slf4j-apiè®°å½•æ—¥å¿—</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ğŸ¤–ğŸ¤–-æ‘˜è¦:&lt;br&gt;æœ¬æ–‡ä»‹ç»äº†SpringBooté¡¹ç›®ä¸­æ—¥å¿—çš„ä½¿ç”¨æ–¹æ³•å’Œæ“ä½œæ­¥éª¤ã€‚åŒ…æ‹¬é»˜è®¤æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ï¼Œå¦‚ä½•ä¿®æ”¹é»˜è®¤æ ¼å¼ï¼Œæ—¥å¿—çº§åˆ«çš„è®¾å®šï¼Œåˆ†ç»„è®¾å®šï¼Œæ–‡ä»¶è¾“å‡ºåŠå½’æ¡£ä¸åˆ‡å‰²ã€‚æ–‡ç« ä¹Ÿæåˆ°æ—¥å¿—ç³»ç»Ÿçš„è‡ªå®šä¹‰é…ç½®ä»¥åŠå¦‚ä½•åˆ‡æ¢æ—¥å¿—ç»„åˆï¼Œå¹¶ä¸”æä¾›äº†æ—¥å¿—ä½¿ç”¨çš„</summary>
      
    
    
    
    <category term="å­¦ä¹ " scheme="http://fu-jw.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="SpringBoot" scheme="http://fu-jw.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Javaæ—¥å¿—ä½“ç³»</title>
    <link href="http://fu-jw.com/posts/c3b98719.html"/>
    <id>http://fu-jw.com/posts/c3b98719.html</id>
    <published>2023-06-12T00:00:00.000Z</published>
    <updated>2023-07-09T11:25:56.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ¤–ğŸ¤–-æ‘˜è¦:<br>æœ¬æ–‡ä»‹ç»äº†Javaçš„æ—¥å¿—ä½“ç³»ï¼ŒåŒ…æ‹¬æ—¥å¿—çš„å«ä¹‰ã€ç”¨é€”å’Œé‡è¦æ€§ã€‚æ¶µç›–äº†å‡ ç§å¸¸è§çš„æ—¥å¿—æ¡†æ¶å¦‚Log4jã€JULã€JCLã€SLF4Jã€Logbackå’ŒLog4j2çš„è¯¦ç»†ä»‹ç»ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„ä¼˜åŠ¿ã€åŠ£åŠ¿å’Œå·¥ä½œæœºåˆ¶ã€‚æ¨èä½¿ç”¨SLF4Jåšæ—¥å¿—é—¨é¢ï¼Œé…åˆLogbackæˆ–Log4j2åšæ—¥å¿—å®ç°ã€‚</p></blockquote><h1 id="Javaæ—¥å¿—ä½“ç³»"><a href="#Javaæ—¥å¿—ä½“ç³»" class="headerlink" title="Javaæ—¥å¿—ä½“ç³»"></a>Javaæ—¥å¿—ä½“ç³»</h1><p>æ—¥å¿—è®°å½•äº†ç³»ç»Ÿè¡Œä¸ºçš„æ—¶é—´, åœ°ç‚¹, çŠ¶æ€ç­‰ç›¸å…³ä¿¡æ¯, èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬äº†è§£å¹¶ç›‘æ§ç³»ç»ŸçŠ¶æ€,<br>åœ¨å‘ç”Ÿé”™è¯¯æˆ–è€…æ¥è¿‘æŸç§å±é™©çŠ¶æ€æ—¶èƒ½åŠæ—¶æé†’æˆ‘ä»¬å¤„ç†, åŒæ—¶åœ¨ç³»ç»Ÿäº§ç”Ÿé—®é¢˜, èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½, è¯Šæ–­é—®é¢˜.</p><p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ—¥å¿—å¯èƒ½æ˜¯æˆ‘ä»¬<strong>äº†è§£ç³»ç»Ÿè¿è¡ŒçŠ¶å†µçš„å”¯ä¸€æ–¹å¼</strong>, å…¶é‡è¦æ€§æ— éœ€èµ˜è¿°<br>æ€»ç»“å¦‚ä¸‹ä¼˜ç‚¹:</p><ul><li>è®°å½•ç³»ç»Ÿè¡Œä¸º</li><li>ç›‘æ§ç³»ç»ŸçŠ¶æ€</li><li>æç¤ºç³»ç»Ÿé£é™©</li><li>å®šä½ç³»ç»Ÿé—®é¢˜</li></ul><h2 id="System-out"><a href="#System-out" class="headerlink" title="System.out"></a>System.out</h2><p>åŒæ ·å¯ä»¥æ‰“å°ä¿¡æ¯, ä¸ºä»€ä¹ˆä¸ç”¨<code>System.out.print(&quot;&quot;)</code>?</p><ol><li>éš¾å®šä½<br><code>System.out.print</code>è¾“å‡ºçš„æ—¥å¿—åªæ‰“å°åœ¨æ§åˆ¶å°, æ²¡æœ‰å­˜å‚¨åˆ°ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ä¸­, ä¸”æ ¼å¼ä¸ç»Ÿä¸€, åœ¨ç”Ÿäº§ç¯å¢ƒè¿™æ ·æ‰“å°å‡ºæ¥å¾ˆéš¾å®šä½ä¿¡æ¯, æ„ä¹‰ä¸å¤§.</li><li>æ€§èƒ½å¼±<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    write(String.valueOf(s));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="built_in">this</span>) &#123;</span><br><span class="line">            ensureOpen();</span><br><span class="line">            textOut.write(s);</span><br><span class="line">            textOut.flushBuffer();</span><br><span class="line">            charOut.flushBuffer();</span><br><span class="line">            <span class="keyword">if</span> (autoFlush &amp;&amp; (s.indexOf(<span class="string">&#x27;\n&#x27;</span>) &gt;= <span class="number">0</span>))</span><br><span class="line">                out.flush();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (InterruptedIOException x) &#123;</span><br><span class="line">        Thread.currentThread().interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (IOException x) &#123;</span><br><span class="line">        trouble = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>ç”±ä¸Šé¢çš„æºç å¯ä»¥çœ‹å‡º<code>print</code>çš„æ–¹æ³•å®ç°æ˜¯ç”±<code>synchronized</code>åŒ…è£¹çš„åŒæ­¥ä»£ç å—<br>ä¸èƒ½å¼‚æ­¥æ‰“å°æ—¥å¿—, åœ¨<strong>é«˜å¹¶å‘</strong>çš„æƒ…å†µä¸‹, ä¼šä¸¥é‡<strong>å½±å“æ€§èƒ½</strong></li></ol><p><strong>é˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ:</strong></p><blockquote><p>ã€å¼ºåˆ¶ã€‘ åº”ç”¨ä¸­ä¸å¯ç›´æ¥ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿï¼ˆ Log4jã€ Logbackï¼‰ ä¸­çš„ APIï¼Œè€Œåº”ä¾èµ–ä½¿ç”¨æ—¥å¿—æ¡†æ¶ï¼ˆ SLF4Jã€ JCLâ€“Jakarta Commons Loggingï¼‰ ä¸­çš„ APIï¼Œä½¿ç”¨é—¨é¢æ¨¡å¼çš„æ—¥å¿—æ¡†æ¶ï¼Œæœ‰åˆ©äºç»´æŠ¤å’Œå„ä¸ªç±»çš„æ—¥å¿—å¤„ç†æ–¹å¼ç»Ÿä¸€<br>ã€å¼ºåˆ¶ã€‘ ç”Ÿäº§ç¯å¢ƒç¦æ­¢ç›´æ¥ä½¿ç”¨ System.out æˆ– System.err è¾“å‡ºæ—¥å¿—æˆ–ä½¿ç”¨e.printStackTrace()æ‰“å°å¼‚å¸¸å †æ ˆ<br>ã€å¼ºåˆ¶ã€‘ åœ¨æ—¥å¿—è¾“å‡ºæ—¶ï¼Œå­—ç¬¦ä¸²å˜é‡ä¹‹é—´çš„æ‹¼æ¥ä½¿ç”¨å ä½ç¬¦çš„æ–¹å¼<br>ã€å¼ºåˆ¶ã€‘ å¯¹äº trace&#x2F;debug&#x2F;info çº§åˆ«çš„æ—¥å¿—è¾“å‡ºï¼Œå¿…é¡»è¿›è¡Œæ—¥å¿—çº§åˆ«çš„å¼€å…³åˆ¤æ–­</p></blockquote><h2 id="Log4j"><a href="#Log4j" class="headerlink" title="Log4j"></a>Log4j</h2><p>Log for Java</p><p>Ceki GÃ¼lcÃ¼äº2001å¹´å‘å¸ƒäº†Log4j, å¹¶å°†å…¶æçŒ®ç»™Apacheè½¯ä»¶åŸºé‡‘ä¼š, æˆä¸ºApacheåŸºé‡‘ä¼šçš„é¡¶çº§é¡¹ç›®.<br>ApacheåŸºé‡‘ä¼šæœ€æ—©å®ç°çš„ä¸€å¥—æ—¥å¿—æ¡†æ¶, é€šè¿‡ä½¿ç”¨<code>Log4j</code></p><ul><li>å¯ä»¥<strong>æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°</strong>æ˜¯æ§åˆ¶å°, æ–‡ä»¶ç­‰</li><li>å¯ä»¥æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„<strong>è¾“å‡ºæ ¼å¼</strong></li><li>é€šè¿‡å®šä¹‰æ¯ä¸€æ¡<strong>æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«</strong>, æˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹</li><li>å¯ä»¥é€šè¿‡ä¸€ä¸ª<strong>é…ç½®æ–‡ä»¶</strong>æ¥çµæ´»åœ°è¿›è¡Œé…ç½®, è€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç  â˜†â˜†</li></ul><p><code>Log4j</code>ä¸»è¦ç”±<code>Loggers</code>(æ—¥å¿—è®°å½•å™¨), <code>Appenders</code>(è¾“å‡ºç«¯), <code>Layout</code>(æ ¼å¼åŒ–).</p><ul><li><code>Loggers</code>æ§åˆ¶æ—¥å¿—è¾“å‡ºçº§åˆ«ä¸æ—¥å¿—æ˜¯å¦è¾“å‡º</li><li><code>Appenders</code>æŒ‡å®šæ—¥å¿—çš„è¾“å‡ºæ–¹å¼(è¾“å‡ºåˆ°æ§åˆ¶å°æˆ–æ–‡ä»¶ç­‰)</li><li><code>Layout</code>æ§åˆ¶æ—¥å¿—çš„è¾“å‡ºæ ¼å¼</li></ul><blockquote><p>2015å¹´9æœˆ, Apacheè½¯ä»¶åŸºé‡‘ä¸šå®£å¸ƒ, Log4jä¸å†ç»´æŠ¤, å»ºè®®æ‰€æœ‰ç›¸å…³é¡¹ç›®å‡çº§åˆ°Log4j2.</p></blockquote><h2 id="JUL"><a href="#JUL" class="headerlink" title="JUL"></a>JUL</h2><p>Java Util Logging</p><p>SUNå…¬å¸åœ¨JDK1.4å‘å¸ƒçš„JavaåŸç”Ÿçš„æ—¥å¿—æ¡†æ¶, ä½¿ç”¨æ—¶ä¸éœ€è¦å¦å¤–å¼•ç”¨ç¬¬ä¸‰æ–¹çš„ç±»åº“, ç›¸å¯¹å…¶ä»–çš„æ¡†æ¶ä½¿ç”¨æ–¹ä¾¿</p><ol><li>åˆå§‹åŒ–<code>LogManager</code><ol><li><code>LogManager</code>åŠ è½½logging.propertiesé…ç½®</li><li>æ·»åŠ <code>Logger</code>åˆ°<code>LogManager</code></li></ol></li><li>ä»<code>LogManager</code>ä¸­è·å–<code>Logger</code></li><li>è®¾ç½®çº§åˆ«<code>Level</code>, å¹¶æŒ‡å®šæ—¥å¿—è®°å½•<code>LogRecord</code></li><li><code>Filter</code>æä¾›æ—¥å¿—çº§åˆ«ä¹‹å¤–æ›´ç»†ç²’åº¦çš„æ§åˆ¶</li><li><code>Handler</code>æ˜¯ç”¨æ¥å¤„ç†æ—¥å¿—è¾“å‡ºä½ç½®</li><li><code>Formatter</code>ç”¨æ¥æ ¼å¼åŒ–LogRecord</li></ol><!-- ![JULæµç¨‹](https://s2.loli.net/2023/06/13/bCoUrAMwVqHFGz7.webp) --><img src="https://image.fu-jw.com/img/2023/07/01/649f79a49ed5f.webp"/><h2 id="JCL"><a href="#JCL" class="headerlink" title="JCL"></a>JCL</h2><p>Jakarta Commons Logging</p><blockquote><p>JULçš„apiä¸log4jæ˜¯å®Œå…¨ä¸åŒçš„(å‚æ•°åªæ¥å—string).ç”±äºæ—¥å¿—ç³»ç»Ÿæ²¡æœ‰äº’ç›¸å…³è”,å½¼æ­¤æ²¡æœ‰çº¦å®š,ä¸åŒäººçš„ä»£ç ä½¿ç”¨ä¸åŒæ—¥å¿—,æ›¿æ¢å’Œç»Ÿä¸€ä¹Ÿå°±å˜æˆäº†ä¸€ä»¶éå¸¸æ£˜æ‰‹çš„äº‹æƒ….<br>é‚£æˆ‘ä»¬è¯¥å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢?<br>æŠ½è±¡å‡ºä¸€ä¸ªæ¥å£å±‚,å¯¹æ¯ä¸ªæ—¥å¿—å®ç°éƒ½é€‚é…æˆ–è€…è½¬æ¥,è¿™æ ·è¿™äº›æä¾›ç»™åˆ«äººçš„åº“éƒ½ç›´æ¥ä½¿ç”¨æŠ½è±¡å±‚å³å¯,ä»¥åéœ€è¦è°ƒç”¨çš„æ—¶å€™,å°±è°ƒç”¨è¿™äº›æ¥å£.</p></blockquote><p>ApacheåŸºé‡‘ä¸‹Jakartaå°ç»„å¼€å‘çš„é€šç”¨æ—¥å¿—API</p><p>ä¸»è¦åŠŸèƒ½æ˜¯ç»™<strong>æ‰€æœ‰çš„æ—¥å¿—å®ç°</strong>æä¾›ä¸€ä¸ª<strong>ç»Ÿä¸€æ¥å£</strong>, æœ¬èº«ä¹Ÿæä¾›æ—¥å¿—å®ç°(SimpleLog),ä½†æ˜¯å¾ˆå¼±ä¸€èˆ¬ä¸ç”¨.<br>å¸¸è§çš„æ—¥å¿—å®ç°å¦‚:æœ€æ—©çš„<strong>Log4j</strong>ä»¥åŠJDKè‡ªå¸¦çš„<strong>JUL</strong>ç­‰</p><!-- ![JCL](https://s2.loli.net/2023/06/13/EZ62fIKGMwTsRDn.webp) --><img src="https://image.fu-jw.com/img/2023/07/01/649f79de6b8b2.webp"/><p>æ—¥å¿—é—¨é¢çš„å¥½å¤„:</p><ul><li><strong>é¢å‘æ¥å£ç¼–ç¨‹</strong>  è§£è€¦åˆ</li><li>å¯çµæ´»åˆ‡æ¢æ—¥å¿—æ¡†æ¶</li><li>ç»Ÿä¸€æ—¥å¿—APIæ–¹ä¾¿ä½¿ç”¨</li><li>ç»Ÿä¸€æ—¥å¿—é…ç½®å’Œç®¡ç†</li></ul><blockquote><p>ç”±äºè®¾è®¡ç¼ºé™·,åªæ”¯æŒå½“æ—¶ä¸»æµçš„å‡ ä¸ªæ—¥å¿—å®ç°,ä¸åˆ©äºå…¶ä»–æ—¥å¿—çš„ä½¿ç”¨(éœ€ä¿®æ”¹æºç ),ç°å·²æ·˜æ±°!!!</p></blockquote><h2 id="SLF4J"><a href="#SLF4J" class="headerlink" title="SLF4J"></a>SLF4J</h2><blockquote><p><code>Log4j</code>çš„ä½œè€…è§‰å¾—<code>JCL</code>ä¸å¥½ç”¨,è‡ªå·±åˆå†™äº†ä¸€ä¸ªæ–°çš„æ¥å£api,å°±æ˜¯<code>SLF4J</code>,<br>å¹¶ä¸”ä¸ºäº†è¿½æ±‚æ›´æè‡´çš„æ€§èƒ½,æ–°å¢äº†ä¸€å¥—æ—¥å¿—çš„å®ç°,å°±æ˜¯<code>logback</code></p></blockquote><p>Simple Logging Facade For Java</p><p><code>SLF4J</code>ä¸»è¦ç»™Javaæ—¥å¿—è®¿é—®æä¾›ä¸€å¥—æ ‡å‡†,è§„èŒƒçš„APIæ¡†æ¶.</p><p>ç›®å‰å¸‚é¢æœ€æµè¡Œçš„æ—¥å¿—é—¨é¢,ä¸»è¦åŠŸèƒ½:</p><ul><li>æ—¥å¿—æ¡†æ¶çš„ç»‘å®š</li><li>æ—¥å¿—æ¡†æ¶çš„æ¡¥æ¥</li></ul><h3 id="SLF4Jçš„å„ç§ç»„åˆ"><a href="#SLF4Jçš„å„ç§ç»„åˆ" class="headerlink" title="SLF4Jçš„å„ç§ç»„åˆ"></a>SLF4Jçš„å„ç§ç»„åˆ</h3><!-- ![SLF4J](https://s2.loli.net/2023/06/14/q1GbgIwUevMZ8WA.webp) --><img src="https://image.fu-jw.com/img/2023/07/01/649f7a7907f73.webp"/>éœ€å¯¹åº”çš„é€‚é…å™¨<ul><li><p>SLF4J unbound:æ²¡æœ‰ç»‘å®šå®ç°,åˆ™åªæœ‰æ¥å£,æ²¡æœ‰æ—¥å¿—åŠŸèƒ½</p></li><li><p>SLF4J bound to logback:logbackæ˜¯åå‡ºç°çš„æ—¥å¿—å®ç°,å®ç°äº†SLF4Jæ¥å£,å¯ç›´æ¥æ­é…ä½¿ç”¨</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">SLF4J + logback ç»„åˆç»“æœ(é»‘è‰²å­—ä½“):</span><br><span class="line">20:24:32.167 [main] ERROR com.fredo.slf4j.SLF4JTest -- error</span><br><span class="line">20:24:32.172 [main] WARN com.fredo.slf4j.SLF4JTest -- warn</span><br><span class="line">20:24:32.172 [main] INFO com.fredo.slf4j.SLF4JTest -- info</span><br><span class="line">20:24:32.172 [main] ERROR com.fredo.slf4j.SLF4JTest -- å‡ºç°å¼‚å¸¸:java.lang.ArithmeticException: / by zero</span><br><span class="line"></span><br><span class="line">æ³¨æ„:æ³¨é‡Šslf4j-simple, å¹¶ä¸”ä¸è¦æ’é™¤SpringBootå†…ç½®çš„æ—¥å¿—å®ç°:logback</span><br></pre></td></tr></table></figure></li><li><p>SLF4J bound to reload4j:reload4jæ˜¯å…ˆå‡ºç°çš„æ—¥å¿—å®ç°,æ²¡æœ‰å®ç°äº†SLF4Jæ¥å£,éœ€é…åˆé€‚é…å™¨ä½¿ç”¨</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">SLF4J + log4j ç»„åˆç»“æœ:</span><br><span class="line"> 2023-06-11 20:38:19.738 error</span><br><span class="line"> 2023-06-11 20:38:19.739 warn</span><br><span class="line"> 2023-06-11 20:38:19.739 info</span><br><span class="line"> 2023-06-11 20:38:19.739 debug</span><br><span class="line"> 2023-06-11 20:38:19.740 trace</span><br><span class="line"> 2023-06-11 20:38:19.741 å‡ºç°å¼‚å¸¸:java.lang.ArithmeticException: / by zero</span><br><span class="line"></span><br><span class="line"> æ³¨æ„:éœ€è¦é€‚é…å™¨:slf4j-log4j12ä»¥åŠlog4jå¯¹åº”çš„é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure></li><li><p>SLF4J bound to JUL:JULæ˜¯å…ˆå‡ºç°çš„æ—¥å¿—å®ç°,æ²¡æœ‰å®ç°äº†SLF4Jæ¥å£,éœ€é€‚é…å™¨ä½¿ç”¨</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">SLF4J + JUL ç»„åˆç»“æœ(çº¢è‰²å­—ä½“):</span><br><span class="line"> 6æœˆ 11, 2023 20:42:46 ä¸Šåˆ com.fredo.slf4j.SLF4JTest test01</span><br><span class="line"> SEVERE: error</span><br><span class="line"> 6æœˆ 11, 2023 20:42:46 ä¸Šåˆ com.fredo.slf4j.SLF4JTest test01</span><br><span class="line"> WARNING: warn</span><br><span class="line"> 6æœˆ 11, 2023 20:42:46 ä¸Šåˆ com.fredo.slf4j.SLF4JTest test01</span><br><span class="line"> INFO: info</span><br><span class="line"> 6æœˆ 11, 2023 20:42:46 ä¸Šåˆ com.fredo.slf4j.SLF4JTest test01</span><br><span class="line"> SEVERE: å‡ºç°å¼‚å¸¸:java.lang.ArithmeticException: / by zero</span><br><span class="line"></span><br><span class="line"> æ³¨æ„:JDKé»˜è®¤è‡ªå¸¦æ— éœ€ä¾èµ–,ä½†éœ€è¦å¯¹åº”çš„é€‚é…å™¨:slf4j-jdk14</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>SLF4J bound to simple:simpleæ˜¯åå‡ºç°çš„æ—¥å¿—å®ç°,å®ç°äº†SLF4Jæ¥å£,å¯ç›´æ¥æ­é…ä½¿ç”¨</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">SLF4J + SLF4J-Simple ç»„åˆç»“æœ(çº¢è‰²å­—ä½“):</span><br><span class="line"> [main] ERROR com.fredo.slf4j.SLF4JTest - error</span><br><span class="line"> [main] WARN com.fredo.slf4j.SLF4JTest - warn</span><br><span class="line"> [main] INFO com.fredo.slf4j.SLF4JTest - info</span><br><span class="line"> [main] ERROR com.fredo.slf4j.SLF4JTest - å‡ºç°å¼‚å¸¸:java.lang.ArithmeticException: / by zero</span><br><span class="line"></span><br><span class="line"> æ³¨æ„:éœ€è¦æå‰æ’é™¤:logback.SpringBooté»˜è®¤çš„æ—¥å¿—å®ç°</span><br><span class="line"> &lt;dependency&gt;</span><br><span class="line">     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">     &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">     &lt;exclusions&gt;</span><br><span class="line">         &lt;exclusion&gt;</span><br><span class="line">             &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;</span><br><span class="line">             &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;</span><br><span class="line">         &lt;/exclusion&gt;</span><br><span class="line">     &lt;/exclusions&gt;</span><br><span class="line"> &lt;/dependency&gt;</span><br></pre></td></tr></table></figure></li><li><p>SLF4J bound to nop:nopæ˜¯æ—¥å¿—å¼€å…³,å…³é—­æ—¥å¿—å®ç°,ä¸æ‰“å°æ—¥å¿—</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">SLF4J + slf4j-nop ç»„åˆç»“æœ:</span><br><span class="line"> æ— ä»»ä½•æ‰“å°(slf4j-nopå…³é—­äº†æ—¥å¿—æ‰“å°)</span><br><span class="line"></span><br><span class="line"> æ³¨æ„:æå‰æ’é™¤SpringBooté»˜è®¤è‡ªå¸¦çš„logbackæ—¥å¿—å®ç°.</span><br></pre></td></tr></table></figure></li></ul><p>å°ç»“ä¸€ä¸‹:</p><ul><li>æ·»åŠ ä¾èµ–:<code>slf4j-api</code>,ä½¿ç”¨<code>sl4j</code>çš„APIåœ¨é¡¹ç›®ä¸­è¿›è¡Œç»Ÿä¸€æ—¥å¿—è®°å½•</li><li>ç»‘å®šå…·ä½“çš„æ—¥å¿—å®ç°<ul><li>å¯¹äºå·²ç»å®ç°äº†<code>sl4j</code>APIçš„æ—¥å¿—å®ç°,ç›´æ¥æ·»åŠ å¯¹åº”çš„ä¾èµ–å³å¯</li><li>å¯¹äºæ²¡æœ‰å®ç°<code>sl4j</code>APIçš„æ—¥å¿—å®ç°,éœ€è¦å…ˆæ·»åŠ å¯¹åº”çš„æ—¥å¿—<strong>é€‚é…å™¨</strong>,å†æ·»åŠ å¯¹åº”çš„ä¾èµ–</li></ul></li><li><code>sl4j</code>æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæ—¥å¿—å®ç°çš„ç»‘å®š,å‡ºç°å¤šä¸ªæ—¶é»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ª</li></ul><h3 id="SLF4Jæ¡¥æ¥å™¨"><a href="#SLF4Jæ¡¥æ¥å™¨" class="headerlink" title="SLF4Jæ¡¥æ¥å™¨"></a>SLF4Jæ¡¥æ¥å™¨</h3><blockquote><p>ä»¥ä¸Šéƒ½æ˜¯SLF4Jå’Œä¸åŒçš„æ—¥å¿—ç»„åˆå®ç°,å¯ä»¥å‘ç°ä¸åŒçš„æ—¥å¿—æ¡†æ¶æ‰“å°çš„æ—¥å¿—æ ¼å¼ä¸ä¸€!!!<br>è¿™æ˜¯å› ä¸ºSLF4Jä¸ºäº†é€‚é…ä¸åŒçš„æ—¥å¿—æ¡†æ¶æä¾›äº†ä¸åŒçš„<strong>é€‚é…å™¨</strong>,å…·ä½“çš„æ—¥å¿—è®°å½•è¿˜æ˜¯äº¤ç»™å¯¹åº”çš„æ—¥å¿—æ¡†æ¶å®ç°çš„</br><br>SLF4Jè¿˜æä¾›äº†<strong>æ¡¥æ¥å™¨</strong>!!!<br>æ¡¥æ¥å™¨åˆ™æ˜¯ç”±SLF4Jå®ç°ä¸€å¥—å¯¹åº”çš„æ—¥å¿—æ¡†æ¶çš„API,æ—¥å¿—çš„è®°å½•æ‰“å°å®Œå…¨ç”±è¿™å¥—APIå®ç°,å¯ä»¥åšåˆ°æ ¼å¼ç»Ÿä¸€,ä¸”æ—§ä»£ç æ— éœ€ä»»ä½•æ›´æ”¹.</p></blockquote><p><strong>æ¡¥æ¥å™¨</strong>è§£å†³çš„æ˜¯é¡¹ç›®ä¸­æ—¥å¿—çš„é—ç•™é—®é¢˜,å½“ç³»ç»Ÿä¸­å­˜åœ¨ä¹‹å‰çš„æ—¥å¿—APIå¯ä»¥é€šè¿‡æ¡¥æ¥è½¬æ¢åˆ°SLF4Jçš„å®ç°</p><ol><li>ç§»é™¤æ—§æ—¥å¿—æ¡†æ¶çš„ä¾èµ–â€“æ­¤æ—¶æ—§ä»£ç ä¼šæŠ¥é”™(æ²¡æœ‰ä¾èµ–äº†)</li><li>æ·»åŠ SLF4Jæä¾›çš„å¯¹åº”çš„æ¡¥æ¥ç»„ä»¶â€“SLF4Jè‡ªå·±æä¾›ä¸€å¥—API,æ—§ä»£ç ä¸å†æŠ¥é”™</li><li>ä¸ºé¡¹ç›®æ·»åŠ SLF4Jçš„å…·ä½“å®ç°â€“å°±æ˜¯æ–°çš„æ—¥å¿—å®ç°(SLF4Jä½œä¸ºæ—¥å¿—é—¨é¢,è¿˜éœ€è¦å…·ä½“çš„æ—¥å¿—å®ç°)</li></ol><!-- ![SLF4Jæ¡¥æ¥](https://s2.loli.net/2023/06/14/YI3nCNavq5oZFbU.webp) --><img src="https://image.fu-jw.com/img/2023/07/01/649f7a9bba159.webp"/><h3 id="ä»£ç æ¼”ç¤º"><a href="#ä»£ç æ¼”ç¤º" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><p>pom.xmléƒ¨åˆ†å†…å®¹:</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">å‡è®¾ä»¥å‰ä½¿ç”¨äº†log4jçš„æ—¥å¿—æ¡†æ¶,ä½†åç»­æƒ³è¦æ”¹ç”¨å…¶ä»–æ—¥å¿—æ¡†æ¶,å¦‚logback</span></span><br><span class="line"><span class="comment">åŸæ¥çš„ä»£ç ç”±äºä½¿ç”¨çš„log4j,ä¾èµ–ä¹Ÿæ˜¯log4jçš„API,ç°åœ¨æ²¡æœ‰äº†log4jçš„ä¾èµ–åˆ™ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment">å½“æœ‰äº†æ¡¥æ¥å™¨åˆ™åªéœ€è¦å¼•å…¥å¯¹åº”çš„æ¡¥æ¥å™¨å³å¯,æ—§ä»£ç æ— ä»»ä½•æ”¹åŠ¨</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;groupId&gt;log4j&lt;/groupId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;artifactId&gt;log4j&lt;/artifactId&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;version&gt;1.2.17&lt;/version&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--log4jå’Œslf4jçš„æ¡¥æ¥å™¨--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å°†log4jæ¡¥æ¥åˆ°slf4j,slf4jå†å»ä½¿ç”¨logbackè®°å½•æ—¥å¿—--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç :</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¡¥æ¥å™¨æ¼”ç¤º</span></span><br><span class="line"><span class="comment"> *  å‡è®¾ä»¥å‰ä½¿ç”¨çš„æ—¥å¿—æ˜¯:Log4j</span></span><br><span class="line"><span class="comment"> *  ç°åœ¨è¦æ¢æˆLogback(SpringBoot é»˜è®¤è‡ªå¸¦,æ— éœ€å¼•å…¥ä¾èµ–)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Log4jTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> Logger.getLogger(Log4jTest.class);</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">&quot;Hello Log4j&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨log4jæ—¶,æ‰“å°ä¿¡æ¯:</span></span><br><span class="line"><span class="comment">     *  2023-06-11 21:52:29.039 Hello Log4j</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨log4jå’Œslf4jçš„æ¡¥æ¥å™¨æ—¶,æ‰“å°ä¿¡æ¯:</span></span><br><span class="line"><span class="comment">     *  22:10:38.352 [main] INFO com.fredo.slf4j.Log4jTest -- Hello Log4j</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„:**é€‚é…å™¨å’Œæ¡¥æ¥å™¨ä¸è¦åŒæ—¶å‡ºç°!!!**å¦åˆ™å¯èƒ½å‡ºç°<code>StackOverflowError</code>å¼‚å¸¸(æˆ‘æ²¡æ¼”ç¤ºå‡ºæ¥~~~)</p><h2 id="Logback"><a href="#Logback" class="headerlink" title="Logback"></a>Logback</h2><p>æ˜¯<code>Log4j</code>çš„åˆ›å§‹äººè®¾è®¡çš„å¦ä¸€ä¸ªå¼€æºæ—¥å¿—ç»„ä»¶,æ€§èƒ½æ¯”<code>Log4j</code>å¥½.</p><p>logbackåˆ†ä¸ºä¸‰ä¸ªæ¨¡å—:</p><ul><li>logback-core:å…¶ä»–ä¸¤ä¸ªæ¨¡å—çš„æ ¸å¿ƒ</li><li>logback-classic:å…¼å®¹<code>log4j 1.x</code>å’Œ<code>JUL</code>,å¹¶è¿›è¡Œäº†æ”¹è¿›</li><li>logback-access:ä¸Servletå®¹å™¨(å¦‚Tomcatå’ŒJetty)é›†æˆ,ä»¥æä¾›<code>HTTP</code>è®¿é—®æ—¥å¿—åŠŸèƒ½</li></ul><h2 id="Log4j2"><a href="#Log4j2" class="headerlink" title="Log4j2"></a>Log4j2</h2><p>Apache <code>Log4j2</code>æ˜¯å¯¹<code>Log4j</code>çš„é‡å¤§å‡çº§,å¹¶å‚è€ƒäº†<code>logback</code>çš„ä¸€äº›ä¼˜ç§€è®¾è®¡,ä¸»è¦ç‰¹ç‚¹:</p><ul><li>å¼‚å¸¸å¤„ç†æœºåˆ¶: åœ¨<code>logback</code>ä¸­,<code>Appender</code>ä¸­çš„å¼‚å¸¸ä¸ä¼šè¢«æ„ŸçŸ¥åˆ°,ä½†åœ¨<code>log4j2</code>ä¸­æä¾›äº†å¼‚å¸¸å¤„ç†æœºåˆ¶</li><li>æ€§èƒ½æå‡: ç›¸è¾ƒ<code>log4j</code>å’Œ<code>logback</code>éƒ½æœ‰æ˜æ˜¾æ€§èƒ½æå‡</li><li>è‡ªåŠ¨é‡è½½é…ç½®: å‚è€ƒ<code>logback</code>çš„è®¾è®¡,è‡ªåŠ¨åˆ·æ–°å‚æ•°é…ç½®,ç”Ÿäº§ç¯å¢ƒå¯åŠ¨æ€ä¿®æ”¹æ—¥å¿—é…ç½®</li><li>æ— åƒåœ¾æœºåˆ¶: é¿å…é¢‘ç¹çš„æ—¥å¿—æ”¶é›†å¯¼è‡´JVMçš„GC.</li></ul><p>æ³¨æ„:<code>Log4j2</code>æ—¢æ˜¯æ—¥å¿—é—¨é¢åˆæ˜¯æ—¥å¿—å®ç°,ä½†<code>SLF4J</code>æ—¥å¿—é—¨é¢æ›´æ—©å‡ºç°æ›´æµè¡Œ,æ‰€ä»¥å¸‚é¢ä¸Šä¸»æµçš„æ­é…è¿˜æ˜¯<code>SLF4J</code>+<code>Logback</code>&#x2F;<code>Log4J2</code></p><ul><li>log4j-api: æ˜¯æ—¥å¿—é—¨é¢</li><li>log4j-core: æ˜¯æ—¥å¿—å®ç°</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¸‚é¢ä¸Šçš„æ—¥å¿—æ¡†æ¶å¯åˆ†æˆä¸¤ç±»:æ—¥å¿—é—¨é¢å’Œæ—¥å¿—å®ç°</p><!-- ![æ—¥å¿—åˆ†ç±»](https://s2.loli.net/2023/06/16/6ApzJit1ovaQ9w5.webp) --><img src="https://image.fu-jw.com/img/2023/07/01/649f7acd02dad.webp"/><p>é¡¹ç›®ä¸­ä¼šé€‰ä¸€ä¸ªæ—¥å¿—é—¨é¢å’Œä¸€ä¸ªæ—¥å¿—å®ç°ç»„åˆ</p><ul><li>æ—¥å¿—é—¨é¢ä¸€èˆ¬é€‰<code>SLF4J</code>,ç›¸æ¯”<code>JCL</code>æ›´ç®€å•å¥½ç”¨</li><li>æ—¥å¿—å®ç°ä¸€èˆ¬é€‰<code>Logback</code>.<code>SLF4J</code>å’Œ<code>Logback</code>&#x2F;<code>Log4j</code>æ˜¯åŒä¸€ä¸ªä½œè€…æ›´æ˜“æ­é…,ä¸”<code>Logback</code>æ˜¯<code>Log4j</code>çš„å‡çº§ç‰ˆ</li></ul><p>å¸‚é¢ä¸Šå¸¸è§æ­é…æ˜¯:<code>SLF4J</code>+<code>Logback</code>(ä¹Ÿæ˜¯SpringBootçš„é»˜è®¤)</p><p>è€ŒApacheåŸºé‡‘æ–°æ¨å‡ºçš„<code>Log4j2</code>æ¯”<code>Logback</code>æ€§èƒ½æ›´å¥½,<code>SLF4J</code>+<code>Log4j2</code>ä¹Ÿæ˜¯å¤§åŠ¿æ‰€è¶‹.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ğŸ¤–ğŸ¤–-æ‘˜è¦:&lt;br&gt;æœ¬æ–‡ä»‹ç»äº†Javaçš„æ—¥å¿—ä½“ç³»ï¼ŒåŒ…æ‹¬æ—¥å¿—çš„å«ä¹‰ã€ç”¨é€”å’Œé‡è¦æ€§ã€‚æ¶µç›–äº†å‡ ç§å¸¸è§çš„æ—¥å¿—æ¡†æ¶å¦‚Log4jã€JULã€JCLã€SLF4Jã€Logbackå’ŒLog4j2çš„è¯¦ç»†ä»‹ç»ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„ä¼˜åŠ¿ã€åŠ£åŠ¿å’Œå·¥ä½œæœºåˆ¶ã€‚æ¨èä½¿ç”¨SLF4Jåšæ—¥å¿—é—¨</summary>
      
    
    
    
    <category term="å­¦ä¹ " scheme="http://fu-jw.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="Java" scheme="http://fu-jw.com/tags/Java/"/>
    
    <category term="SpringBoot" scheme="http://fu-jw.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootè‡ªåŠ¨é…ç½®åŸç†æµ…æ</title>
    <link href="http://fu-jw.com/posts/ab942f3d.html"/>
    <id>http://fu-jw.com/posts/ab942f3d.html</id>
    <published>2023-06-03T00:00:00.000Z</published>
    <updated>2023-07-09T11:25:56.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ¤–ğŸ¤–-æ‘˜è¦:<br>æœ¬æ–‡ä»‹ç»äº†SpringBootè‡ªåŠ¨é…ç½®çš„åŸç†, åŒ…æ‹¬è‡ªåŠ¨é…ç½®æµç¨‹ï¼Œæ ¸å¿ƒé…ç½®æµç¨‹ä»¥åŠå¦‚ä½•å®æ–½è‡ªåŠ¨é…ç½®ã€‚é¦–å…ˆå¯¼å…¥â€™starterâ€™ä»¥è·å¾—æ¥è‡ªâ€™autoconfigureâ€™åŒ…çš„é…ç½®, ç„¶åä½¿ç”¨â€˜@EnableAutoConfigurationâ€™è‡ªåŠ¨è½½å…¥æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»ã€‚æ ¹æ®æ¡ä»¶é€‰æ‹©éœ€è¦çš„é…ç½®ç±»åï¼Œä¸Šè¿°ç±»å°†ä½¿ç”¨ç”±é…ç½®æ–‡ä»¶ä¸­çš„ç‰¹å®šå‰ç¼€å±æ€§å€¼æå–è€Œæˆçš„ç»„ä»¶ï¼Œä»è€Œå®ç°è‡ªåŠ¨é…ç½®ã€‚</p></blockquote><h1 id="SpringBootè‡ªåŠ¨é…ç½®åŸç†æµ…æ"><a href="#SpringBootè‡ªåŠ¨é…ç½®åŸç†æµ…æ" class="headerlink" title="SpringBootè‡ªåŠ¨é…ç½®åŸç†æµ…æ"></a>SpringBootè‡ªåŠ¨é…ç½®åŸç†æµ…æ</h1><blockquote><p>æˆ‘çš„<a href="https://github.com/fu-jw/spring-tutorial">SpringBooté¡¹ç›®</a>ç¬¬äºŒä¸ªæ¨¡å—</p></blockquote><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­, é€šå¸¸æˆ‘ä»¬åªéœ€è¦å¼•å…¥æŸä¸ª<code>åœºæ™¯å¯åŠ¨å™¨</code>, å†åŠ ä¸Šä¸€äº›ç›¸åº”çš„é…ç½®å³å¯, æ— éœ€è´¹å¿ƒå¤æ‚çš„æ•´åˆæ“ä½œ, è¿™ä¹Ÿæ˜¯ SpringBoot çš„å¼ºå¤§ä¹‹å¤„.</p><p>SpringBoot æ˜¯å¦‚ä½•çœå»ç¹æ‚çš„æ•´åˆè¿‡ç¨‹çš„å‘¢?</p><p>æ¥ä¸‹æ¥æŒ‰ç…§æµç¨‹ä¸€æ­¥ä¸€æ­¥åˆ†æ.</p><h2 id="SpringBootè‡ªåŠ¨é…ç½®æµç¨‹"><a href="#SpringBootè‡ªåŠ¨é…ç½®æµç¨‹" class="headerlink" title="SpringBootè‡ªåŠ¨é…ç½®æµç¨‹"></a>SpringBootè‡ªåŠ¨é…ç½®æµç¨‹</h2><h3 id="1-å¯¼å…¥starter"><a href="#1-å¯¼å…¥starter" class="headerlink" title="1.å¯¼å…¥starter"></a>1.å¯¼å…¥<code>starter</code></h3><p>ä»¥<code>webåœºæ™¯</code>ä¸ºä¾‹, å¯¼å…¥äº†webå¼€å‘åœºæ™¯</p><ol><li>åœºæ™¯å¯åŠ¨å™¨å¯¼å…¥äº†ç›¸å…³åœºæ™¯çš„æ‰€æœ‰ä¾èµ–, å¦‚ä¸‹:<ul><li><code>starter-json</code>,<code>starter-tomcat</code>,<code>springMVC</code></li></ul></li><li>æ¯ä¸ªåœºæ™¯å¯åŠ¨å™¨éƒ½å¼•å…¥äº†ä¸€ä¸ª<code>spring-boot-starter</code>, <strong>æ ¸å¿ƒåœºæ™¯å¯åŠ¨å™¨</strong></li><li><strong>æ ¸å¿ƒåœºæ™¯å¯åŠ¨å™¨</strong>å¼•å…¥äº†<code>spring-boot-autoconfigure</code>åŒ…</li><li><code>spring-boot-autoconfigure</code>é‡Œé¢å›Šæ‹¬äº†æ‰€æœ‰åœºæ™¯çš„æ‰€æœ‰é…ç½®</li><li>åªè¦è¿™ä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ç±»éƒ½èƒ½ç”Ÿæ•ˆ, é‚£ä¹ˆç›¸å½“äºSpringBootå®˜æ–¹å†™å¥½çš„æ•´åˆåŠŸèƒ½å°±ç”Ÿæ•ˆäº†</li><li>SpringBooté»˜è®¤å´æ‰«æä¸åˆ°<code>spring-boot-autoconfigure</code>ä¸‹å†™å¥½çš„æ‰€æœ‰<strong>é…ç½®ç±»</strong>.<ul><li>è¿™äº›<strong>é…ç½®ç±»</strong>ç»™æˆ‘ä»¬åšäº†æ•´åˆæ“ä½œ,é»˜è®¤åªæ‰«æä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…</li></ul></li></ol><h3 id="2-ä¸»ç¨‹åºï¼š-SpringBootApplication"><a href="#2-ä¸»ç¨‹åºï¼š-SpringBootApplication" class="headerlink" title="2.ä¸»ç¨‹åºï¼š@SpringBootApplication"></a>2.ä¸»ç¨‹åºï¼š@SpringBootApplication</h3><p>ä¸ºä»€ä¹ˆå¼•å…¥åœºæ™¯,æ— éœ€é…ç½®å°±å·²ç»æ•´åˆå®Œæˆäº†?ä¸€åˆ‡éƒ½è¦ä»<code>@SpringBootApplication</code>å¼€å§‹</p><p><code>@SpringBootApplication</code>ç”±ä¸‰ä¸ªæ³¨è§£ç»„æˆ<code>@SpringBootConfiguration</code>,<code>@EnableAutoConfiguration</code>,<code>@ComponentScan</code></p><ul><li><code>@SpringBootConfiguration</code> å…¶å®å°±æ˜¯<code>@Configuration</code>, å£°æ˜ä¸»ç¨‹åºç±»æ˜¯ä¸€ä¸ª<strong>é…ç½®ç±»</strong></li><li><code>@ComponentScan</code> SpringBooté»˜è®¤åªèƒ½æ‰«æè‡ªå·±ä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…åŠå…¶ä¸‹é¢çš„å­åŒ…, æ‰«æä¸åˆ°<code>spring-boot-autoconfigure</code>åŒ…ä¸­å®˜æ–¹å†™å¥½çš„<strong>é…ç½®ç±»</strong></li><li><code>@EnableAutoConfiguration</code>å°±æ˜¯SpringBootå¼€å¯<strong>è‡ªåŠ¨é…ç½®</strong>çš„æ ¸å¿ƒ</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Import(AutoConfigurationImportSelector.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableAutoConfiguration &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong><code>@Import(AutoConfigurationImportSelector.class)</code> å¯ä»¥æ‰¹é‡ç»™å®¹å™¨ä¸­å¯¼å…¥ç»„ä»¶</strong></li><li><a href="mailto:&#83;&#112;&#x72;&#105;&#110;&#103;&#66;&#111;&#111;&#x74;&#x40;&#51;&#x2e;&#x31;&#x2e;&#48;">&#83;&#112;&#x72;&#105;&#110;&#103;&#66;&#111;&#111;&#x74;&#x40;&#51;&#x2e;&#x31;&#x2e;&#48;</a> ä¼šæ‰¹é‡å¯¼å…¥146ä¸ª<strong>è‡ªåŠ¨é…ç½®ç±»</strong>(<code>xxxAutoConfiguration</code>)</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AutoConfigurationImportSelector</span> <span class="keyword">implements</span> <span class="title class_">DeferredImportSelector</span>, BeanClassLoaderAware,</span><br><span class="line">ResourceLoaderAware, BeanFactoryAware, EnvironmentAware, Ordered &#123; </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * æ‰¹é‡è·å–å€™é€‰é…ç½®</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span>    annotationMetadata æ³¨è§£å…ƒä¿¡æ¯(ä¸»ç¨‹åºå…¨ç±»å,æœ¬é¡¹ç›®ä¸º:com.fredo.Main)</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span>   å€™é€‰é…ç½®çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> String[] selectImports(AnnotationMetadata annotationMetadata) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!isEnabled(annotationMetadata)) &#123;</span><br><span class="line">         <span class="keyword">return</span> NO_IMPORTS;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// è·å–è‡ªåŠ¨é…ç½®èŠ‚ç‚¹</span></span><br><span class="line">      <span class="type">AutoConfigurationEntry</span> <span class="variable">autoConfigurationEntry</span> <span class="operator">=</span> getAutoConfigurationEntry(annotationMetadata);</span><br><span class="line">      <span class="keyword">return</span> StringUtils.toStringArray(autoConfigurationEntry.getConfigurations());</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * è·å–è‡ªåŠ¨é…ç½®èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">protected</span> AutoConfigurationEntry <span class="title function_">getAutoConfigurationEntry</span><span class="params">(AnnotationMetadata annotationMetadata)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!isEnabled(annotationMetadata)) &#123;</span><br><span class="line">         <span class="keyword">return</span> EMPTY_ENTRY;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// è¿”å›æ³¨è§£å±æ€§, ç±»å‹:LinkedHashMap, å€¼(exclude-&gt;[],excludeName-&gt;[])</span></span><br><span class="line">      <span class="type">AnnotationAttributes</span> <span class="variable">attributes</span> <span class="operator">=</span> getAttributes(annotationMetadata);</span><br><span class="line">      <span class="comment">// è·å–å€™é€‰é…ç½®ç±» å€¼(146ä¸ªè‡ªåŠ¨é…ç½®ç±»çš„å…¨ç±»å)</span></span><br><span class="line">      List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata, attributes);</span><br><span class="line">      <span class="comment">// å»é‡, ç§»é™¤é‡å¤é¡¹</span></span><br><span class="line">      configurations = removeDuplicates(configurations);</span><br><span class="line">      <span class="comment">// è·å–æ’é™¤é¡¹</span></span><br><span class="line">      Set&lt;String&gt; exclusions = getExclusions(annotationMetadata, attributes);</span><br><span class="line">      checkExcludedClasses(configurations, exclusions);</span><br><span class="line">      <span class="comment">// ç§»é™¤è¦æ’é™¤çš„é…ç½®é¡¹</span></span><br><span class="line">      configurations.removeAll(exclusions);</span><br><span class="line">      configurations = getConfigurationClassFilter().filter(configurations);</span><br><span class="line">      fireAutoConfigurationImportEvents(configurations, exclusions);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AutoConfigurationEntry</span>(configurations, exclusions);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å€™é€‰é…ç½®ç±»</span></span><br><span class="line"><span class="comment">     * ä½ç½®:META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> List&lt;String&gt; <span class="title function_">getCandidateConfigurations</span><span class="params">(AnnotationMetadata metadata, AnnotationAttributes attributes)</span> &#123;</span><br><span class="line">        List&lt;String&gt; configurations = ImportCandidates.load(AutoConfiguration.class, getBeanClassLoader())</span><br><span class="line">                .getCandidates();</span><br><span class="line">        Assert.notEmpty(configurations,</span><br><span class="line">                <span class="string">&quot;No auto configuration classes found in &quot;</span></span><br><span class="line">                        + <span class="string">&quot;META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports. If you &quot;</span></span><br><span class="line">                        + <span class="string">&quot;are using a custom packaging, make sure that file is correct.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> configurations;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>æŒ‰éœ€ç”Ÿæ•ˆ</strong><ul><li>è™½ç„¶å¯¼å…¥äº†146ä¸ª<strong>è‡ªåŠ¨é…ç½®ç±»</strong>, å¹¶ä¸æ˜¯éƒ½èƒ½ç”Ÿæ•ˆ</li><li>æ¯ä¸€ä¸ª<strong>è‡ªåŠ¨é…ç½®ç±»</strong>, éƒ½æœ‰æ¡ä»¶æ³¨è§£<code>@ConditionalOnxxx</code>, åªæœ‰æ¡ä»¶æˆç«‹, æ‰èƒ½ç”Ÿæ•ˆ </li><li>å¯¼å…¥å¯¹åº”çš„ä¾èµ–åŒ…, å³æ»¡è¶³æ¡ä»¶, è¯¥è‡ªåŠ¨é…ç½®ç±»å°±ä¼šç”Ÿæ•ˆ</li></ul></li></ul><h3 id="3-xxxAutoConfigurationè‡ªåŠ¨é…ç½®ç±»"><a href="#3-xxxAutoConfigurationè‡ªåŠ¨é…ç½®ç±»" class="headerlink" title="3.xxxAutoConfigurationè‡ªåŠ¨é…ç½®ç±»"></a>3.<code>xxxAutoConfiguration</code>è‡ªåŠ¨é…ç½®ç±»</h3><ol><li>æ¯ä¸ª<code>xxxAutoConfiguration</code>è‡ªåŠ¨é…ç½®ç±»,éƒ½éœ€è¦æ»¡è¶³æŸä¸ªæ¡ä»¶</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ConditionalOnClass(Xxx.class)</span> <span class="comment">// æ¡ä»¶å°±æ˜¯éœ€è¦å¼•å…¥ä¾èµ–åŒ…å« Xxx.class</span></span><br><span class="line"><span class="meta">@Conditional(XxxCondition.class)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(XxxProperties.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XxxAutoConfiguration</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><p>æ¡ä»¶æ»¡è¶³, <strong>è‡ªåŠ¨é…ç½®ç±»</strong>å°±ä¼šç»™å®¹å™¨ä¸­ä½¿ç”¨<code>@Bean</code>æ”¾ä¸€å †ç»„ä»¶</p></li><li><p>æ¯ä¸ª<strong>è‡ªåŠ¨é…ç½®ç±»</strong>éƒ½å¯èƒ½æœ‰è¿™ä¸ªæ³¨è§£<code>@EnableConfigurationProperties(XxxProperties.class)</code></p><ul><li>ç”¨æ¥æŠŠé…ç½®æ–‡ä»¶ä¸­é…çš„<strong>æŒ‡å®šå‰ç¼€</strong>çš„å±æ€§å€¼å°è£…åˆ°<code>XxxProperties</code><strong>å±æ€§ç±»</strong>ä¸­</li></ul></li><li><p>ä»¥<strong>Tomcat</strong>ä¸ºä¾‹ï¼šæŠŠæœåŠ¡å™¨çš„æ‰€æœ‰é…ç½®éƒ½æ˜¯ä»¥<code>server</code>å¼€å¤´çš„ã€‚é…ç½®éƒ½å°è£…åˆ°äº†å±æ€§ç±»ä¸­</p></li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;server&quot;, ignoreUnknownFields = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerProperties</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="SpringBootæ ¸å¿ƒé…ç½®æµç¨‹"><a href="#SpringBootæ ¸å¿ƒé…ç½®æµç¨‹" class="headerlink" title="SpringBootæ ¸å¿ƒé…ç½®æµç¨‹"></a>SpringBootæ ¸å¿ƒé…ç½®æµç¨‹</h2><ol><li>å¯¼å…¥<code>starter</code>, å°±ä¼šå¯¼å…¥<code>autoconfigure</code>åŒ…</li><li><code>autoconfigure</code>åŒ…é‡Œæœ‰æ–‡ä»¶:<strong>META-INF&#x2F;spring&#x2F;org.springframework.boot.autoconfigure.AutoConfiguration.imports</strong>,é‡Œé¢æŒ‡å®šçš„æ‰€æœ‰å¯åŠ¨è¦åŠ è½½çš„<strong>è‡ªåŠ¨é…ç½®ç±»</strong></li><li><code>@EnableAutoConfiguration</code>ä¼šè‡ªåŠ¨çš„æŠŠä¸Šé¢æ–‡ä»¶é‡Œæ‰€æœ‰<strong>è‡ªåŠ¨é…ç½®ç±»</strong>éƒ½å¯¼å…¥è¿›æ¥. <code>XxxAutoConfiguration</code>æ˜¯æœ‰<strong>æ¡ä»¶æ³¨è§£è¿›è¡ŒæŒ‰éœ€åŠ è½½</strong></li><li><code>XxxAutoConfiguration</code>ç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€å †ç»„ä»¶, ç»„ä»¶éƒ½æ˜¯ä»<code>xxxProperties</code>ä¸­æå–å±æ€§å€¼</li><li><code>XxxProperties</code>åˆå’Œ<strong>é…ç½®æ–‡ä»¶</strong>è¿›è¡Œç»‘å®š</li></ol><p>è¾¾åˆ°çš„æ•ˆæœ:å¯¼å…¥<code>starter</code> â€“&gt; ä¿®æ”¹é…ç½®æ–‡ä»¶, å°±èƒ½ä¿®æ”¹åº•å±‚è¡Œä¸º</p><!-- ![SpringBootè‡ªåŠ¨è£…é…](https://s2.loli.net/2023/06/11/ZGxL4F7YPrOqQcy.webp) --><img src="https://image.fu-jw.com/img/2023/07/01/649f785fe3f3d.webp"/><h2 id="å°è¯•ç‰›åˆ€"><a href="#å°è¯•ç‰›åˆ€" class="headerlink" title="å°è¯•ç‰›åˆ€"></a>å°è¯•ç‰›åˆ€</h2><p>æ¥ä¸‹æ¥æ£€éªŒä¸‹SpringBootè‡ªåŠ¨é…ç½®åŸç†çš„ç†è§£, å°è¯•å›ç­”å¦‚ä¸‹é—®é¢˜:</p><details> <summary><strong><span style="color: red; ">ä¸ºä»€ä¹ˆé¡¹ç›®å¯åŠ¨åé»˜è®¤ç«¯å£å·æ˜¯8080, ä»¥åŠå¦‚ä½•ä¿®æ”¹???</span></strong></summary><ol><li>å¼•å…¥<code>webåœºæ™¯</code></li></ol><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è‡ªåŠ¨å¼•å…¥äº†<code>spring-boot-starter</code>å’Œ<code>spring-boot-starter-tomcat</code></p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>spring-boot-starter</code>è‡ªåŠ¨å¼•å…¥ä¾èµ–<code>spring-boot-autoconfigure</code>åŒ…</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-autoconfigure<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>spring-boot-autoconfigure</code>åŒ…é‡Œæœ‰æ–‡ä»¶:</p><ul><li><strong>additional-spring-configuration-metadata.json</strong>, é‡Œé¢åŒ…å«äº†æ‰€æœ‰çš„é»˜è®¤å€¼</li></ul><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;server.port&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;defaultValue&quot;</span><span class="punctuation">:</span> <span class="number">8080</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li><strong>META-INF&#x2F;spring&#x2F;org.springframework.boot.autoconfigure.AutoConfiguration.imports</strong>,é‡Œé¢æŒ‡å®šçš„æ‰€æœ‰å¯åŠ¨è¦åŠ è½½çš„<strong>è‡ªåŠ¨é…ç½®ç±»</strong></li></ul><!-- ![spring-boot-autoconfigureåŒ…](https://s2.loli.net/2023/06/11/ArMcsINnLb5pZ7t.webp) --><img src="https://image.fu-jw.com/img/2023/07/01/649f78f673876.webp"/><ol start="2"><li>åˆæˆæ³¨è§£<code>@SpringBootApplication</code>ä¸­çš„<code>@EnableAutoConfiguration</code><br>è‡ªåŠ¨çš„æŠŠä¸Šé¢æ–‡ä»¶é‡Œæ‰€æœ‰<strong>è‡ªåŠ¨é…ç½®ç±»</strong>éƒ½å¯¼å…¥è¿›æ¥. <code>XxxAutoConfiguration</code>æ˜¯æœ‰<strong>æ¡ä»¶æ³¨è§£è¿›è¡ŒæŒ‰éœ€åŠ è½½</strong></li></ol><p>å…¶ä¸­å°±åŒ…æ‹¬<code>ServletWebServerFactoryAutoConfiguration.java</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@AutoConfiguration(after = SslAutoConfiguration.class)</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(ServletRequest.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(ServerProperties.class)</span></span><br><span class="line"><span class="meta">@Import(&#123; ServletWebServerFactoryAutoConfiguration.BeanPostProcessorsRegistrar.class,</span></span><br><span class="line"><span class="meta">ServletWebServerFactoryConfiguration.EmbeddedTomcat.class,</span></span><br><span class="line"><span class="meta">ServletWebServerFactoryConfiguration.EmbeddedJetty.class,</span></span><br><span class="line"><span class="meta">ServletWebServerFactoryConfiguration.EmbeddedUndertow.class &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletWebServerFactoryAutoConfiguration</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»‘å®šäº†å±æ€§æ–‡ä»¶<code>ServerProperties</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;server&quot;, ignoreUnknownFields = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerProperties</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer port;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªéœ€è¦åœ¨è‡ªå·±çš„é…ç½®æ–‡ä»¶ä¸­è‡ªå®šä¹‰<code>server.port</code>çš„å€¼</p><p>SpringBootå¯åŠ¨æ—¶å°±ä¼šå»resourcesè·¯å¾„ä¸‹åŠ è½½ç¬¦åˆè¦æ±‚çš„æ–‡ä»¶, ä»è¯¥æ–‡ä»¶ä¸­æŸ¥æ‰¾é…ç½®æ¥è¦†ç›–é»˜è®¤é…ç½®,<br>å³å®Œæˆäº†é…ç½®è‡ªå®šä¹‰</p><p><code>spring-boot-starter-parent-3.1.0.pom</code>æ–‡ä»¶:</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>$&#123;basedir&#125;/src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/application*.yml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/application*.yaml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/application*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>$&#123;basedir&#125;/src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/application*.yml<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/application*.yaml<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/application*.properties<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></details><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ğŸ¤–ğŸ¤–-æ‘˜è¦:&lt;br&gt;æœ¬æ–‡ä»‹ç»äº†SpringBootè‡ªåŠ¨é…ç½®çš„åŸç†, åŒ…æ‹¬è‡ªåŠ¨é…ç½®æµç¨‹ï¼Œæ ¸å¿ƒé…ç½®æµç¨‹ä»¥åŠå¦‚ä½•å®æ–½è‡ªåŠ¨é…ç½®ã€‚é¦–å…ˆå¯¼å…¥â€™starterâ€™ä»¥è·å¾—æ¥è‡ªâ€™autoconfigureâ€™åŒ…çš„é…ç½®, ç„¶åä½¿ç”¨â€˜@EnableAutoConfigu</summary>
      
    
    
    
    <category term="å­¦ä¹ " scheme="http://fu-jw.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="SpringBoot" scheme="http://fu-jw.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootä¸­å¸¸è§æ³¨è§£</title>
    <link href="http://fu-jw.com/posts/f026602.html"/>
    <id>http://fu-jw.com/posts/f026602.html</id>
    <published>2023-06-02T00:00:00.000Z</published>
    <updated>2023-07-09T11:25:56.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ¤–ğŸ¤–-æ‘˜è¦:<br>æœ¬æ–‡ä»‹ç»äº†SpringBootä¸­çš„å¸¸è§æ³¨è§£ï¼ŒåŒ…æ‹¬åŸºäºXMLçš„é…ç½®æ–¹å¼å’Œæ³¨è§£æ–¹å¼. è¯¦è§£äº†å¸¸è§æ³¨è§£ï¼Œå¦‚ï¼š@ComponentåŠå…¶è¡ç”Ÿç»„ä»¶ã€@Configurationå’Œ@Beanã€@ComponentScanå’Œ@ComponentScan.Filterã€@Scopeå’Œ@Lazyç­‰ï¼Œè¿˜å•ç‹¬é˜è¿°äº†æ¡ä»¶æ³¨è§£å’Œå±æ€§ç»‘å®šçš„ä½¿ç”¨ã€‚</p></blockquote><h1 id="SpringBootä¸­å¸¸è§æ³¨è§£"><a href="#SpringBootä¸­å¸¸è§æ³¨è§£" class="headerlink" title="SpringBootä¸­å¸¸è§æ³¨è§£"></a>SpringBootä¸­å¸¸è§æ³¨è§£</h1><p>Spring å¼€å§‹æ˜¯ä½¿ç”¨çš„XMLçš„é…ç½®æ–¹å¼, ä½†éšç€é…ç½®å†…å®¹çš„å¢åŠ , ç¼–å†™XMLé…ç½®æ–‡ä»¶çš„æ–¹å¼ä¸ä»…ç¹ç, è€Œä¸”è¿˜å¾ˆå®¹æ˜“å‡ºé”™.<br>å¦å¤–ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½ç¼–å†™å¤§é‡çš„XMLæ–‡ä»¶æ¥é…ç½®Spring, ä¹Ÿå¤§å¤§å¢åŠ äº†é¡¹ç›®ç»´æŠ¤çš„å¤æ‚åº¦.<br>å¾€å¾€å¾ˆå¤šä¸ªé¡¹ç›®çš„Spring XMLæ–‡ä»¶çš„é…ç½®å¤§éƒ¨åˆ†æ˜¯ç›¸åŒçš„, åªæœ‰å¾ˆå°‘é‡çš„é…ç½®ä¸åŒ, è¿™ä¹Ÿé€ æˆäº†é…ç½®æ–‡ä»¶ä¸Šçš„å†—ä½™<br>Springæ³¨è§£é©±åŠ¨æ¥å¼€å‘, ä½ ä¼šå‘ç°ä»¥ä¸Šè¿™äº›é—®é¢˜éƒ½å°†ä¸å­˜åœ¨.<br>SpringBoot åˆ™ä»ä¸€å¼€å§‹å°±æ”¹ä¸ºå…¨æ³¨è§£é©±åŠ¨.</p><h2 id="åŸºäºXMLé…ç½®æ–¹å¼"><a href="#åŸºäºXMLé…ç½®æ–¹å¼" class="headerlink" title="åŸºäºXMLé…ç½®æ–¹å¼"></a>åŸºäºXMLé…ç½®æ–¹å¼</h2><ol><li>resources&#x2F;ioc.xml</li></ol><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;person&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.fredo.bean.Person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;fredo&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.fredo.bean.Cat&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;tom&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>Main.java</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// XML çš„æ–¹å¼</span></span><br><span class="line"><span class="type">var</span> <span class="variable">ioc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;ioc.xml&quot;</span>);</span><br><span class="line">String[] names = ioc.getBeanDefinitionNames();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;å®¹å™¨ä¸­çš„Bean:&quot;</span> + name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.output</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">å®¹å™¨ä¸­çš„Bean:person</span><br><span class="line">å®¹å™¨ä¸­çš„Bean:cat</span><br></pre></td></tr></table></figure><h2 id="æ³¨è§£çš„æ–¹å¼"><a href="#æ³¨è§£çš„æ–¹å¼" class="headerlink" title="æ³¨è§£çš„æ–¹å¼"></a>æ³¨è§£çš„æ–¹å¼</h2><p>åœ¨ä»£ç ä¸­ä½¿ç”¨<code>@Configuration</code>å’Œ<code>@Bean</code>ä¸¤ä¸ªæ³¨è§£, å³å¯æ›¿ä»£ä»¥å‰å¤æ‚çš„xmlé…ç½®</p><p>config&#x2F;AppConfig.java</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">// è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±», æ›¿ä»£ä»¥å‰çš„xmlé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">// æ›¿ä»£ä»¥å‰xmlä¸­çš„beanæ ‡ç­¾</span></span><br><span class="line">    <span class="keyword">public</span> Person <span class="title function_">person</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">var</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        person.setId(<span class="number">1</span>);</span><br><span class="line">        person.setName(<span class="string">&quot;fred0&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> person;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Cat <span class="title function_">cat</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">var</span> <span class="variable">cat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">        cat.setId(<span class="number">1</span>);</span><br><span class="line">        cat.setName(<span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> cat;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¸¸è§æ³¨è§£"><a href="#å¸¸è§æ³¨è§£" class="headerlink" title="å¸¸è§æ³¨è§£"></a>å¸¸è§æ³¨è§£</h2><h3 id="ComponentåŠå…¶è¡ç”Ÿç»„ä»¶-Repository-Controller-Service-Configuration"><a href="#ComponentåŠå…¶è¡ç”Ÿç»„ä»¶-Repository-Controller-Service-Configuration" class="headerlink" title="@ComponentåŠå…¶è¡ç”Ÿç»„ä»¶(@Repository, @Controller, @Service, @Configuration)"></a>@ComponentåŠå…¶è¡ç”Ÿç»„ä»¶(@Repository, @Controller, @Service, @Configuration)</h3><ul><li>@Component æ˜¯é€šç”¨ç»„ä»¶</li><li>@Repository ç”¨äºæŒä¹…å±‚</li><li>@Controller ç”¨äºè¡¨ç°å±‚</li><li>@Service ç”¨äºä¸šåŠ¡é€»è¾‘å±‚</li><li>@Configuration ç”¨äºé…ç½®æ–‡ä»¶</li></ul><h3 id="Configurationå’Œ-Bean"><a href="#Configurationå’Œ-Bean" class="headerlink" title="@Configurationå’Œ@Bean"></a>@Configurationå’Œ@Bean</h3><ul><li><code>@Configuration</code> æ ‡æ³¨åœ¨<strong>ç±»</strong>ä¸Š, å£°æ˜è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªé…ç½®ç±», åŠ å…¥iocå®¹å™¨ä¸­, ç›¸å½“äºä»¥å‰çš„xmlé…ç½®æ–‡ä»¶</li><li><code>@Bean</code> æ ‡æ³¨åœ¨<strong>æ–¹æ³•</strong>ä¸Š, è¯¥æ–¹æ³•çš„è¾“å‡ºç»“æœå°±æ˜¯ä¸€ä¸ª JavaBean</li></ul><p><code>@Configuration</code>å’Œ<code>@Bean</code>é…åˆä½¿ç”¨å°±å¯å®Œå…¨æ›¿ä»£XMLçš„é…ç½®æ–‡ä»¶</p><p><code>@SpringBootConfiguration</code>æ˜¯ SpringBoot ä¸­çš„ç‰¹æœ‰æ³¨è§£, <code>@Configuration</code>æ˜¯é€šç”¨ç‰ˆæ³¨è§£, åŠŸèƒ½ä¸€æ ·</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Indexed</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootConfiguration &#123;</span><br><span class="line"><span class="meta">@AliasFor(annotation = Configuration.class)</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">proxyBeanMethods</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„:</p><ul><li>beançš„åç§°, é»˜è®¤æ˜¯æ–¹æ³•å</li><li>å¯ä»¥ä¿®æ”¹, <code>@Bean(&quot;newName&quot;)</code></li></ul><details> <summary>å·²ç»æœ‰`@Component`åŠå…¶è¡ç”Ÿç»„ä»¶,ä¸ºä»€ä¹ˆè¿˜è¦`@Bean`æ³¨è§£?</summary><ul><li>ç±»ä¼¼<code>@Component</code>,<code>@Repository</code>,<code>@Controller</code>,<code>@Service</code>è¿™äº›æ³¨å†ŒBeançš„æ³¨è§£å­˜åœ¨å±€é™æ€§:åªèƒ½ä½œç”¨äºè‡ªå·±ç¼–å†™çš„ç±», ä¸èƒ½å¯¼å…¥ç¬¬ä¸‰æ–¹jaråŒ…, ä½†æ˜¯<code>@Bean</code>å°±å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼</li><li>èƒ½å¤ŸåŠ¨æ€è·å–ä¸€ä¸ªBeanå¯¹è±¡ï¼Œèƒ½å¤Ÿæ ¹æ®ç¯å¢ƒä¸åŒå¾—åˆ°ä¸åŒçš„Beanå¯¹è±¡</details></li></ul><h3 id="Componentå’Œ-ComponentScan"><a href="#Componentå’Œ-ComponentScan" class="headerlink" title="@Componentå’Œ@ComponentScan"></a>@Componentå’Œ@ComponentScan</h3><p>åœ¨å®é™…é¡¹ç›®ä¸­, æˆ‘ä»¬æ›´å¤šçš„æ˜¯ä½¿ç”¨ Spring çš„åŒ…æ‰«æåŠŸèƒ½å¯¹é¡¹ç›®ä¸­çš„åŒ…è¿›è¡Œæ‰«æ,<br>å‡¡æ˜¯åœ¨æŒ‡å®šçš„åŒ…æˆ–å…¶å­åŒ…ä¸­çš„ç±»ä¸Šæ ‡æ³¨äº†<code>@Repository</code>, <code>@Service</code>, <code>@Controller</code>, <code>@Component</code>æ³¨è§£çš„ç±»éƒ½ä¼šè¢«æ‰«æåˆ°, å¹¶å°†è¿™ä¸ªç±»æ³¨å…¥åˆ° Spring å®¹å™¨ä¸­</p><p>Spring åŒ…æ‰«æåŠŸèƒ½å¯ä»¥ä½¿ç”¨XMLé…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®, ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨<code>@ComponentScan</code>æ³¨è§£è¿›è¡Œè®¾ç½®, ä½¿ç”¨<code>@ComponentScan</code>æ³¨è§£è¿›è¡Œè®¾ç½®æ¯”ä½¿ç”¨XMLé…ç½®æ–‡ä»¶æ¥é…ç½®è¦ç®€å•çš„å¤š</p><p>XMLæ–¹å¼</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åŒ…æ‰«æï¼šåªè¦æ˜¯æ ‡æ³¨äº†æˆ‘ä»¬ç†Ÿæ‚‰çš„@Controllerã€@Serviceã€@Repositoryã€@Componentè¿™å››ä¸ªæ³¨è§£ä¸­çš„ä»»ä½•ä¸€ä¸ªçš„ç»„ä»¶ï¼Œå®ƒå°±ä¼šè¢«è‡ªåŠ¨æ‰«æï¼Œå¹¶åŠ è¿›å®¹å™¨ä¸­ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.fredo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>@ComponentScan</code>æ–¹å¼</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ComponentScan(value=&quot;com.fredo&quot;)</span> <span class="comment">// valueæŒ‡å®šè¦æ‰«æçš„åŒ…</span></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">// è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±», æ›¿ä»£ä»¥å‰çš„xmlé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„:</p><ol start="0"><li>ä¸»ç¨‹åºæ ‡æ³¨äº†<code>@SpringBootApplication</code>, å°±ä¼šé»˜è®¤æ‰«æä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…åŠå…¶å­åŒ…; </li><li>å¦‚æœè®¾ç½®äº†<code>@ComponentScan(&quot;...&quot;)</code>, åˆ™ä»¥è®¾ç½®çš„æ‰«æè·¯å¾„ä¸ºä¸», é»˜è®¤å€¼ä¸å†ç”Ÿæ•ˆ</li><li><code>@ComponentScan</code>è¿˜å¯ä»¥è®¾ç½®åŒ…å«æŸäº›ç»„ä»¶(<code>includeFilters()</code>)æˆ–è€…æ’é™¤æŸäº›ç»„ä»¶(<code>excludeFilters()</code>)</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ComponentScan(value=&quot;com.fredo&quot;, excludeFilters=&#123;</span></span><br><span class="line"><span class="meta">    /*</span></span><br><span class="line"><span class="meta">     * typeï¼šæŒ‡å®šä½ è¦æ’é™¤çš„è§„åˆ™ï¼Œæ˜¯æŒ‰ç…§æ³¨è§£è¿›è¡Œæ’é™¤ï¼Œè¿˜æ˜¯æŒ‰ç…§ç»™å®šçš„ç±»å‹è¿›è¡Œæ’é™¤ï¼Œè¿˜æ˜¯æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ’é™¤ï¼Œç­‰ç­‰</span></span><br><span class="line"><span class="meta">     * classesï¼šé™¤äº†@Controllerå’Œ@Serviceæ ‡æ³¨çš„ç»„ä»¶ä¹‹å¤–ï¼ŒIOCå®¹å™¨ä¸­å‰©ä¸‹çš„ç»„ä»¶æˆ‘éƒ½è¦ï¼Œå³ç›¸å½“äºæ˜¯æˆ‘è¦æ’é™¤@Controllerå’Œ@Serviceè¿™ä¿©æ³¨è§£æ ‡æ³¨çš„ç»„ä»¶ã€‚</span></span><br><span class="line"><span class="meta">     */</span></span><br><span class="line"><span class="meta">    @Filter(type=FilterType.ANNOTATION, classes=&#123;Controller.class, Service.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;)</span> <span class="comment">// valueæŒ‡å®šè¦æ‰«æçš„åŒ…</span></span><br></pre></td></tr></table></figure><ol start="3"><li><code>@ComponentScan</code>æ˜¯å¯é‡å¤æ³¨è§£</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ComponentScan(value=&quot;com.fredo&quot;, includeFilters=&#123;</span></span><br><span class="line"><span class="meta">    /*</span></span><br><span class="line"><span class="meta">     * typeï¼šæŒ‡å®šä½ è¦æ’é™¤çš„è§„åˆ™ï¼Œæ˜¯æŒ‰ç…§æ³¨è§£è¿›è¡Œæ’é™¤ï¼Œè¿˜æ˜¯æŒ‰ç…§ç»™å®šçš„ç±»å‹è¿›è¡Œæ’é™¤ï¼Œè¿˜æ˜¯æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ’é™¤ï¼Œç­‰ç­‰</span></span><br><span class="line"><span class="meta">     * classesï¼šæˆ‘ä»¬éœ€è¦Springåœ¨æ‰«ææ—¶ï¼ŒåªåŒ…å«@Controlleræ³¨è§£æ ‡æ³¨çš„ç±»</span></span><br><span class="line"><span class="meta">     */</span></span><br><span class="line"><span class="meta">    @Filter(type=FilterType.ANNOTATION, classes=&#123;Controller.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;, useDefaultFilters=false)</span> <span class="comment">// valueæŒ‡å®šè¦æ‰«æçš„åŒ…</span></span><br><span class="line"><span class="meta">@ComponentScan(value=&quot;com.fredo&quot;, includeFilters=&#123;</span></span><br><span class="line"><span class="meta">    /*</span></span><br><span class="line"><span class="meta">     * typeï¼šæŒ‡å®šä½ è¦æ’é™¤çš„è§„åˆ™ï¼Œæ˜¯æŒ‰ç…§æ³¨è§£è¿›è¡Œæ’é™¤ï¼Œè¿˜æ˜¯æŒ‰ç…§ç»™å®šçš„ç±»å‹è¿›è¡Œæ’é™¤ï¼Œè¿˜æ˜¯æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ’é™¤ï¼Œç­‰ç­‰</span></span><br><span class="line"><span class="meta">     * classesï¼šæˆ‘ä»¬éœ€è¦Springåœ¨æ‰«ææ—¶ï¼ŒåªåŒ…å«@Serviceæ³¨è§£æ ‡æ³¨çš„ç±»</span></span><br><span class="line"><span class="meta">     */</span></span><br><span class="line"><span class="meta">    @Filter(type=FilterType.ANNOTATION, classes=&#123;Service.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;, useDefaultFilters=false)</span> <span class="comment">// valueæŒ‡å®šè¦æ‰«æçš„åŒ…</span></span><br></pre></td></tr></table></figure><p>å°ç»“ä¸€ä¸‹:</p><ul><li><code>@Component</code> å£°æ˜ Bean, å‘Šè¯‰ Spring è¿™æ˜¯ä¸€ä¸ª Bean</li><li><code>@ComponentScan</code> è®¾ç½®æ‰«æè·¯å¾„, å‘Šè¯‰ Spring åˆ°å“ªé‡Œæ‰¾åˆ°è¿™äº› Bean</li></ul><h3 id="ComponentScan-Filter"><a href="#ComponentScan-Filter" class="headerlink" title="@ComponentScan.Filter"></a>@ComponentScan.Filter</h3><p>Spring çš„å¼ºå¤§ä¹‹å¤„ä¸ä»…ä»…æ˜¯æä¾›äº† IOC å®¹å™¨,<br>å¯ä»¥è®¾ç½®åŒ…å«æŸäº›ç»„ä»¶(<code>includeFilters()</code>)æˆ–è€…æ’é™¤æŸäº›ç»„ä»¶(<code>excludeFilters()</code>), å®ƒè¿˜èƒ½å¤Ÿé€šè¿‡è‡ªå®šä¹‰<code>TypeFilter</code>æ¥æŒ‡å®šè¿‡æ»¤è§„åˆ™. </p><p><code>FilterType</code>ä¸­å¸¸ç”¨çš„è§„åˆ™å¦‚ä¸‹: </p><ol><li>ANNOTATIONï¼šæŒ‰ç…§æ³¨è§£è¿›è¡ŒåŒ…å«æˆ–è€…æ’é™¤</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ComponentScan(value=&quot;com.fredo&quot;, includeFilters=&#123;</span></span><br><span class="line"><span class="meta">    /*</span></span><br><span class="line"><span class="meta">     * typeï¼šæŒ‡å®šä½ è¦æ’é™¤çš„è§„åˆ™ï¼Œæ˜¯æŒ‰ç…§æ³¨è§£è¿›è¡Œæ’é™¤ï¼Œè¿˜æ˜¯æŒ‰ç…§ç»™å®šçš„ç±»å‹è¿›è¡Œæ’é™¤ï¼Œè¿˜æ˜¯æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ’é™¤ï¼Œç­‰ç­‰</span></span><br><span class="line"><span class="meta">     * classesï¼šæˆ‘ä»¬éœ€è¦Springåœ¨æ‰«ææ—¶ï¼ŒåªåŒ…å«@Controlleræ³¨è§£æ ‡æ³¨çš„ç±»</span></span><br><span class="line"><span class="meta">     */</span></span><br><span class="line"><span class="meta">    @Filter(type=FilterType.ANNOTATION, classes=&#123;Controller.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;, useDefaultFilters=false)</span> <span class="comment">// valueæŒ‡å®šè¦æ‰«æçš„åŒ…</span></span><br></pre></td></tr></table></figure><ol start="2"><li>ASSIGNABLE_TYPEï¼šæŒ‰ç…§ç»™å®šçš„ç±»å‹è¿›è¡ŒåŒ…å«æˆ–è€…æ’é™¤</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ComponentScan(value=&quot;com.fredo&quot;, includeFilters=&#123;</span></span><br><span class="line"><span class="meta">    /*</span></span><br><span class="line"><span class="meta">     * typeï¼šæŒ‡å®šä½ è¦æ’é™¤çš„è§„åˆ™ï¼Œæ˜¯æŒ‰ç…§æ³¨è§£è¿›è¡Œæ’é™¤ï¼Œè¿˜æ˜¯æŒ‰ç…§ç»™å®šçš„ç±»å‹è¿›è¡Œæ’é™¤ï¼Œè¿˜æ˜¯æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ’é™¤ï¼Œç­‰ç­‰</span></span><br><span class="line"><span class="meta">     */</span></span><br><span class="line"><span class="meta">    // åªè¦æ˜¯BookServiceè¿™ç§ç±»å‹çš„ç»„ä»¶éƒ½ä¼šè¢«åŠ è½½åˆ°å®¹å™¨ä¸­ï¼Œä¸ç®¡æ˜¯å®ƒçš„å­ç±»è¿˜æ˜¯ä»€ä¹ˆå®ƒçš„å®ç°ç±»ã€‚è®°ä½ï¼Œåªè¦æ˜¯BookServiceè¿™ç§ç±»å‹çš„</span></span><br><span class="line"><span class="meta">    @Filter(type=FilterType.ASSIGNABLE_TYPE, classes=&#123;BookService.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;, useDefaultFilters=false)</span> <span class="comment">// valueæŒ‡å®šè¦æ‰«æçš„åŒ…</span></span><br></pre></td></tr></table></figure><ol start="3"><li>ASPECTJï¼šä½¿ç”¨è¡¨è¾¾å¼æ¥æŒ‘é€‰å¤æ‚çš„ç±»å­é›†</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ComponentScan(value=&quot;com.fredo&quot;, includeFilters=&#123;</span></span><br><span class="line"><span class="meta">    /*</span></span><br><span class="line"><span class="meta">     * typeï¼šæŒ‡å®šä½ è¦æ’é™¤çš„è§„åˆ™ï¼Œæ˜¯æŒ‰ç…§æ³¨è§£è¿›è¡Œæ’é™¤ï¼Œè¿˜æ˜¯æŒ‰ç…§ç»™å®šçš„ç±»å‹è¿›è¡Œæ’é™¤ï¼Œè¿˜æ˜¯æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ’é™¤ï¼Œç­‰ç­‰</span></span><br><span class="line"><span class="meta">     */</span></span><br><span class="line"><span class="meta">    @Filter(type=FilterType.ASPECTJ, classes=&#123;AspectJTypeFilter.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;, useDefaultFilters=false)</span> <span class="comment">// valueæŒ‡å®šè¦æ‰«æçš„åŒ…</span></span><br></pre></td></tr></table></figure><ol start="4"><li>REGEXï¼šæŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ…å«æˆ–è€…æ’é™¤</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ComponentScan(value=&quot;com.fredo&quot;, includeFilters=&#123;</span></span><br><span class="line"><span class="meta">    /*</span></span><br><span class="line"><span class="meta">     * typeï¼šæŒ‡å®šä½ è¦æ’é™¤çš„è§„åˆ™ï¼Œæ˜¯æŒ‰ç…§æ³¨è§£è¿›è¡Œæ’é™¤ï¼Œè¿˜æ˜¯æŒ‰ç…§ç»™å®šçš„ç±»å‹è¿›è¡Œæ’é™¤ï¼Œè¿˜æ˜¯æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ’é™¤ï¼Œç­‰ç­‰</span></span><br><span class="line"><span class="meta">     */</span></span><br><span class="line"><span class="meta">    @Filter(type=FilterType.REGEX, classes=&#123;RegexPatternTypeFilter.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;, useDefaultFilters=false)</span> <span class="comment">// valueæŒ‡å®šè¦æ‰«æçš„åŒ…</span></span><br></pre></td></tr></table></figure><ol start="5"><li>CUSTOMï¼šæŒ‰ç…§è‡ªå®šä¹‰è§„åˆ™è¿›è¡ŒåŒ…å«æˆ–è€…æ’é™¤</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ComponentScan(value=&quot;com.fredo&quot;, includeFilters=&#123;</span></span><br><span class="line"><span class="meta">    /*</span></span><br><span class="line"><span class="meta">     * typeï¼šæŒ‡å®šä½ è¦æ’é™¤çš„è§„åˆ™ï¼Œæ˜¯æŒ‰ç…§æ³¨è§£è¿›è¡Œæ’é™¤ï¼Œè¿˜æ˜¯æŒ‰ç…§ç»™å®šçš„ç±»å‹è¿›è¡Œæ’é™¤ï¼Œè¿˜æ˜¯æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ’é™¤ï¼Œç­‰ç­‰</span></span><br><span class="line"><span class="meta">     */</span></span><br><span class="line"><span class="meta">    // æŒ‡å®šæ–°çš„è¿‡æ»¤è§„åˆ™ï¼Œè¿™ä¸ªè¿‡æ»¤è§„åˆ™æ˜¯æˆ‘ä»¬è‡ªä¸ªè‡ªå®šä¹‰çš„ï¼Œè¿‡æ»¤è§„åˆ™å°±æ˜¯ç”±æˆ‘ä»¬è¿™ä¸ªè‡ªå®šä¹‰çš„MyTypeFilterç±»è¿”å›trueæˆ–è€…falseæ¥ä»£è¡¨åŒ¹é…è¿˜æ˜¯æ²¡åŒ¹é…</span></span><br><span class="line"><span class="meta">    @Filter(type=FilterType.CUSTOM, classes=&#123;MyTypeFilter.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;, useDefaultFilters=false)</span> <span class="comment">// valueæŒ‡å®šè¦æ‰«æçš„åŒ…</span></span><br></pre></td></tr></table></figure><p>MyTypeFilter.java</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTypeFilter</span> <span class="keyword">implements</span> <span class="title class_">TypeFilter</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‚æ•°ï¼š</span></span><br><span class="line"><span class="comment">     * metadataReaderï¼šè¯»å–åˆ°çš„å½“å‰æ­£åœ¨æ‰«æçš„ç±»çš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * metadataReaderFactoryï¼šå¯ä»¥è·å–åˆ°å…¶ä»–ä»»ä½•ç±»çš„ä¿¡æ¯çš„ï¼ˆå·¥å‚ï¼‰</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * è¿”å›å€¼:</span></span><br><span class="line"><span class="comment">     * å½“è¿”å›trueæ—¶ï¼Œè¡¨ç¤ºç¬¦åˆè§„åˆ™ï¼Œä¼šåŒ…å«åœ¨Springå®¹å™¨ä¸­ï¼›</span></span><br><span class="line"><span class="comment">     * å½“è¿”å›falseæ—¶ï¼Œè¡¨ç¤ºä¸ç¬¦åˆè§„åˆ™ï¼Œå°±ä¸ä¼šè¢«åŒ…å«åœ¨Springå®¹å™¨ä¸­</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">match</span><span class="params">(MetadataReader metadataReader, MetadataReaderFactory metadataReaderFactory)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å±æ€§å€¼:</p><ul><li>type: è¦æ’é™¤çš„æ–¹å¼:<code>FilterType</code></li><li>value: è¦æ’é™¤çš„ç±»å‹, åŒ <code>classes</code></li><li>classes: åŒ <code>value</code></li><li>pattern: æ­£åˆ™è¡¨è¾¾å¼</li></ul><h3 id="Scope"><a href="#Scope" class="headerlink" title="@Scope"></a>@Scope</h3><p>ç”¨äºè®¾ç½®ç»„ä»¶çš„<strong>ä½œç”¨åŸŸ</strong>, é»˜è®¤å€¼æ˜¯<code>singleton</code>å•ä¾‹</p><p>ä½œç”¨åŸŸå–å€¼:</p><ul><li>singleton: å•ä¾‹, é»˜è®¤å€¼, å®¹å™¨å¯åŠ¨å°±ä¼šè°ƒç”¨æ–¹æ³•åˆ›å»ºå¯¹è±¡åˆ°iocå®¹å™¨ä¸­</li><li>prototype: å¤šä¾‹, å®¹å™¨å¯åŠ¨æ—¶å¹¶ä¸ä¼šè°ƒç”¨æ–¹æ³•åˆ›å»ºå¯¹è±¡, æ¯æ¬¡è·å–æ—¶æ‰ä¼šè°ƒç”¨æ–¹æ³•åˆ›å»ºå¯¹è±¡</li><li>request: web ç¯å¢ƒä¸­, åŒä¸€ä¸ªè¯·æ±‚åªåˆ›å»ºä¸€ä¸ªå¯¹è±¡</li><li>session: web ç¯å¢ƒä¸­, åŒä¸€ä¸ª session åªåˆ›å»ºä¸€ä¸ªå¯¹è±¡</li><li>application: web ç¯å¢ƒä¸­, ä¸€ä¸ªåº”ç”¨ç¨‹åºåªåˆ›å»ºä¸€ä¸ªå¯¹è±¡, å…¨å±€</li></ul><h3 id="Lazy"><a href="#Lazy" class="headerlink" title="@Lazy"></a>@Lazy</h3><p>æ‡’åŠ è½½å°±æ˜¯Springå®¹å™¨å¯åŠ¨çš„æ—¶å€™, å…ˆä¸åˆ›å»ºå¯¹è±¡, åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨(è·å–)beançš„æ—¶å€™å†æ¥åˆ›å»ºå¯¹è±¡, å¹¶è¿›è¡Œä¸€äº›åˆå§‹åŒ–</p><p>æ³¨æ„: æ‡’åŠ è½½, ä»…é’ˆå¯¹å•ä¾‹beanç”Ÿæ•ˆ</p><h3 id="æ¡ä»¶æ³¨è§£"><a href="#æ¡ä»¶æ³¨è§£" class="headerlink" title="æ¡ä»¶æ³¨è§£"></a>æ¡ä»¶æ³¨è§£</h3><p>@ConditionalOnXxx æ³¨è§£æŒ‡å®šçš„<strong>æ¡ä»¶æˆç«‹</strong>, åˆ™è§¦å‘æŒ‡å®šè¡Œä¸º</p><ul><li>@ConditionalOnClassï¼šå¦‚æœç±»è·¯å¾„ä¸­å­˜åœ¨è¿™ä¸ªç±»ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º</li><li>@ConditionalOnMissingClassï¼šå¦‚æœç±»è·¯å¾„ä¸­ä¸å­˜åœ¨è¿™ä¸ªç±»ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º</li><li>@ConditionalOnBeanï¼šå¦‚æœå®¹å™¨ä¸­å­˜åœ¨è¿™ä¸ªBeanï¼ˆç»„ä»¶ï¼‰ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º</li><li>@ConditionalOnMissingBeanï¼šå¦‚æœå®¹å™¨ä¸­ä¸å­˜åœ¨è¿™ä¸ªBeanï¼ˆç»„ä»¶ï¼‰ï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º</li><li>â€¦</li></ul><h3 id="å±æ€§ç»‘å®š"><a href="#å±æ€§ç»‘å®š" class="headerlink" title="å±æ€§ç»‘å®š"></a>å±æ€§ç»‘å®š</h3><p>å°†å®¹å™¨ä¸­ä»»æ„ç»„ä»¶(Bean)çš„<strong>å±æ€§å€¼å’Œé…ç½®æ–‡ä»¶</strong>çš„é…ç½®é¡¹çš„å€¼è¿›è¡Œç»‘å®š</p><ol><li>ç»™å®¹å™¨ä¸­æ³¨å†Œç»„ä»¶(<code>@Component</code>, <code>@Bean</code>)</li><li>ä½¿ç”¨<code>@ConfigurationProperties</code>å£°æ˜ç»„ä»¶å’Œé…ç½®æ–‡ä»¶çš„å“ªäº›é…ç½®é¡¹è¿›è¡Œç»‘å®š</li></ol><p><code>@EnableConfigurationProperties</code> å¿«é€Ÿæ³¨å†Œæ³¨è§£</p><ul><li>SpringBoot é»˜è®¤åªæ‰«æè‡ªå·±ä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…. å¦‚æœå¯¼å…¥ç¬¬ä¸‰æ–¹åŒ…, å³ä½¿ç»„ä»¶ä¸Šæ ‡æ³¨äº†<code>@Component</code>, <code>@ConfigurationProperties</code>æ³¨è§£, ä¹Ÿæ²¡ç”¨.</li><li>å› ä¸ºç»„ä»¶éƒ½æ‰«æä¸è¿›æ¥, æ­¤æ—¶ä½¿ç”¨è¿™ä¸ªæ³¨è§£å°±å¯ä»¥å¿«é€Ÿè¿›è¡Œå±æ€§ç»‘å®šå¹¶æŠŠç»„ä»¶æ³¨å†Œè¿›å®¹å™¨</li></ul><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ğŸ¤–ğŸ¤–-æ‘˜è¦:&lt;br&gt;æœ¬æ–‡ä»‹ç»äº†SpringBootä¸­çš„å¸¸è§æ³¨è§£ï¼ŒåŒ…æ‹¬åŸºäºXMLçš„é…ç½®æ–¹å¼å’Œæ³¨è§£æ–¹å¼. è¯¦è§£äº†å¸¸è§æ³¨è§£ï¼Œå¦‚ï¼š@ComponentåŠå…¶è¡ç”Ÿç»„ä»¶ã€@Configurationå’Œ@Beanã€@ComponentScanå’Œ@Compone</summary>
      
    
    
    
    <category term="å­¦ä¹ " scheme="http://fu-jw.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="SpringBoot" scheme="http://fu-jw.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootå¿«é€Ÿå…¥é—¨</title>
    <link href="http://fu-jw.com/posts/4ccc97e8.html"/>
    <id>http://fu-jw.com/posts/4ccc97e8.html</id>
    <published>2023-06-01T00:00:00.000Z</published>
    <updated>2023-07-09T11:25:56.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ¤–ğŸ¤–-æ‘˜è¦:<br>æœ¬æ–‡ä»‹ç»äº†SpringBootçš„å¿«é€Ÿå¼€å‘æµç¨‹ã€é‡åˆ°é—®é¢˜çš„è§£å†³åŠæ³•ã€ç‰¹ç‚¹å’Œåº”ç”¨åˆ†æï¼Œä¸»è¦åŒ…æ‹¬ä¾èµ–ç®¡ç†æœºåˆ¶ã€è‡ªåŠ¨è£…é…æœºåˆ¶ï¼Œä»¥åŠè‡ªåŠ¨é…ç½®æµç¨‹ç»†èŠ‚æ¢³ç†ã€‚åŒæ—¶ï¼Œè¯¦ç»†è§£æäº†SpringBootä¸­å„ç§é…ç½®å’Œæ³¨è§£çš„ä½¿ç”¨ã€‚</p></blockquote><h1 id="SpringBootå¿«é€Ÿå…¥é—¨"><a href="#SpringBootå¿«é€Ÿå…¥é—¨" class="headerlink" title="SpringBootå¿«é€Ÿå…¥é—¨"></a>SpringBootå¿«é€Ÿå…¥é—¨</h1><blockquote><p>æˆ‘çš„<a href="https://github.com/fu-jw/spring-tutorial">SpringBooté¡¹ç›®</a>ç¬¬ä¸€ä¸ªæ¨¡å—</p></blockquote><h2 id="å¿«é€Ÿå¼€å‘"><a href="#å¿«é€Ÿå¼€å‘" class="headerlink" title="å¿«é€Ÿå¼€å‘"></a>å¿«é€Ÿå¼€å‘</h2><p>æŒ‰ç…§å®˜ç½‘ä¸€æ­¥ä¸€æ­¥æ“ä½œå³å¯:<br><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started.html#getting-started.first-application">https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started.html#getting-started.first-application</a></p><h3 id="å¯èƒ½é‡åˆ°çš„é—®é¢˜"><a href="#å¯èƒ½é‡åˆ°çš„é—®é¢˜" class="headerlink" title="å¯èƒ½é‡åˆ°çš„é—®é¢˜"></a>å¯èƒ½é‡åˆ°çš„é—®é¢˜</h3><h4 id="pom-xmlä¸­å‡ºç°Provides-transitive-vulnerable-dependency-maven-org-yaml-snakeyaml-1-33è­¦å‘Š"><a href="#pom-xmlä¸­å‡ºç°Provides-transitive-vulnerable-dependency-maven-org-yaml-snakeyaml-1-33è­¦å‘Š" class="headerlink" title="pom.xmlä¸­å‡ºç°Provides transitive vulnerable dependency maven:org.yaml:snakeyaml:1.33è­¦å‘Š"></a>pom.xmlä¸­å‡ºç°Provides transitive vulnerable dependency maven:org.yaml:snakeyaml:1.33è­¦å‘Š</h4><ul><li>å‘Šè­¦åŸå› :Mavené¡¹ç›®ä¸­ä½¿ç”¨äº†ä¸€ä¸ªè¢«è®¤ä¸ºæ˜¯æœ‰æ¼æ´çš„ä¾èµ–é¡¹ï¼Œå¹¶ä¸”è¿™ä¸ªä¾èµ–é¡¹ä¹Ÿè¢«å…¶ä»–ä¾èµ–é¡¹æ‰€ä¼ é€’<ul><li>org.yaml:snakeyaml:1.33è¿™ä¸ªåº“æ˜¯å­˜åœ¨æ¼æ´</li></ul></li><li>è§£å†³è­¦å‘Š:å‡çº§ä¾èµ–é¡¹<ul><li>åœ¨ä¸­å¤®ä»“åº“æœç´¢æ— å‘Šè­¦ç‰ˆæœ¬: <a href="https://mvnrepository.com/">https://mvnrepository.com/</a></li><li>åœ¨Mavené¡¹ç›®ä¸­ï¼Œå¯ä»¥ä½¿ç”¨dependencyManagementæ ‡ç­¾æ¥ç®¡ç†ä¾èµ–é¡¹</li><li>è¿™ä¸ªæ ‡ç­¾ä¸­ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªç‰¹å®šç‰ˆæœ¬ï¼Œä»¥ä¾¿æ‰€æœ‰ä¾èµ–é¡¹éƒ½å°†ä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬</li></ul></li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">&lt;dependencyManagement&gt;</span></span><br><span class="line">    <span class="string">&lt;dependencies&gt;</span></span><br><span class="line">        <span class="string">&lt;dependency&gt;</span></span><br><span class="line">            <span class="string">&lt;groupId&gt;org.yaml&lt;/groupId&gt;</span></span><br><span class="line">            <span class="string">&lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;</span></span><br><span class="line">            <span class="string">&lt;version&gt;2.0&lt;/version&gt;</span></span><br><span class="line">        <span class="string">&lt;/dependency&gt;</span></span><br><span class="line">    <span class="string">&lt;/dependencies&gt;</span></span><br><span class="line"><span class="string">&lt;/dependencyManagement&gt;</span></span><br></pre></td></tr></table></figure><ul><li>è§£å†³è­¦å‘Š:ç§»é™¤ä¾èµ–é¡¹<ul><li>å¦‚æœè¿™ä¸ªåº“ä¸æ˜¯å¿…é¡»çš„ï¼Œå¯ä»¥è€ƒè™‘ä»é¡¹ç›®ä¸­ç§»é™¤å®ƒ; æˆ–è€…ideaä¸­è®¾ç½®å¿½ç•¥(çœ¼ä¸è§å¿ƒä¸çƒ¦)</li></ul></li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">&lt;dependency&gt;</span></span><br><span class="line">    <span class="string">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span><br><span class="line">    <span class="string">&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;</span></span><br><span class="line">    <span class="string">&lt;exclusions&gt;</span></span><br><span class="line">        <span class="string">&lt;exclusion&gt;</span></span><br><span class="line">            <span class="string">&lt;groupId&gt;org.yaml&lt;/groupId&gt;</span></span><br><span class="line">            <span class="string">&lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;</span></span><br><span class="line">        <span class="string">&lt;/exclusion&gt;</span></span><br><span class="line">    <span class="string">&lt;/exclusions&gt;</span></span><br><span class="line"><span class="string">&lt;/dependency&gt;</span></span><br></pre></td></tr></table></figure><h4 id="é¡¹ç›®å¯åŠ¨æŠ¥é”™ï¼šAn-incompatible-version-1-1-29-of-the-Apache-Tomcat-Native-library-is-installed-while-Tomcat-requires-version-1-2-34"><a href="#é¡¹ç›®å¯åŠ¨æŠ¥é”™ï¼šAn-incompatible-version-1-1-29-of-the-Apache-Tomcat-Native-library-is-installed-while-Tomcat-requires-version-1-2-34" class="headerlink" title="é¡¹ç›®å¯åŠ¨æŠ¥é”™ï¼šAn incompatible version [1.1.29] of the Apache Tomcat Native library is installed, while Tomcat requires version [1.2.34]"></a>é¡¹ç›®å¯åŠ¨æŠ¥é”™ï¼šAn incompatible version [1.1.29] of the Apache Tomcat Native library is installed, while Tomcat requires version [1.2.34]</h4><ul><li>æ‰“å¼€ç½‘é¡µ <a href="http://archive.apache.org/dist/tomcat/tomcat-connectors/native/">http://archive.apache.org/dist/tomcat/tomcat-connectors/native/</a></li><li>æŸ¥æ‰¾å¯¹åº”ç‰ˆæœ¬æ–‡ä»¶: <a href="http://archive.apache.org/dist/tomcat/tomcat-connectors/native/1.2.34/binaries/">http://archive.apache.org/dist/tomcat/tomcat-connectors/native/1.2.34/binaries/</a></li><li>ä¸‹è½½å¯¹åº”çš„zipæ–‡ä»¶</li><li>è§£å‹æ–‡ä»¶,é‡Œé¢æœ‰32ä½å’Œ64ä½çš„ tcnative-1.dll æ–‡ä»¶</li><li>æ ¹æ®è‡ªå·±çš„jdkå’Œtomcatç‰ˆæœ¬é€‰æ‹©ä¸€ä¸ªï¼Œå¤åˆ¶åˆ° jdk çš„binç›®å½•ä¸‹å³å¯</li><li>é‡å¯ spring booté¡¹ç›®</li></ul><h2 id="æ¨¡å—å°ç»“"><a href="#æ¨¡å—å°ç»“" class="headerlink" title="æ¨¡å—å°ç»“"></a>æ¨¡å—å°ç»“</h2><h3 id="SpringBoot-æ˜¯ä»€ä¹ˆ"><a href="#SpringBoot-æ˜¯ä»€ä¹ˆ" class="headerlink" title="SpringBoot æ˜¯ä»€ä¹ˆ"></a>SpringBoot æ˜¯ä»€ä¹ˆ</h3><p>SpringBoot å¸®æˆ‘ä»¬ç®€å•ã€å¿«é€Ÿåœ°åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ã€ç”Ÿäº§çº§åˆ«çš„ Spring åº”ç”¨ï¼ˆè¯´æ˜ï¼šSpringBootåº•å±‚æ˜¯Springï¼‰</p><p>å¤§å¤šæ•° SpringBoot åº”ç”¨åªéœ€è¦ç¼–å†™å°‘é‡é…ç½®å³å¯å¿«é€Ÿæ•´åˆ Spring å¹³å°ä»¥åŠç¬¬ä¸‰æ–¹æŠ€æœ¯</p><h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ol><li>ç®€åŒ–æ•´åˆ<ul><li>SpringBootæå‡º<code>åœºæ™¯å¯åŠ¨å™¨</code>çš„æ¦‚å¿µ</li><li>å¯¼å…¥ç›¸å…³çš„åœºæ™¯ï¼Œå³æ‹¥æœ‰ç›¸å…³çš„åŠŸèƒ½ã€‚</li><li>é»˜è®¤æ”¯æŒçš„æ‰€æœ‰åœºæ™¯ï¼š<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.build-systems.starters">https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.build-systems.starters</a><ul><li>å®˜æ–¹æä¾›çš„åœºæ™¯ï¼šå‘½åä¸ºï¼šspring-boot-starter-*</li><li>ç¬¬ä¸‰æ–¹æä¾›åœºæ™¯ï¼šå‘½åä¸ºï¼š*-spring-boot-starter</li></ul></li><li>åœºæ™¯ä¸€å¯¼å…¥ï¼Œä¸‡ç‰©çš†å°±ç»ª</li></ul></li><li>ç®€åŒ–å¼€å‘<ul><li>æ— éœ€ç¼–å†™ä»»ä½•é…ç½®ï¼Œç›´æ¥å¼€å‘ä¸šåŠ¡</li></ul></li><li>ç®€åŒ–é…ç½®<ul><li>application.propertiesï¼š</li><li>é›†ä¸­å¼ç®¡ç†é…ç½®ã€‚åªéœ€è¦ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶å°±è¡Œ ã€‚</li><li>é…ç½®åŸºæœ¬éƒ½æœ‰é»˜è®¤å€¼</li><li>èƒ½å†™çš„æ‰€æœ‰é…ç½®éƒ½åœ¨ï¼š <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties">https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties</a></li></ul></li><li>ç®€åŒ–éƒ¨ç½²<ul><li>æ‰“åŒ…ä¸ºå¯æ‰§è¡Œçš„jaråŒ…ã€‚</li><li>linuxæœåŠ¡å™¨ä¸Šæœ‰javaç¯å¢ƒã€‚</li></ul></li><li>ç®€åŒ–è¿ç»´<ul><li>ä¿®æ”¹é…ç½®ï¼ˆå¤–éƒ¨æ”¾ä¸€ä¸ªapplication.propertiesæ–‡ä»¶ï¼‰ã€ç›‘æ§ã€å¥åº·æ£€æŸ¥ã€‚</li></ul></li></ol><h2 id="åº”ç”¨åˆ†æ"><a href="#åº”ç”¨åˆ†æ" class="headerlink" title="åº”ç”¨åˆ†æ"></a>åº”ç”¨åˆ†æ</h2><h3 id="ä¾èµ–ç®¡ç†æœºåˆ¶"><a href="#ä¾èµ–ç®¡ç†æœºåˆ¶" class="headerlink" title="ä¾èµ–ç®¡ç†æœºåˆ¶"></a>ä¾èµ–ç®¡ç†æœºåˆ¶</h3><ol><li><p>ä¸ºä»€ä¹ˆå¯¼å…¥<code>åœºæ™¯å¯åŠ¨å™¨</code>æ‰€æœ‰çš„ä¾èµ–å°±éƒ½å¯¼å…¥è¿›æ¥äº†?</p><ul><li>æ ¹æ®<code>maven</code>çš„ä¾èµ–ä¼ é€’åŸåˆ™, Aä¾èµ–B,Bä¾èµ–C;åˆ™AåŒæ—¶ä¾èµ–B C</li><li>ä»¥<code>webåœºæ™¯å¯åŠ¨å™¨</code>ä¸ºä¾‹,å¼•å…¥<code>spring-boot-starter-web</code></li><li><code>spring-boot-starter-web</code> ä¼šæœ‰å¾ˆå¤šä¾èµ–,åŒ…æ‹¬å…¶ä»–<code>åœºæ™¯å¯åŠ¨å™¨</code><br>å¦‚<code>spring-boot-starter-tomcat</code>,<code>spring-web</code>,<code>spring-webmvc</code>ç­‰</li><li><strong>å°ç»“ä¸€ä¸‹</strong>: è¯¥<code>åœºæ™¯å¯åŠ¨å™¨</code>ä¼šå°†æ‰€æœ‰çš„ä¾èµ–æå‰å‡†å¤‡å¥½,æ ¹æ®<code>maven</code>çš„ä¾èµ–ä¼ é€’åŸåˆ™å°±å¯å…¨éƒ¨å¼•å…¥</li></ul></li><li><p>ä¸ºä»€ä¹ˆç‰ˆæœ¬å·ä¸ç”¨å†™?</p><ul><li>æ¯ä¸ªbooté¡¹ç›®éƒ½æœ‰ä¸€ä¸ªçˆ¶é¡¹ç›®<code>spring-boot-starter-parent</code></li><li>parentçš„çˆ¶é¡¹ç›®æ˜¯<code>spring-boot-dependencies</code></li><li>ä¹Ÿç§°<code>ç‰ˆæœ¬ä»²è£ä¸­å¿ƒ</code>,ä½¿ç”¨<code>dependencyManagement</code>æ ‡ç­¾å·²å°†æ‰€æœ‰å¸¸è§çš„ä¾èµ–ç‰ˆæœ¬å·æå‰å£°æ˜å¥½</li></ul></li><li><p>è‡ªå®šä¹‰ç‰ˆæœ¬å·</p><ul><li>æ ¹æ®<code>maven</code>çš„å°±è¿‘åŸåˆ™</li><li>ç›´æ¥åœ¨å½“å‰é¡¹ç›®<code>properties</code>æ ‡ç­¾ä¸­ä¿®æ”¹ç‰ˆæœ¬å·</li><li>æˆ–è€…ç›´æ¥åœ¨å¯¼å…¥ä¾èµ–çš„æ—¶å€™å£°æ˜ç‰ˆæœ¬</li></ul></li><li><p>ç¬¬ä¸‰æ–¹çš„jaråŒ…</p><ul><li>boot çˆ¶é¡¹ç›®æ²¡æœ‰ç®¡ç†çš„éœ€è¦è‡ªè¡Œå£°æ˜å¥½</li></ul></li></ol><img alt="SpringBootä¾èµ–ç®¡ç†" src="https://image.fu-jw.com/img/2023/07/01/649f7705d495d.webp"/><h3 id="è‡ªåŠ¨è£…é…æœºåˆ¶"><a href="#è‡ªåŠ¨è£…é…æœºåˆ¶" class="headerlink" title="è‡ªåŠ¨è£…é…æœºåˆ¶"></a>è‡ªåŠ¨è£…é…æœºåˆ¶</h3><h4 id="è‡ªåŠ¨é…ç½®"><a href="#è‡ªåŠ¨é…ç½®" class="headerlink" title="è‡ªåŠ¨é…ç½®"></a>è‡ªåŠ¨é…ç½®</h4><p>ä¸ç”¨ SpringBoot æ—¶, è¦æ•´åˆ SpringMVC å°±éœ€è¦è‡ªå·±æ‰‹åŠ¨é…ç½®:</p><ul><li><code>DispatcherServlet</code>: æ‹¦æˆªè¯·æ±‚çš„ç»„ä»¶</li><li><code>ViewResolver</code>: è§†å›¾è§£æç»„ä»¶</li><li><code>CharacterEncodingFilter</code>: å¤„ç†å­—ç¬¦ç¼–ç çš„ç»„ä»¶</li><li>â€¦</li></ul><p>ç°åœ¨æœ‰äº† SpringBoot ä»¥ä¸Šç»„ä»¶éƒ½ä¸ç”¨å†è‡ªå·±æ‰‹åŠ¨é…ç½®äº†, ç›´æ¥å¼•å…¥<code>webåœºæ™¯å¯åŠ¨å™¨</code>å³å¯</p><h4 id="é»˜è®¤åŒ…æ‰«æè§„åˆ™"><a href="#é»˜è®¤åŒ…æ‰«æè§„åˆ™" class="headerlink" title="é»˜è®¤åŒ…æ‰«æè§„åˆ™"></a>é»˜è®¤åŒ…æ‰«æè§„åˆ™</h4><ul><li><code>@SpringBootApplication</code> æ ‡æ³¨çš„ç±»å°±æ˜¯ä¸»ç¨‹åºç±»</li><li>SpringBoot ä¼šé»˜è®¤æ‰«æä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…åŠå…¶å­åŒ…, å³è‡ªåŠ¨çš„ <strong>component-scan</strong> åŠŸèƒ½</li><li>å¯è‡ªå®šä¹‰æ‰«æè·¯å¾„<ul><li>@SpringBootApplication(scanBasePackages &#x3D; â€œcom.fredoâ€)</li><li>@ComponentScan(â€œcom.fredoâ€) ç›´æ¥æŒ‡å®šæ‰«æçš„è·¯å¾„</li></ul></li></ul><h4 id="é…ç½®é»˜è®¤å€¼"><a href="#é…ç½®é»˜è®¤å€¼" class="headerlink" title="é…ç½®é»˜è®¤å€¼"></a>é…ç½®é»˜è®¤å€¼</h4><ul><li><strong>é…ç½®æ–‡ä»¶</strong>çš„æ‰€æœ‰é…ç½®é¡¹å’ŒæŸä¸ªç±»çš„å¯¹è±¡å€¼è¿›è¡Œä¸€ä¸€ç»‘å®š</li><li>ç»‘å®šäº†é…ç½®æ–‡ä»¶ä¸­æ¯ä¸€é¡¹å€¼çš„ç±»ç§°ä¸º: <strong>å±æ€§ç±»</strong></li><li>å‚ç…§<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html">å®˜æ–¹æ–‡æ¡£</a>ï¼šæˆ–è€…å‚ç…§ç»‘å®šçš„<strong>å±æ€§ç±»</strong></li></ul><h4 id="æŒ‰éœ€åŠ è½½"><a href="#æŒ‰éœ€åŠ è½½" class="headerlink" title="æŒ‰éœ€åŠ è½½"></a>æŒ‰éœ€åŠ è½½</h4><ul><li><code>åœºæ™¯å¯åŠ¨å™¨</code>é™¤äº†å¯¼å…¥ç›¸å…³åŠŸèƒ½ä¾èµ–, è¿˜ä¼šå¯¼å…¥ä¸€ä¸ª<code>spring-boot-starter</code></li><li><code>spring-boot-starter</code>, æ˜¯æ‰€æœ‰<strong>starter</strong>çš„<strong>starter</strong>, åŸºç¡€æ ¸å¿ƒstarter</li><li><code>spring-boot-starter</code>ä¼šå¯¼å…¥åŒ…<code>spring-boot-autoconfigure</code>. åŒ…é‡Œé¢éƒ½æ˜¯å…¨åœºæ™¯çš„ AutoConfiguration è‡ªåŠ¨é…ç½®ç±»</li><li>è™½ç„¶å…¨åœºæ™¯çš„è‡ªåŠ¨é…ç½®éƒ½åœ¨åŒ…:<code>spring-boot-autoconfigure</code>, ä½†å¹¶ä¸ä¼šå…¨éƒ½å¼€å¯<ul><li>æ ¹æ®æ¡ä»¶å¼€å¯</li><li><code>@ConditionalOnXxx</code></li><li><code>@ConditionalOnMissingXxx</code></li></ul></li></ul><p>å°ç»“ä¸€ä¸‹: å¯¼å…¥<code>åœºæ™¯å¯åŠ¨å™¨</code>, è§¦å‘<code>spring-boot-autoconfigure</code>è¿™ä¸ªåŒ…çš„è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆ, å®¹å™¨ä¸­å°±ä¼šå…·æœ‰ç›¸å…³åœºæ™¯çš„åŠŸèƒ½</p><h4 id="è‡ªåŠ¨é…ç½®æµç¨‹ç»†èŠ‚æ¢³ç†"><a href="#è‡ªåŠ¨é…ç½®æµç¨‹ç»†èŠ‚æ¢³ç†" class="headerlink" title="è‡ªåŠ¨é…ç½®æµç¨‹ç»†èŠ‚æ¢³ç†"></a>è‡ªåŠ¨é…ç½®æµç¨‹ç»†èŠ‚æ¢³ç†</h4><ol><li>å¯¼å…¥<code>åœºæ™¯å¯åŠ¨å™¨</code>, ä»¥<code>spring-boot-starter-web</code>ä¸ºä¾‹<ul><li>åœºæ™¯å¯åŠ¨å™¨å°±ä¼šå¯¼å…¥ç›¸å…³åœºæ™¯çš„æ‰€æœ‰ä¾èµ–, å¦‚<code>starter-json</code>,<code>starter-tomcat</code>, <code>springmvc</code></li><li>æ¯ä¸ªåœºæ™¯å¯åŠ¨å™¨éƒ½ä¼šå¼•å…¥ä¸€ä¸ª<code>spring-boot-starter</code>, æ ¸å¿ƒåœºæ™¯å¯åŠ¨å™¨</li><li><strong>æ ¸å¿ƒåœºæ™¯å¯åŠ¨å™¨</strong>ä¼šå¼•å…¥åŒ…:<code>spring-boot-autoconfigure</code></li><li><code>spring-boot-autoconfigure</code>é‡Œé¢åŒ…å«æ‰€æœ‰åœºæ™¯çš„æ‰€æœ‰é…ç½®</li><li>åªè¦è¿™ä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ç±»éƒ½èƒ½ç”Ÿæ•ˆ, é‚£ä¹ˆSpringBootå®˜æ–¹çš„æ•´åˆåŠŸèƒ½å°±èƒ½ç”Ÿæ•ˆ</li><li>SpringBoot é»˜è®¤æ‰«æä¸åˆ°<code>spring-boot-autoconfigure</code>ä¸‹çš„æ‰€æœ‰é…ç½®ç±»(è¿™äº›é…ç½®ç±»ç»™æˆ‘ä»¬åšäº†æ•´åˆæ“ä½œ), é»˜è®¤åªæ‰«æä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…</li></ul></li><li>ä¸»ç¨‹åºï¼š@SpringBootApplication<ul><li><code>@SpringBootApplication</code>ç”±ä¸‰ä¸ªæ³¨è§£ç»„æˆ: <code>@SpringBootConfiguration</code>, <code>@EnableAutoConfiguratio</code>, <code>@ComponentScan</code></li><li>SpringBoot é»˜è®¤åªæ‰«æä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…åŠå…¶ä¸‹å­åŒ…, æ‰«æä¸åˆ°<code>spring-boot-autoconfigure</code>åŒ…ä¸­çš„<strong>é…ç½®ç±»</strong></li><li><code>@EnableAutoConfiguration</code>: SpringBoot å¼€å¯è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒ<ul><li>æ˜¯ç”±<code>@Import(AutoConfigurationImportSelector.class)</code>æä¾›åŠŸèƒ½ï¼šæ‰¹é‡ç»™å®¹å™¨ä¸­å¯¼å…¥ç»„ä»¶</li><li>SpringBoot é»˜è®¤åŠ è½½æ‰€æœ‰çš„é…ç½®ç±»(SpringBoot3.1.0æœ‰146ä¸ª)</li><li>è¿™146ä¸ªé…ç½®ç±»æ¥è‡ªäº<code>spring-boot-autoconfigure</code>ä¸‹ META-INF&#x2F;spring&#x2F;org.springframework.boot.autoconfigure.AutoConfiguration.imports æ–‡ä»¶æŒ‡å®š</li><li>é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åˆ©ç”¨ @Import æ‰¹é‡å¯¼å…¥ç»„ä»¶æœºåˆ¶, æŠŠ autoconfigure åŒ…ä¸‹çš„<strong>è‡ªåŠ¨é…ç½®ç±»</strong>: xxxAutoConfiguration å¯¼å…¥è¿›æ¥</li></ul></li><li>æŒ‰éœ€ç”Ÿæ•ˆ<ul><li>è¿™146ä¸ªè‡ªåŠ¨é…ç½®ç±»å¹¶ä¸å…¨éƒ½ç”Ÿæ•ˆ</li><li>æ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»éƒ½æœ‰æ¡ä»¶æ³¨è§£<code>@ConditionalOnXxx</code>, åªæœ‰æ¡ä»¶æˆç«‹, æ‰èƒ½ç”Ÿæ•ˆ</li></ul></li></ul></li><li><code>xxxAutoConfiguration</code>è‡ªåŠ¨é…ç½®ç±»<ul><li>ç»™å®¹å™¨ä¸­ä½¿ç”¨<code>@Bean</code>æ”¾ä¸€å †ç»„ä»¶</li><li>æ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»éƒ½å¯èƒ½æœ‰è¿™ä¸ªæ³¨è§£<code>@EnableConfigurationProperties(XxxProperties.class)</code>, ç”¨æ¥æŠŠé…ç½®æ–‡ä»¶ä¸­é…çš„æŒ‡å®šå‰ç¼€çš„å±æ€§å€¼å°è£…åˆ°<code>xxxProperties</code>å±æ€§ç±»ä¸­</li><li>ä»¥<code>Tomcat</code>ä¸ºä¾‹: æŠŠæœåŠ¡å™¨çš„æ‰€æœ‰é…ç½®éƒ½æ˜¯ä»¥<code>server</code>å¼€å¤´. é…ç½®éƒ½å°è£…åˆ°äº†å±æ€§ç±»ä¸­</li><li>ç»™å®¹å™¨ä¸­æ”¾çš„æ‰€æœ‰ç»„ä»¶çš„ä¸€äº›æ ¸å¿ƒå‚æ•°, éƒ½æ¥è‡ªäº<code>XxxProperties</code>. <code>XxxProperties</code>éƒ½æ˜¯å’Œé…ç½®æ–‡ä»¶ç»‘å®š</li><li><strong>åªéœ€è¦æ”¹é…ç½®æ–‡ä»¶çš„å€¼, æ ¸å¿ƒç»„ä»¶çš„åº•å±‚å‚æ•°éƒ½èƒ½ä¿®æ”¹</strong></li></ul></li><li>åªéœ€å…³æ³¨ä¸šåŠ¡, å…¨ç¨‹æ— éœ€å…³å¿ƒå„ç§æ•´åˆ(åº•å±‚è¿™äº›å·²ç»æ•´åˆå®Œæˆ)</li></ol><p>å°ç»“ä¸€ä¸‹:</p><ol><li>å¯¼å…¥<code>starter</code>, å°±ä¼šå¯¼å…¥<code>autoconfigure</code>åŒ…</li><li><code>autoconfigure</code>åŒ…é‡Œæœ‰æ–‡ä»¶: META-INF&#x2F;spring&#x2F;org.springframework.boot.autoconfigure.AutoConfiguration.imports, é‡Œé¢æŒ‡å®šäº†æ‰€æœ‰å¯åŠ¨è¦åŠ è½½çš„<strong>è‡ªåŠ¨é…ç½®ç±»</strong></li><li><code>@EnableAutoConfiguration</code>ä¼šè‡ªåŠ¨çš„æŠŠä¸Šé¢æ–‡ä»¶é‡Œé¢å†™çš„æ‰€æœ‰<strong>è‡ªåŠ¨é…ç½®ç±»</strong>éƒ½å¯¼å…¥è¿›æ¥</li><li><code>xxxAutoConfiguration</code>æ˜¯æœ‰æ¡ä»¶æ³¨è§£è¿›è¡ŒæŒ‰éœ€åŠ è½½</li><li><code>xxxAutoConfiguration</code>ç»™å®¹å™¨ä¸­å¯¼å…¥è®¸å¤šç»„ä»¶, ç»„ä»¶éƒ½æ˜¯ä»<code>xxxProperties</code>ä¸­æå–å±æ€§å€¼</li><li><code>xxxProperties</code>åˆå’Œ<strong>é…ç½®æ–‡ä»¶</strong>è¿›è¡Œäº†ç»‘å®š</li></ol><p>è¾¾åˆ°çš„æ•ˆæœ: å¯¼å…¥<code>starter</code>, ä¿®æ”¹é…ç½®æ–‡ä»¶, å°±èƒ½ä¿®æ”¹åº•å±‚è¡Œä¸º</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ğŸ¤–ğŸ¤–-æ‘˜è¦:&lt;br&gt;æœ¬æ–‡ä»‹ç»äº†SpringBootçš„å¿«é€Ÿå¼€å‘æµç¨‹ã€é‡åˆ°é—®é¢˜çš„è§£å†³åŠæ³•ã€ç‰¹ç‚¹å’Œåº”ç”¨åˆ†æï¼Œä¸»è¦åŒ…æ‹¬ä¾èµ–ç®¡ç†æœºåˆ¶ã€è‡ªåŠ¨è£…é…æœºåˆ¶ï¼Œä»¥åŠè‡ªåŠ¨é…ç½®æµç¨‹ç»†èŠ‚æ¢³ç†ã€‚åŒæ—¶ï¼Œè¯¦ç»†è§£æäº†SpringBootä¸­å„ç§é…ç½®å’Œæ³¨è§£çš„ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;/blo</summary>
      
    
    
    
    <category term="å­¦ä¹ " scheme="http://fu-jw.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="SpringBoot" scheme="http://fu-jw.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Markdown ä¸­çš„æ•°å­¦å…¬å¼</title>
    <link href="http://fu-jw.com/posts/63166764.html"/>
    <id>http://fu-jw.com/posts/63166764.html</id>
    <published>2022-12-30T00:00:00.000Z</published>
    <updated>2023-07-09T11:25:56.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ¤–ğŸ¤–-æ‘˜è¦:<br>æœ¬æ–‡ä»‹ç»äº†å„ç§LaTexä»£ç å’Œå…¶å¯¹åº”çš„æ•°å­¦è¡¨è¾¾å¼ï¼ŒåŒ…æ‹¬å¸Œè…Šå­—æ¯è¡¨ï¼Œå¸¸è§ç¬¦å·ï¼Œç®­å¤´ï¼Œå¸¸è§æ•°å­¦å…¬å¼ä»¥åŠå¤æ‚è¡¨è¾¾å¼å¦‚çŸ©é˜µå’Œæ–¹ç¨‹ç»„ç­‰ã€‚</p></blockquote><h2 id="å¸Œè…Šå­—æ¯è¡¨"><a href="#å¸Œè…Šå­—æ¯è¡¨" class="headerlink" title="å¸Œè…Šå­—æ¯è¡¨"></a>å¸Œè…Šå­—æ¯è¡¨</h2><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\alpha</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\alpha$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\beta</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\beta$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\chi</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\chi$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\delta</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\delta$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Delta</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Delta$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\epsilon</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\epsilon$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\eta</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\eta$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Gamma</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Gamma$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\iota</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\iota$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\kappa</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\kappa$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\lambda</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\lambda$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Lambda</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Lambda$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\mu</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\mu$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\nabla</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\nabla$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\nu</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\nu$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\omega</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\omega$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Omega</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Omega$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\phi</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\phi$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Phi</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Phi$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\pi</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\pi$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Pi</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Pi$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\psi</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\psi$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Psi</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Psi$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rho</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rho$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\sigma</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\sigma$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Sigma</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Sigma$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\tau</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\tau$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\theta</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\theta$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Theta</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Theta$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\upsilon</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\upsilon$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\varepsilon</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\varepsilon$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\varsigma</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\varsigma$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\vartheta</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\vartheta$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\xi</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\xi$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\zeta</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\zeta$</p><h2 id="å…¬å¼ä¸­çš„å¸¸è§ç¬¦å·"><a href="#å…¬å¼ä¸­çš„å¸¸è§ç¬¦å·" class="headerlink" title="å…¬å¼ä¸­çš„å¸¸è§ç¬¦å·"></a>å…¬å¼ä¸­çš„å¸¸è§ç¬¦å·</h2><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\cdot</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\cdot$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\colon</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\colon$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\vdots</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\vdots$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\dotsm</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\dotsm$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\dotso</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\dotso$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\ddots</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\ddots$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\check</span>&#123;x&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\check{x}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\grave</span>&#123;x&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\grave{x}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\breve</span>&#123;x&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\breve{x}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\acute</span>&#123;x&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\acute{x}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\tilde</span>&#123;x&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\tilde{x}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\bar</span>&#123;x&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\bar{x}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\hat</span>&#123;x&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\hat{x}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p>æ•ˆæœ:</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p>æ•ˆæœ:</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\dot</span>&#123;x&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\dot{x}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\ddot</span>&#123;x&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\ddot{x}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\widehat</span>&#123;xxx&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\widehat{xxx}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\times</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\times$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\div</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\div$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\neq</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\neq$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\vec</span>&#123;x&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\vec{x}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\dddot</span>&#123;x&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\dddot{x}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\widetilde</span>&#123;xxx&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\widetilde{xxx}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\backslash</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\backslash$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span>/<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $&#x2F;$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\bracevert</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\bracevert$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\smallsetminus</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\smallsetminus$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\lbrace</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\lbrace$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rbrace</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rbrace$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\arrowvert</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\arrowvert$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\lVert</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\lVert$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rVert</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rVert$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\lgroup</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\lgroup$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rgroup</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rgroup$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\langle</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\langle$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rangle</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rangle$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\lvert</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\lvert$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rvert</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rvert$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span>[<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $[$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\lmoustache</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\lmoustache$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rmoustache</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rmoustache$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\lceil</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\lceil$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rceil</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rceil$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\lfloor</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\lfloor$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rfloor</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rfloor$</p><h2 id="å…¬å¼ä¸­å¸¸è§çš„ç®­å¤´"><a href="#å…¬å¼ä¸­å¸¸è§çš„ç®­å¤´" class="headerlink" title="å…¬å¼ä¸­å¸¸è§çš„ç®­å¤´"></a>å…¬å¼ä¸­å¸¸è§çš„ç®­å¤´</h2><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\uparrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ:  $\uparrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\downarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\downarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\leftarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\leftarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rightarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rightarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\longleftarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\longleftarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\longrightarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\longrightarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\longleftrightarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\longleftrightarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\nwarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\nwarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\nearrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\nearrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\swarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\swarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\searrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\searrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\upuparrows</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\upuparrows$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\downdownarrows</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\downdownarrows$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\updownarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\updownarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\leftrightarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\leftrightarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\nleftrightarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\nleftrightarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\upharpoonleft</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\upharpoonleft$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\upharpoonright</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\upharpoonright$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\downharpoonleft</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\downharpoonleft$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\downharpoonright</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\downharpoonright$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\leftharpoondown</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\leftharpoondown$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\leftharpoonup</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\leftharpoonup$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rightharpoonup</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rightharpoonup$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rightharpoondown</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rightharpoondown$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Uparrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Uparrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Downarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Downarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Leftarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Leftarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Rightarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Rightarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\nLeftarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\nLeftarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\nRightarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\nRightarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Leftrightarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Leftrightarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\nLeftrightarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\nLeftrightarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Updownarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Updownarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\mapsto</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\mapsto$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\nleftarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\nleftarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\nrightarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\nrightarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\leftleftarrows</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\leftleftarrows$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rightrightarrows</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rightrightarrows$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\leftrightarrows</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\leftrightarrows$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rightleftarrows</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rightleftarrows$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\hookleftarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\hookleftarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\hookrightarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\hookrightarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\curvearrowleft</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\curvearrowleft$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\curvearrowright</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\curvearrowright$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\circlearrowleft</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\circlearrowleft$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\circlearrowright</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\circlearrowright$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\leftrightharpoons</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\leftrightharpoons$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rightleftharpoons</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rightleftharpoons$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\leftrightharpoons</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\leftrightharpoons$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Longleftarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Longleftarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Longrightarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Longrightarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Longleftrightarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Longleftrightarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Lleftarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Lleftarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Rrightarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Rrightarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\looparrowleft</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\looparrowleft$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\looparrowright</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\looparrowright$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rightsquigarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rightsquigarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\longmapsto</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\longmapsto$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Lsh</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Lsh$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\Rsh</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\Rsh$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\leftarrowtail</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\leftarrowtail$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\rightarrowtail</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\rightarrowtail$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\multimap</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\multimap$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\twoheadleftarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\twoheadleftarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\twoheadrightarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\twoheadrightarrow$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\leftrightsquigarrow</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\leftrightsquigarrow$</p><h2 id="å¸¸è§çš„æ•°å­¦å…¬å¼"><a href="#å¸¸è§çš„æ•°å­¦å…¬å¼" class="headerlink" title="å¸¸è§çš„æ•°å­¦å…¬å¼"></a>å¸¸è§çš„æ•°å­¦å…¬å¼</h2><h3 id="åˆ†æ•°"><a href="#åˆ†æ•°" class="headerlink" title="åˆ†æ•°"></a>åˆ†æ•°</h3><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\frac</span>&#123;ab&#125;&#123;cd&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\frac{ab}{cd}$</p><h3 id="å¼€æ ¹å·"><a href="#å¼€æ ¹å·" class="headerlink" title="å¼€æ ¹å·"></a>å¼€æ ¹å·</h3><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\sqrt</span>[x]&#123;y&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\sqrt[x]{y}$  </p><h3 id="å¯¹æ•°-log"><a href="#å¯¹æ•°-log" class="headerlink" title="å¯¹æ•°-log"></a>å¯¹æ•°-log</h3><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\log</span><span class="built_in">_</span>&#123;a&#125;&#123;b&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\log_{a}{b}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\lg</span>&#123;ab&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ:  $\lg{ab}$</p><h3 id="æŒ‡æ•°"><a href="#æŒ‡æ•°" class="headerlink" title="æŒ‡æ•°"></a>æŒ‡æ•°</h3><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span>&#123;ab&#125;<span class="built_in">^</span>&#123;cd&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: ${ab}^{cd}$</p><h3 id="è§’æ ‡"><a href="#è§’æ ‡" class="headerlink" title="è§’æ ‡"></a>è§’æ ‡</h3><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span>&#123;a&#125;<span class="built_in">_</span>&#123;bc&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: ${a}_{bc}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span>x<span class="built_in">_</span>a<span class="built_in">^</span>b<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $x_a^b$</p><h3 id="è¿åŠ "><a href="#è¿åŠ " class="headerlink" title="è¿åŠ "></a>è¿åŠ </h3><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\sum</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\sum$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\sum</span><span class="built_in">_</span>a<span class="built_in">^</span>b<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\sum_a^b$</p><h3 id="è¿ä¹˜"><a href="#è¿ä¹˜" class="headerlink" title="è¿ä¹˜"></a>è¿ä¹˜</h3><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\prod</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\prod$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\prod</span><span class="built_in">_</span>a<span class="built_in">^</span>b<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\prod_a^b$</p><h3 id="å‰¯ç§¯"><a href="#å‰¯ç§¯" class="headerlink" title="å‰¯ç§¯"></a>å‰¯ç§¯</h3><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\coprod</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\coprod$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\coprod</span><span class="built_in">_</span>a<span class="built_in">^</span>b<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\coprod_a^b$</p><h3 id="ç§¯åˆ†"><a href="#ç§¯åˆ†" class="headerlink" title="ç§¯åˆ†"></a>ç§¯åˆ†</h3><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\int</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\int$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\int</span><span class="built_in">_</span>&#123;a&#125;<span class="built_in">^</span>&#123;b&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\int_{a}^{b}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\oint</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\oint$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\oint</span><span class="built_in">_</span>a<span class="built_in">^</span>b<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\oint_a^b$</p><h3 id="æ’åˆ—ç»„åˆ"><a href="#æ’åˆ—ç»„åˆ" class="headerlink" title="æ’åˆ—ç»„åˆ"></a>æ’åˆ—ç»„åˆ</h3><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span>C<span class="built_in">_</span>n<span class="built_in">^</span>2<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $C_n^2$  </p><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\sum</span> <span class="keyword">\frac</span>&#123;1&#125;&#123;i<span class="built_in">^</span>2&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\sum \frac{1}{i^2}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\bigcap</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\bigcap$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\bigcap</span><span class="built_in">_</span>a<span class="built_in">^</span>b<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\bigcap_a^b$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\bigcup</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\bigcup$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\bigcup</span><span class="built_in">_</span>a<span class="built_in">^</span>b<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\bigcup_a^b$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\bigsqcup</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\bigsqcup$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\bigsqcup</span><span class="built_in">_</span>a<span class="built_in">^</span>b<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\bigsqcup_a^b$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\bigvee</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\bigvee$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\bigvee</span><span class="built_in">_</span>a<span class="built_in">^</span>b<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\bigvee_a^b$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\bigwedge</span><span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\bigwedge$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\bigwedge</span><span class="built_in">_</span>a<span class="built_in">^</span>b<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\bigwedge_a^b$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\widetilde</span>&#123;ab&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\widetilde{ab}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\widehat</span>&#123;ab&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\widehat{ab}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\overleftarrow</span>&#123;ab&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\overleftarrow{ab}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\overrightarrow</span>&#123;ab&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\overrightarrow{ab}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\overbrace</span>&#123;ab&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\overbrace{ab}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\underbrace</span>&#123;ab&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\underbrace{ab}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\underline</span>&#123;ab&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\underline{ab}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\overline</span>&#123;ab&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\overline{ab}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\frac</span>&#123;<span class="keyword">\partial</span> a&#125;&#123;<span class="keyword">\partial</span> b&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\frac{\partial a}{\partial b}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\frac</span>&#123;<span class="keyword">\text</span>&#123;d&#125;x&#125;&#123;<span class="keyword">\text</span>&#123;d&#125;y&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\frac{\text{d}x}{\text{d}y}$</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="built_in">$</span><span class="keyword">\lim</span><span class="built_in">_</span>&#123;a <span class="keyword">\rightarrow</span> b&#125;<span class="built_in">$</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\lim_{a \rightarrow b}$</p><h2 id="å¤æ‚è¡¨è¾¾å¼"><a href="#å¤æ‚è¡¨è¾¾å¼" class="headerlink" title="å¤æ‚è¡¨è¾¾å¼"></a>å¤æ‚è¡¨è¾¾å¼</h2><p><strong>æ³¨æ„: éƒ¨åˆ†å…¬å¼æ˜¾ç¤ºå¤±è´¥, è¯·è‡ªè¡Œå®‰è£…å¯¹åº”æ’ä»¶</strong></p><h3 id="çŸ©é˜µ"><a href="#çŸ©é˜µ" class="headerlink" title="çŸ©é˜µ"></a>çŸ©é˜µ</h3><p>æ— æ‹¬å·ç‰ˆ:</p><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">$$\begin&#123;matrix&#125;</span><br><span class="line">1&amp;0&amp;0\\</span><br><span class="line">0&amp;1&amp;0\\</span><br><span class="line">0&amp;0&amp;1\\</span><br><span class="line">\end&#123;matrix&#125;$$</span><br></pre></td></tr></table></figure><p>æ•ˆæœ:<br>$$\begin{matrix}<br>1&amp;0&amp;0\<br>0&amp;1&amp;0\<br>0&amp;0&amp;1\<br>\end{matrix}$$</p><p>ä¸­æ‹¬å·ç‰ˆ:</p><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">$$\begin&#123;bmatrix&#125;</span><br><span class="line">&#123;a_&#123;11&#125;&#125;&amp;&#123;a_&#123;12&#125;&#125;&amp;&#123;\cdots&#125;&amp;&#123;a_&#123;1n&#125;&#125;\\</span><br><span class="line">&#123;a_&#123;21&#125;&#125;&amp;&#123;a_&#123;22&#125;&#125;&amp;&#123;\cdots&#125;&amp;&#123;a_&#123;2n&#125;&#125;\\</span><br><span class="line">&#123;\vdots&#125;&amp;&#123;\vdots&#125;&amp;&#123;\ddots&#125;&amp;&#123;\vdots&#125;\\</span><br><span class="line">&#123;a_&#123;m1&#125;&#125;&amp;&#123;a_&#123;m2&#125;&#125;&amp;&#123;\cdots&#125;&amp;&#123;a_&#123;mn&#125;&#125;\\</span><br><span class="line">\end&#123;bmatrix&#125;$$</span><br></pre></td></tr></table></figure><p>æ•ˆæœ:<br>$$\begin{bmatrix}<br>{a_{11}}&amp;{a_{12}}&amp;{\cdots}&amp;{a_{1n}}\<br>{a_{21}}&amp;{a_{22}}&amp;{\cdots}&amp;{a_{2n}}\<br>{\vdots}&amp;{\vdots}&amp;{\ddots}&amp;{\vdots}\<br>{a_{m1}}&amp;{a_{m2}}&amp;{\cdots}&amp;{a_{mn}}\<br>\end{bmatrix}$$</p><p>å°æ‹¬å·ç‰ˆ:</p><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">$$\begin&#123;pmatrix&#125;</span><br><span class="line">&#123;a_&#123;11&#125;&#125;&amp;&#123;a_&#123;12&#125;&#125;&amp;&#123;\cdots&#125;&amp;&#123;a_&#123;1n&#125;&#125;\\</span><br><span class="line">&#123;a_&#123;21&#125;&#125;&amp;&#123;a_&#123;22&#125;&#125;&amp;&#123;\cdots&#125;&amp;&#123;a_&#123;2n&#125;&#125;\\</span><br><span class="line">&#123;\vdots&#125;&amp;&#123;\vdots&#125;&amp;&#123;\ddots&#125;&amp;&#123;\vdots&#125;\\</span><br><span class="line">&#123;a_&#123;m1&#125;&#125;&amp;&#123;a_&#123;m2&#125;&#125;&amp;&#123;\cdots&#125;&amp;&#123;a_&#123;mn&#125;&#125;\\</span><br><span class="line">\end&#123;pmatrix&#125;$$</span><br></pre></td></tr></table></figure><p>æ•ˆæœ:<br>$$\begin{pmatrix}<br>{a_{11}}&amp;{a_{12}}&amp;{\cdots}&amp;{a_{1n}}\<br>{a_{21}}&amp;{a_{22}}&amp;{\cdots}&amp;{a_{2n}}\<br>{\vdots}&amp;{\vdots}&amp;{\ddots}&amp;{\vdots}\<br>{a_{m1}}&amp;{a_{m2}}&amp;{\cdots}&amp;{a_{mn}}\<br>\end{pmatrix}$$</p><h3 id="æ–¹ç¨‹ç»„"><a href="#æ–¹ç¨‹ç»„" class="headerlink" title="æ–¹ç¨‹ç»„"></a>æ–¹ç¨‹ç»„</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">$$\begin&#123;cases&#125;</span><br><span class="line">a_1x+b_1y+c_1z=d_1\\</span><br><span class="line">a_2x+b_2y+c_2z=d_2\\</span><br><span class="line">a_3x+b_3y+c_3z=d_3\\</span><br><span class="line">\end&#123;cases&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p>æ•ˆæœ:<br>$$\begin{cases}<br>a_1x+b_1y+c_1z&#x3D;d_1\<br>a_2x+b_2y+c_2z&#x3D;d_2\<br>a_3x+b_3y+c_3z&#x3D;d_3\<br>\end{cases}<br>$$<br>æœ‰æ¡ä»¶ç‰ˆ:</p><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">$$Sum=\begin&#123;cases&#125; L == 0 &amp; H[R]\\</span><br><span class="line">L != 0 &amp; H[R] = H[L-1]\end&#123;cases&#125;$$</span><br></pre></td></tr></table></figure><p>æ•ˆæœ:<br>$$Sum&#x3D;\begin{cases} L &#x3D;&#x3D; 0 &amp; H[R]\<br>L !&#x3D; 0 &amp; H[R] &#x3D; H[L-1]\end{cases}$$  </p><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">$$\begin&#123;cases&#125;a &amp; x = 0\\ </span><br><span class="line">b &amp; x &gt; 0</span><br><span class="line">\end&#123;cases&#125;$$</span><br></pre></td></tr></table></figure><p>æ•ˆæœ:<br>$$\begin{cases}a &amp; x &#x3D; 0\<br>b &amp; x &gt; 0<br>\end{cases}$$</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ğŸ¤–ğŸ¤–-æ‘˜è¦:&lt;br&gt;æœ¬æ–‡ä»‹ç»äº†å„ç§LaTexä»£ç å’Œå…¶å¯¹åº”çš„æ•°å­¦è¡¨è¾¾å¼ï¼ŒåŒ…æ‹¬å¸Œè…Šå­—æ¯è¡¨ï¼Œå¸¸è§ç¬¦å·ï¼Œç®­å¤´ï¼Œå¸¸è§æ•°å­¦å…¬å¼ä»¥åŠå¤æ‚è¡¨è¾¾å¼å¦‚çŸ©é˜µå’Œæ–¹ç¨‹ç»„ç­‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å¸Œè…Šå­—æ¯è¡¨&quot;&gt;&lt;a href=&quot;#å¸Œè…Šå­—æ¯è¡¨</summary>
      
    
    
    
    <category term="å­¦ä¹ " scheme="http://fu-jw.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="Markdown" scheme="http://fu-jw.com/tags/Markdown/"/>
    
    <category term="LaTex" scheme="http://fu-jw.com/tags/LaTex/"/>
    
  </entry>
  
  <entry>
    <title>Markdown å¸¸ç”¨è¯­æ³•</title>
    <link href="http://fu-jw.com/posts/e317821c.html"/>
    <id>http://fu-jw.com/posts/e317821c.html</id>
    <published>2022-12-30T00:00:00.000Z</published>
    <updated>2023-07-09T11:25:56.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ¤–ğŸ¤–-æ‘˜è¦:<br>æœ¬æ–‡ä»‹ç»äº†MarkDownç¼–è¾‘çš„å¤šç§æŠ€å·§ï¼ŒåŒ…æ‹¬å­—ä½“çš„åŠ ç²—ã€æ–œä½“ã€å¤§å°è°ƒæ•´ã€é¢œè‰²æ”¹å˜ï¼Œå’Œæ–‡æœ¬çš„æ¢è¡Œã€æ¨ªçº¿ã€é“¾æ¥ã€åˆ†é¡µã€æŠ˜å ç­‰æ•ˆæœçš„ç”Ÿæˆæ–¹æ³•ï¼Œä»¥åŠå¦‚ä½•åµŒå…¥æ–‡ä»¶ã€ç½‘ç»œå›¾ç‰‡å’Œè§†é¢‘</p></blockquote><h2 id="æ–‡æœ¬ç›¸å…³"><a href="#æ–‡æœ¬ç›¸å…³" class="headerlink" title="æ–‡æœ¬ç›¸å…³"></a>æ–‡æœ¬ç›¸å…³</h2><h3 id="åŠ ç²—"><a href="#åŠ ç²—" class="headerlink" title="åŠ ç²—"></a>åŠ ç²—</h3><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">$\mathbf&#123;ä½ å¥½å•Š&#125;$</span><br></pre></td></tr></table></figure><p>æ™®é€š: ä½ å¥½å•Š<br>æ•ˆæœ: $\mathbf{ä½ å¥½å•Š}$</p><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">**ä½ å¥½å•Š**</span><br></pre></td></tr></table></figure><p>æ•ˆæœ: <strong>ä½ å¥½å•Š</strong></p><h3 id="æ–œä½“"><a href="#æ–œä½“" class="headerlink" title="æ–œä½“"></a>æ–œä½“</h3><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">$\mathit&#123;ä¸–ç•Œ&#125;$</span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\mathit{ä¸–ç•Œ}$</p><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">*ä¸–ç•Œ*</span><br></pre></td></tr></table></figure><p>æ•ˆæœ: <em>ä¸–ç•Œ</em></p><h3 id="å¤§å°"><a href="#å¤§å°" class="headerlink" title="å¤§å°"></a>å¤§å°</h3><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">$\tiny ä½ å¥½(tiny)$</span><br><span class="line"></span><br><span class="line">$\scriptsize ä½ å¥½(scriptsize)$</span><br><span class="line"></span><br><span class="line">$\small ä½ å¥½(small)$</span><br><span class="line"></span><br><span class="line">$\normalsize ä½ å¥½(normalsize)$</span><br><span class="line"></span><br><span class="line">$\large ä½ å¥½(large)$</span><br><span class="line"></span><br><span class="line">$\Large ä½ å¥½(Large)$</span><br><span class="line"></span><br><span class="line">$\huge ä½ å¥½(huge)$</span><br><span class="line"></span><br><span class="line">$\Huge ä½ å¥½(Huge)$</span><br></pre></td></tr></table></figure><p>æ•ˆæœ:<br>$\tiny ä½ å¥½(tiny)$</p><p>$\scriptsize ä½ å¥½(scriptsize)$</p><p>$\small ä½ å¥½(small)$</p><p>$\normalsize ä½ å¥½(normalsize)$</p><p>$\large ä½ å¥½(large)$</p><p>$\Large ä½ å¥½(Large)$</p><p>$\huge ä½ å¥½(huge)$</p><p>$\Huge ä½ å¥½(Huge)$</p><h3 id="é¢œè‰²"><a href="#é¢œè‰²" class="headerlink" title="é¢œè‰²"></a>é¢œè‰²</h3><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">$\color&#123;Red&#125;&#123;çº¢è‰²&#125;$, $\color&#123;blue&#125;&#123;è“è‰²&#125;$,  $\color&#123;orange&#125;&#123;æ©˜è‰²&#125;$,  </span><br><span class="line">$\color&#123;Green&#125;&#123;ç»¿è‰²&#125;$,  $\color&#123;gray&#125;&#123;ç°è‰²&#125;$,  $\color&#123;purple&#125;&#123;ç´«è‰²&#125;$.</span><br></pre></td></tr></table></figure><p>æ•ˆæœ:<br>$\color{Red}{çº¢è‰²}$, $\color{blue}{è“è‰²}$,  $\color{orange}{æ©˜è‰²}$,<br>$\color{Green}{ç»¿è‰²}$,  $\color{gray}{ç°è‰²}$,  $\color{purple}{ç´«è‰²}$.</p><h3 id="æ¢è¡Œ"><a href="#æ¢è¡Œ" class="headerlink" title="æ¢è¡Œ"></a>æ¢è¡Œ</h3><h4 id="ä¸¤ä¸ªåŠä»¥ä¸Šç©ºæ ¼-å›è½¦"><a href="#ä¸¤ä¸ªåŠä»¥ä¸Šç©ºæ ¼-å›è½¦" class="headerlink" title="ä¸¤ä¸ªåŠä»¥ä¸Šç©ºæ ¼ + å›è½¦"></a>ä¸¤ä¸ªåŠä»¥ä¸Šç©ºæ ¼ + å›è½¦</h4><p>ç¬¬ä¸€è¡Œ<br>ç¬¬äºŒè¡Œ</p><h4 id="html-æ ‡ç­¾-lt-x2F-br-gt"><a href="#html-æ ‡ç­¾-lt-x2F-br-gt" class="headerlink" title="html æ ‡ç­¾ &lt;&#x2F;br&gt;"></a>html æ ‡ç­¾ &lt;&#x2F;br&gt;</h4><p>ç¬¬ä¸€è¡Œ</br>ç¬¬äºŒè¡Œ</p><h3 id="æ¨ªçº¿"><a href="#æ¨ªçº¿" class="headerlink" title="æ¨ªçº¿"></a>æ¨ªçº¿</h3><h4 id="ä¸Šæ¨ªçº¿"><a href="#ä¸Šæ¨ªçº¿" class="headerlink" title="ä¸Šæ¨ªçº¿"></a>ä¸Šæ¨ªçº¿</h4><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">$\overline&#123;\text&#123;ä¸Šåˆ’çº¿&#125;&#125;$</span><br></pre></td></tr></table></figure><p>æ•ˆæœ:  $\overline{\text{ä¸Šåˆ’çº¿}}$</p><h4 id="ä¸­æ¨ªçº¿"><a href="#ä¸­æ¨ªçº¿" class="headerlink" title="ä¸­æ¨ªçº¿"></a>ä¸­æ¨ªçº¿</h4><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">~~ä¸­åˆ’çº¿~~</span><br></pre></td></tr></table></figure><p>æ•ˆæœ: <del>ä¸­åˆ’çº¿</del></p><h4 id="ä¸‹æ¨ªçº¿"><a href="#ä¸‹æ¨ªçº¿" class="headerlink" title="ä¸‹æ¨ªçº¿"></a>ä¸‹æ¨ªçº¿</h4><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">$\underline&#123;\text&#123;ä¸‹åˆ’çº¿1&#125;&#125;$</span><br><span class="line"></span><br><span class="line">&lt;u&gt;ä¸‹åˆ’çº¿2&lt;/u&gt;</span><br></pre></td></tr></table></figure><p>æ•ˆæœ: $\underline{\text{ä¸‹åˆ’çº¿1}}$    <u>ä¸‹åˆ’çº¿ 2</u></p><h3 id="é“¾æ¥"><a href="#é“¾æ¥" class="headerlink" title="é“¾æ¥"></a>é“¾æ¥</h3><p><a href="https://www.baidu.com/">ç™¾åº¦ä¸€ä¸‹</a></p><h3 id="åˆ†é¡µ"><a href="#åˆ†é¡µ" class="headerlink" title="åˆ†é¡µ"></a>åˆ†é¡µ</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">&lt;div STYLE=&quot;page-break-after: always;&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><div STYLE="page-break-after: always;"></div>  <p>å°†è¿™ä¸ªæ’å…¥åˆ°ä½ è¦åˆ†é¡µçš„åœ°æ–¹</p><h3 id="æŠ˜å å†…å®¹"><a href="#æŠ˜å å†…å®¹" class="headerlink" title="æŠ˜å å†…å®¹"></a>æŠ˜å å†…å®¹</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">&lt;details&gt; &lt;summary&gt;Title&lt;/summary&gt;</span><br><span class="line">contents ...</span><br><span class="line">&lt;/details&gt;</span><br></pre></td></tr></table></figure><p>æ•ˆæœ:</p><details><summary>Title</summary>contents ...</details><h2 id="å†…åµŒ"><a href="#å†…åµŒ" class="headerlink" title="å†…åµŒ"></a>å†…åµŒ</h2><p><a href="https://publish.obsidian.md/help/How+to/Embed+files">https://publish.obsidian.md/help/How+to/Embed+files</a></p><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">![[My File.pdf#page=number]]</span><br></pre></td></tr></table></figure><h3 id="ç½‘ç»œå›¾ç‰‡"><a href="#ç½‘ç»œå›¾ç‰‡" class="headerlink" title="ç½‘ç»œå›¾ç‰‡"></a>ç½‘ç»œå›¾ç‰‡</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">![ç½‘ç»œå›¾ç‰‡](https://s2.loli.net/2023/06/11/MVbHQs1Eui6fAzo.webp)</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/06/11/MVbHQs1Eui6fAzo.webp" alt="ç½‘ç»œå›¾ç‰‡"></p><h3 id="ç½‘ç»œè§†é¢‘"><a href="#ç½‘ç»œè§†é¢‘" class="headerlink" title="ç½‘ç»œè§†é¢‘"></a>ç½‘ç»œè§†é¢‘</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">&lt;iframe src=&quot;https://player.bilibili.com/player.html?aid=586848024&amp;bvid=BV1Kz4y1m74W&amp;cid=300166684&amp;page=1&quot; scrolling=&quot;no&quot; border=&quot;0&quot; frameborder=&quot;no&quot; framespacing=&quot;0&quot; allowfullscreen=&quot;true&quot; height=300 width=400&gt; </span><br><span class="line">&lt;/iframe&gt;</span><br></pre></td></tr></table></figure><iframe src=" https://player.bilibili.com/player.html?aid=586848024&bvid=BV1Kz4y1m74W&cid=300166684&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" height=300 width=400></iframe><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ğŸ¤–ğŸ¤–-æ‘˜è¦:&lt;br&gt;æœ¬æ–‡ä»‹ç»äº†MarkDownç¼–è¾‘çš„å¤šç§æŠ€å·§ï¼ŒåŒ…æ‹¬å­—ä½“çš„åŠ ç²—ã€æ–œä½“ã€å¤§å°è°ƒæ•´ã€é¢œè‰²æ”¹å˜ï¼Œå’Œæ–‡æœ¬çš„æ¢è¡Œã€æ¨ªçº¿ã€é“¾æ¥ã€åˆ†é¡µã€æŠ˜å ç­‰æ•ˆæœçš„ç”Ÿæˆæ–¹æ³•ï¼Œä»¥åŠå¦‚ä½•åµŒå…¥æ–‡ä»¶ã€ç½‘ç»œå›¾ç‰‡å’Œè§†é¢‘&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;</summary>
      
    
    
    
    <category term="å­¦ä¹ " scheme="http://fu-jw.com/categories/%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="Markdown" scheme="http://fu-jw.com/tags/Markdown/"/>
    
  </entry>
  
</feed>
